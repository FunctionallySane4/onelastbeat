/* Generated by Nim Compiler v2.2.2 */
/* Compiled for: Linux, wasm32, clang */
/* Command for C compiler:
   emcc -c -w -ferror-limit=3 -pthread -flto -O3   -I/home/gregis/.choosenim/toolchains/nim-2.2.2/lib -I/home/gregis/Projects/OneLastBeat/src -o /home/gregis/Projects/OneLastBeat/tmp/@m..@s..@s..@s.nimble@spkgs2@snico-0.4.10-f4d0514d40cc9aeaa3f02e3654986ff28d1038ec@snico.nim.c.o /home/gregis/Projects/OneLastBeat/tmp/@m..@s..@s..@s.nimble@spkgs2@snico-0.4.10-f4d0514d40cc9aeaa3f02e3654986ff28d1038ec@snico.nim.c */
#define NIM_INTBITS 32

#include "nimbase.h"
#include <string.h>
#include <math.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tySequence__friFxHbsLN0MVvin0IyEFg tySequence__friFxHbsLN0MVvin0IyEFg;
typedef struct tySequence__friFxHbsLN0MVvin0IyEFg_Content tySequence__friFxHbsLN0MVvin0IyEFg_Content;
typedef struct tySequence__pcXSChh0J6OCdCDPpBK9b1g tySequence__pcXSChh0J6OCdCDPpBK9b1g;
typedef struct tySequence__pcXSChh0J6OCdCDPpBK9b1g_Content tySequence__pcXSChh0J6OCdCDPpBK9b1g_Content;
typedef struct tyTuple__FtZxsWeKlOo83uVL9c4OOmg tyTuple__FtZxsWeKlOo83uVL9c4OOmg;
typedef struct tyTuple__npOdd6OOX5uthJz7z22r9ag tyTuple__npOdd6OOX5uthJz7z22r9ag;
typedef struct tyTuple__hSHiEU6uEtL7soi1F4tKCg tyTuple__hSHiEU6uEtL7soi1F4tKCg;
typedef struct tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw;
typedef struct tySequence__wgMvnlQViw7eTDXNUYd1uQ tySequence__wgMvnlQViw7eTDXNUYd1uQ;
typedef struct tySequence__wgMvnlQViw7eTDXNUYd1uQ_Content tySequence__wgMvnlQViw7eTDXNUYd1uQ_Content;
typedef struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ tySequence__6H5Oh5UUvVCLiakt9aTwtUQ;
typedef struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct tySequence__PclZllI1Ry7MX4uStk4Jug tySequence__PclZllI1Ry7MX4uStk4Jug;
typedef struct tySequence__PclZllI1Ry7MX4uStk4Jug_Content tySequence__PclZllI1Ry7MX4uStk4Jug_Content;
typedef struct tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg;
typedef struct tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw;
typedef struct tySequence__Orgg2tA9c9cbNS8O19aPtx6fw tySequence__Orgg2tA9c9cbNS8O19aPtx6fw;
typedef struct tySequence__Orgg2tA9c9cbNS8O19aPtx6fw_Content tySequence__Orgg2tA9c9cbNS8O19aPtx6fw_Content;
typedef struct tyTuple__Xo4YhcsfLAmbGDNu1Obfcw tyTuple__Xo4YhcsfLAmbGDNu1Obfcw;
typedef struct tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA;
typedef struct tyObject_IOError__YfyTxe9cThBYfr9aHkc9cltBw tyObject_IOError__YfyTxe9cThBYfr9aHkc9cltBw;
typedef struct tyObject_CatchableError__170PUSd9bpOf09cSZOeaNOaA tyObject_CatchableError__170PUSd9bpOf09cSZOeaNOaA;
typedef struct tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg;
typedef struct tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA;
typedef struct tyObject_NicoControllercolonObjectType___OpA7H9cHyiLWNuzgwH7k5ZQ tyObject_NicoControllercolonObjectType___OpA7H9cHyiLWNuzgwH7k5ZQ;
typedef struct tyTuple__Wf8pb9aU0WdM83selH6Zpuw tyTuple__Wf8pb9aU0WdM83selH6Zpuw;
typedef struct tyObject_StackTraceEntry__DppJCFaZRvent8fPJeLs4Q tyObject_StackTraceEntry__DppJCFaZRvent8fPJeLs4Q;
typedef struct tyTuple__X9cSs7W9bNQqctODYBYs00Dg tyTuple__X9cSs7W9bNQqctODYBYs00Dg;
typedef NF32 tyArray__EH3vwk2gvJbf6WGsCM9baJQ[16];
typedef NI tyArray__9agrCtWKhCnWWMJpKKugJag[16];
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
struct tySequence__friFxHbsLN0MVvin0IyEFg {
  NI len; tySequence__friFxHbsLN0MVvin0IyEFg_Content* p;
};
typedef struct {
N_NIMCALL_PTR(void, ClP_0) (NI x_p0, NI y_p1, void* ClE_0);
void* ClE_0;
} tyProc__yZbvgbtLeGIhzIA9bifjdPw;
struct tySequence__pcXSChh0J6OCdCDPpBK9b1g {
  NI len; tySequence__pcXSChh0J6OCdCDPpBK9b1g_Content* p;
};
struct tyTuple__FtZxsWeKlOo83uVL9c4OOmg {
	NI Field0;
	NI Field1;
	NI Field2;
	NI Field3;
};
typedef N_CLOSURE_PTR(void, TM__9aNIpYgJ1ntUbwp32t1x9cQA_2) (NI x_p0, NI y_p1, void* ClE_0);
struct tyTuple__hSHiEU6uEtL7soi1F4tKCg {
	NU8 Field0;
	NU8 Field1;
	NU8 Field2;
};
typedef tyTuple__hSHiEU6uEtL7soi1F4tKCg tyArray__dmDmTUzwcRf4TYNb3Z383A[256];
struct tyTuple__npOdd6OOX5uthJz7z22r9ag {
	NI Field0;
	tyArray__dmDmTUzwcRf4TYNb3Z383A Field1;
};
typedef tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* tyArray__WGdFp1x1TRhEll6Qsgf9cLQ[16];
struct tySequence__wgMvnlQViw7eTDXNUYd1uQ {
  NI len; tySequence__wgMvnlQViw7eTDXNUYd1uQ_Content* p;
};
struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ {
  NI len; tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content* p;
};
struct tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw {
	tySequence__wgMvnlQViw7eTDXNUYd1uQ palette;
	tySequence__6H5Oh5UUvVCLiakt9aTwtUQ data;
	NI channels;
	NI w;
	NI h;
	NI tw;
	NI th;
	NimStringV2 filename;
	tySequence__6H5Oh5UUvVCLiakt9aTwtUQ spriteFlags;
};
struct TNimTypeV2 {
	void* destructor;
	NI size;
	NI16 align;
	NI16 depth;
	NU32* display;
	void* traceImpl;
	void* typeInfoV1;
	NI flags;
	void* vTable[SEQ_DECL_SIZE];
};
struct RootObj {
	TNimTypeV2* m_type;
};
struct tySequence__PclZllI1Ry7MX4uStk4Jug {
  NI len; tySequence__PclZllI1Ry7MX4uStk4Jug_Content* p;
};
struct Exception {
	RootObj Sup;
	Exception* parent;
	NCSTRING name;
	NimStringV2 message;
	tySequence__PclZllI1Ry7MX4uStk4Jug trace;
	Exception* up;
};
typedef tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* tyArray__r4BvwNWZwrhBzTdqZDVtfw[16];
struct tySequence__Orgg2tA9c9cbNS8O19aPtx6fw {
  NI len; tySequence__Orgg2tA9c9cbNS8O19aPtx6fw_Content* p;
};
struct tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw {
	tySequence__Orgg2tA9c9cbNS8O19aPtx6fw data;
	NI counter;
};
struct tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg {
	tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw rects;
	tySequence__6H5Oh5UUvVCLiakt9aTwtUQ data;
	NI w;
	NI h;
};
struct tyTuple__Xo4YhcsfLAmbGDNu1Obfcw {
	NU8 Field0;
	NU8 Field1;
	NU8 Field2;
	NU8 Field3;
};
typedef NimStringV2 tyArray__yt5VDPNtUGx9cBkOVakHwdQ[6];
typedef NimStringV2 tyArray__haiLFy0nBviVTKFGuwztzQ[5];
typedef struct {
N_NIMCALL_PTR(void, ClP_0) (void* ClE_0);
void* ClE_0;
} tyProc__HzVCwACFYM9cx9aV62PdjtuA;
typedef struct {
N_NIMCALL_PTR(void, ClP_0) (NF32 dt_p0, void* ClE_0);
void* ClE_0;
} tyProc__y9aUXu4JGz72YDIZVWUrK5w;
typedef NimStringV2 tyArray__nHXaesL0DJZHyVS07ARPRA[1];
struct tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA {
	RootObj Sup;
	NI index0;
	NimStringV2 chars1;
	NIM_BOOL shouldReplace2;
};
struct tyObject_CatchableError__170PUSd9bpOf09cSZOeaNOaA {
	Exception Sup;
};
struct tyObject_IOError__YfyTxe9cThBYfr9aHkc9cltBw {
	tyObject_CatchableError__170PUSd9bpOf09cSZOeaNOaA Sup;
};
typedef NU8 tySet_tyChar__nmiMWKVIe46vacnhAFrQvw[32];
typedef struct {
N_NIMCALL_PTR(void, ClP_0) (tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* surface_p0, void* ClE_0);
void* ClE_0;
} tyProc__V9bGopLHKFo2FjArm25MFaw;
struct tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg {
	NI rc;
	NI rootIdx;
};
struct tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA {
	RootObj Sup;
	NimStringV2 filename0;
	NI32 tileWidth1;
	NI32 tileHeight2;
	NI index3;
	NIM_BOOL shouldReplace4;
};
typedef NimStringV2 tyArray__meGd17iD6izZVY5NTv9bHUA[10];
typedef NI tyArray__AM6k89cr9c1T2mNMufYfM0Rg[256];
typedef NIM_BOOL tyArray__JLIwlu3xtaWK9coqUZvph4Q[256];
typedef NU8 tyEnum_NicoButton__DuWECYQZDfo5yecT9cSNFVw;
typedef NU8 tyEnum_NicoControllerKind__5THGgzvcmaTrlb1pD5eKbQ;
struct tyTuple__Wf8pb9aU0WdM83selH6Zpuw {
	NF Field0;
	NF Field1;
	NI Field2;
};
typedef tyTuple__Wf8pb9aU0WdM83selH6Zpuw tyArray__NJOswEblr10qEBmk9am1gFg[6];
typedef NI tyArray__0gDP19airgUjPdMoI3rX27g[16];
struct tyObject_NicoControllercolonObjectType___OpA7H9cHyiLWNuzgwH7k5ZQ {
	tyEnum_NicoControllerKind__5THGgzvcmaTrlb1pD5eKbQ kind;
	NimStringV2 name;
	void* sdlController;
	NI id;
	tyArray__NJOswEblr10qEBmk9am1gFg axes;
	tyArray__0gDP19airgUjPdMoI3rX27g buttons;
	NF deadzone;
	NIM_BOOL invertX;
	NIM_BOOL invertY;
	NIM_BOOL useRightStick;
};
typedef NU8 tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww;
typedef NU8 tyEnum_DitherMode__qddd9bcPRohUdqi2yBml8IQ;
typedef NU8 tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ;
typedef struct {
NIM_CHAR* Field0;
NI Field1;
} tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ;
struct tySequence__friFxHbsLN0MVvin0IyEFg_Content { NI cap; tyObject_NicoControllercolonObjectType___OpA7H9cHyiLWNuzgwH7k5ZQ* data[SEQ_DECL_SIZE]; };
struct tySequence__pcXSChh0J6OCdCDPpBK9b1g_Content { NI cap; tyProc__yZbvgbtLeGIhzIA9bifjdPw data[SEQ_DECL_SIZE]; };
struct tySequence__wgMvnlQViw7eTDXNUYd1uQ_Content { NI cap; tyTuple__hSHiEU6uEtL7soi1F4tKCg data[SEQ_DECL_SIZE]; };
struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content { NI cap; NU8 data[SEQ_DECL_SIZE]; };
struct tyObject_StackTraceEntry__DppJCFaZRvent8fPJeLs4Q {
	NCSTRING procname;
	NI line;
	NCSTRING filename;
};
struct tySequence__PclZllI1Ry7MX4uStk4Jug_Content { NI cap; tyObject_StackTraceEntry__DppJCFaZRvent8fPJeLs4Q data[SEQ_DECL_SIZE]; };
struct tyTuple__X9cSs7W9bNQqctODYBYs00Dg {
	NI Field0;
	NI32 Field1;
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg Field2;
};
struct tySequence__Orgg2tA9c9cbNS8O19aPtx6fw_Content { NI cap; tyTuple__X9cSs7W9bNQqctODYBYs00Dg data[SEQ_DECL_SIZE]; };
N_LIB_PRIVATE N_NIMCALL(void, eqsink___pkgZnicoZbackendsZcommon_u3027)(tySequence__friFxHbsLN0MVvin0IyEFg* dest_p0, tySequence__friFxHbsLN0MVvin0IyEFg src_p1);
N_LIB_PRIVATE N_NIMCALL(tySequence__friFxHbsLN0MVvin0IyEFg, newSeq__pkgZnico_u6965)(NI len_p0);
N_LIB_PRIVATE N_NIMCALL(void, addResizeFunc__pkgZnico_u5744)(tyProc__yZbvgbtLeGIhzIA9bifjdPw newResizeFunc_p0);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, add__pkgZnico_u5746)(tySequence__pcXSChh0J6OCdCDPpBK9b1g* x_p0, tyProc__yZbvgbtLeGIhzIA9bifjdPw y_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdup___pkgZnicoZbackendsZcommon_u3513)(tyProc__yZbvgbtLeGIhzIA9bifjdPw src_p0, NIM_BOOL cyclic_p1, tyProc__yZbvgbtLeGIhzIA9bifjdPw* Result);
N_LIB_PRIVATE N_NIMCALL(void, colonanonymous___pkgZnico_u6982)(NI w_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(void, clip__pkgZnico_u124)(void);
N_LIB_PRIVATE N_NIMCALL(void, init__pkgZnicoZbackendsZsdl2_u6627)(NimStringV2 org_p0, NimStringV2 app_p1);
N_LIB_PRIVATE N_NIMCALL(void, setPalette__pkgZnico_u824)(tyTuple__npOdd6OOX5uthJz7z22r9ag* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, loadPalettePico8__pkgZnico_u69)(tyTuple__npOdd6OOX5uthJz7z22r9ag* Result);
N_LIB_PRIVATE N_NIMCALL(tyTuple__hSHiEU6uEtL7soi1F4tKCg, RGB__pkgZnicoZbackendsZcommon_u1678)(NI32 r_p0, NI32 g_p1, NI32 b_p2);
N_LIB_PRIVATE N_NIMCALL(void, randomize__pureZrandom_u297)(NI64 seed_p0);
N_LIB_PRIVATE N_NIMCALL(NF, epochTime__pureZtimes_u5256)(void);
N_LIB_PRIVATE N_NIMCALL(void, loadConfig__pkgZnicoZbackendsZsdl2_u168)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___pkgZnicoZbackendsZcommon_u1116)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw** dest_p0, tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* src_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw*, newSurface__pkgZnicoZbackendsZcommon_u1091)(NI w_p0, NI h_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pkgZnicoZbackendsZcommon_u1107)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, setSpritesheet__pkgZnico_u5875)(NI index_p0);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size_p0, NI alignment_p1);
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1);
static N_INLINE(void, copyMem__system_u1731)(void* dest_p0, void* source_p1, NI size_p2);
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___systemZdollars_u8)(NI x_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space_p0);
N_LIB_PRIVATE N_NIMCALL(void, raiseExceptionEx)(Exception* e_p0, NCSTRING ename_p1, NCSTRING procname_p2, NCSTRING filename_p3, NI line_p4);
N_LIB_PRIVATE N_NOCONV(void, deallocShared)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___pkgZnicoZbackendsZcommon_u1110)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw** dest_p0, tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* src_p1);
N_LIB_PRIVATE N_NIMCALL(void, loadDefaultFont__pkgZnico_u5015)(NI index_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___pkgZnicoZbackendsZcommon_u3789)(tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg** dest_p0, tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* src_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg*, createFontFromSurface__pkgZnico_u4413)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* surface_p0, NimStringV2 chars_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg*, new__pkgZnico_u4417)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___pureZtimes_u2604)(tySequence__6H5Oh5UUvVCLiakt9aTwtUQ* dest_p0, tySequence__6H5Oh5UUvVCLiakt9aTwtUQ src_p1);
N_LIB_PRIVATE N_NIMCALL(tySequence__6H5Oh5UUvVCLiakt9aTwtUQ, newSeq__pkgZnicoZbackendsZcommon_u1280)(NI len_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, eqeq___pkgZnico_u4457)(tyTuple__Xo4YhcsfLAmbGDNu1Obfcw x_p0, tyTuple__Xo4YhcsfLAmbGDNu1Obfcw y_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___pkgZnico_u4514)(tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw* dest_p0, tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw src_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw, initTable__pkgZnico_u4484)(NI initialSize_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pkgZnico_u4505)(tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw* dest_p0);
static N_INLINE(NI, runeLen__pureZunicode_u7427)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(NI, nucruneLen)(NIM_CHAR* s_p0, NI s_p0Len_0);
N_LIB_PRIVATE N_NIMCALL(void, echoBinSafe)(NimStringV2* args_p0, NI args_p0Len_0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, hasKey__pkgZnico_u4787)(tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw t_p0, NI32 key_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___pureZunicode_u663)(NI32 rune_p0);
N_LIB_PRIVATE N_NIMCALL(void, consumeCharacter__pkgZnico_u3019)(tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* font_p0, NI* posX_p1, NI* posY_p2, NI index_p3, NI32 charId_p4);
N_LIB_PRIVATE N_NIMCALL(void, X5BX5Deq___pkgZnico_u3092)(tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw* t_p0, NI32 key_p1, tyTuple__FtZxsWeKlOo83uVL9c4OOmg val_p2);
N_LIB_PRIVATE N_NIMCALL(NI, len__pkgZnico_u4851)(tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw t_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___pkgZnicoZbackendsZcommon_u3777)(tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg** dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pkgZnicoZbackendsZcommon_u3780)(tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, setFont__pkgZnico_u18)(NI fontId_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___pkgZnicoZbackendsZcommon_u3783)(tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg** dest_p0, tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* src_p1);
N_LIB_PRIVATE N_NIMCALL(void, createWindow__pkgZnicoZbackendsZsdl2_u302)(NimStringV2 title_p0, NI w_p1, NI h_p2, NI scale_p3, NIM_BOOL fullscreen_p4);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u4051)(tyProc__HzVCwACFYM9cx9aV62PdjtuA* dest_p0, tyProc__HzVCwACFYM9cx9aV62PdjtuA src_p1, NIM_BOOL cyclic_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___pkgZnicoZbackendsZcommon_u3378)(tyProc__y9aUXu4JGz72YDIZVWUrK5w* dest_p0, tyProc__y9aUXu4JGz72YDIZVWUrK5w src_p1, NIM_BOOL cyclic_p2);
N_LIB_PRIVATE N_NIMCALL(void, stopLastRun__pkgZnicoZbackendsZsdl2_u6659)(void);
N_LIB_PRIVATE N_NIMCALL(void, run__pkgZnicoZbackendsZsdl2_u6660)(void);
N_LIB_PRIVATE N_NIMCALL(void, rttiDestroy__pkgZnico_u7430)(void* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pkgZnico_u7379)(tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosjoinPath)(NimStringV2 head_p0, NimStringV2 tail_p1);
static N_INLINE(void, eqdestroy___system_u281)(NimStringV2 x_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___system_u2696)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, readFile__pkgZnicoZbackendsZsdl2_u312)(NimStringV2 filename_p0);
static N_INLINE(NIM_BOOL, isObjDisplayCheck)(TNimTypeV2* source_p0, NI16 targetDepth_p1, NU32 token_p2);
static N_INLINE(Exception*, nimBorrowCurrentException)(void);
static N_INLINE(Exception*, getCurrentException)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___stdZtypedthreads_u223)(Exception** dest_p0, Exception* src_p1, NIM_BOOL cyclic_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_u8936)(tyObject_IOError__YfyTxe9cThBYfr9aHkc9cltBw* dest_p0);
static N_INLINE(void, popCurrentException)(void);
N_LIB_PRIVATE N_NIMCALL(void, nsuRemoveSuffixCharSet)(NimStringV2* s_p0, tySet_tyChar__nmiMWKVIe46vacnhAFrQvw chars_p1);
N_LIB_PRIVATE N_NIMCALL(void, loadSurfaceFromPNGNoConvert__pkgZnicoZbackendsZsdl2_u632)(NimStringV2 filename_p0, tyProc__V9bGopLHKFo2FjArm25MFaw callback_p1);
N_LIB_PRIVATE N_CLOSURE(void, colonanonymous___pkgZnico_u5034)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* surface_p0, void* ClE_0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pkgZnico_u7407)(tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA* dest_p0);
static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicDyn)(void* p_p0);
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NOINLINE(void, rememberCycle__system_u3528)(NIM_BOOL isDestroyAction_p0, tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg* s_p1, TNimTypeV2* desc_p2);
N_LIB_PRIVATE N_NIMCALL(void, nimDestroyAndDispose)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, rttiDestroy__pkgZnico_u7496)(void* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pkgZnico_u7443)(tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u2690)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void, loadSurfaceFromPNG__pkgZnicoZbackendsZsdl2_u368)(NimStringV2 filename_p0, tyProc__V9bGopLHKFo2FjArm25MFaw callback_p1);
N_LIB_PRIVATE N_CLOSURE(void, colonanonymous___pkgZnico_u5990)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* surface_p0, void* ClE_0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pkgZnico_u7473)(tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, substr__system_u8826)(NimStringV2 s_p0, NI first_p1, NI last_p2);
static N_INLINE(NI, skip__pureZparseutils_u868)(NimStringV2 s_p0, NimStringV2 token_p1, NI start_p2);
static N_INLINE(NI, skip__pureZparseutils_u145)(NIM_CHAR* s_p0, NI s_p0Len_0, NIM_CHAR* token_p1, NI token_p1Len_0);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___system_u2687)(NimStringV2* dest_p0);
static N_INLINE(NI, skipWhitespace__pureZparseutils_u864)(NimStringV2 s_p0, NI start_p1);
static N_INLINE(NI, skipWhitespace__pureZparseutils_u130)(NIM_CHAR* s_p0, NI s_p0Len_0);
N_LIB_PRIVATE N_NIMCALL(NI, parseInt__pureZparseutils_u928)(NimStringV2 s_p0, NI* number_p1, NI start_p2);
N_LIB_PRIVATE N_NIMCALL(void, pal__pkgZnico_u86)(void);
N_LIB_PRIVATE N_NIMCALL(void, pald__pkgZnico_u87)(void);
N_LIB_PRIVATE N_NIMCALL(void, palt__pkgZnico_u91)(void);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, btn__pkgZnicoZcontroller_u326)(tyObject_NicoControllercolonObjectType___OpA7H9cHyiLWNuzgwH7k5ZQ* self_p0, tyEnum_NicoButton__DuWECYQZDfo5yecT9cSNFVw button_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, btnup__pkgZnicoZcontroller_u390)(tyObject_NicoControllercolonObjectType___OpA7H9cHyiLWNuzgwH7k5ZQ* self_p0, tyEnum_NicoButton__DuWECYQZDfo5yecT9cSNFVw button_p1);
static N_INLINE(void, pset__pkgZnico_u242)(NI32 x_p0, NI32 y_p1);
N_LIB_PRIVATE N_NIMCALL(void, pset__pkgZnico_u1569)(NI32 x_p0, NI32 y_p1, NI c_p2);
static N_INLINE(void, psetRaw__pkgZnico_u519)(NI32 x_p0, NI32 y_p1, NI c_p2);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, stencilTest__pkgZnico_u172)(NI x_p0, NI y_p1, NU8 nv_p2);
N_LIB_PRIVATE N_NIMCALL(NU8, get__pkgZnicoZbackendsZcommon_u827)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* s_p0, NI x_p1, NI y_p2);
static N_INLINE(NIM_BOOL, ditherPass__pkgZnico_u916)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(NI, floorMod__pkgZnicoZbackendsZsdl2_u817)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(void, set__pkgZnicoZbackendsZcommon_u783)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* s_p0, NI x_p1, NI y_p2, NU8 v_p3);
N_LIB_PRIVATE N_NIMCALL(void, add__pkgZnicoZbackendsZcommon_u797)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* s_p0, NI x_p1, NI y_p2, NU8 v_p3);
N_LIB_PRIVATE N_NIMCALL(void, subtract__pkgZnicoZbackendsZcommon_u802)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* s_p0, NI x_p1, NI y_p2, NU8 v_p3);
N_LIB_PRIVATE N_NIMCALL(void, blendMax__pkgZnicoZbackendsZcommon_u807)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* s_p0, NI x_p1, NI y_p2, NU8 v_p3);
N_LIB_PRIVATE N_NIMCALL(void, blendMin__pkgZnicoZbackendsZcommon_u817)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* s_p0, NI x_p1, NI y_p2, NU8 v_p3);
N_LIB_PRIVATE N_NIMCALL(NI32, textWidth__pkgZnico_u51)(NimStringV2 text_p0, NI32 scale_p1);
N_LIB_PRIVATE N_NIMCALL(tyTuple__FtZxsWeKlOo83uVL9c4OOmg*, X5BX5D___pkgZnico_u5153)(tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw* t_p0, NI32 key_p1);
N_LIB_PRIVATE N_NIMCALL(void, print__pkgZnico_u36)(NimStringV2 text_p0, NI32 x_p1, NI32 y_p2, NI32 scale_p3);
N_LIB_PRIVATE N_NIMCALL(NI32, fontHeight__pkgZnico_u5252)(void);
static N_INLINE(NI32, glyph__pkgZnico_u20)(NI32 c_p0, NI32 x_p1, NI32 y_p2, NI32 scale_p3);
N_LIB_PRIVATE N_NIMCALL(void, fontBlit__pkgZnico_u2486)(tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* font_p0, tyTuple__FtZxsWeKlOo83uVL9c4OOmg srcRect_p1, tyTuple__FtZxsWeKlOo83uVL9c4OOmg dstRect_p2, NI color_p3);
static N_INLINE(NI32, toPint__pkgZnicoZbackendsZcommon_u851)(NF32 x_p0);
static N_INLINE(void, pluseq___pkgZnicoZbackendsZsdl2_u5859)(NF32* x_p0, NF32 y_p1);
N_LIB_PRIVATE N_NIMCALL(void, reraiseException)(void);
static N_INLINE(tyTuple__FtZxsWeKlOo83uVL9c4OOmg, getSprRect__pkgZnico_u6053)(NI32 spr_p0, NI32 w_p1, NI32 h_p2);
N_LIB_PRIVATE N_NIMCALL(void, blitFastFlip__pkgZnico_u2766)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* src_p0, NI32 sx_p1, NI32 sy_p2, NI32 dx_p3, NI32 dy_p4, NI32 w_p5, NI32 h_p6, NIM_BOOL hflip_p7, NIM_BOOL vflip_p8);
static N_INLINE(void, blitFast__pkgZnico_u2620)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* src_p0, NI32 sx_p1, NI32 sy_p2, NI32 dx_p3, NI32 dy_p4, NI32 w_p5, NI32 h_p6);
N_LIB_PRIVATE N_NIMCALL(void, hline__pkgZnico_u305)(NI32 x0_p0, NI32 y_p1, NI32 x1_p2);
N_LIB_PRIVATE N_NIMCALL(void, vline__pkgZnico_u313)(NI32 x_p0, NI32 y0_p1, NI32 y1_p2);
N_LIB_PRIVATE N_NIMCALL(void, nimTestErrorFlag)(void);
extern TNimTypeV2 NTIv2__XEycrCsme5C8CVWAYEcdBQ_;
static const struct {
  NI cap; NIM_CHAR data[20+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_3 = { 20 | NIM_STRLIT_FLAG, "Invalid spritesheet " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_4 = {20, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_3};
static const struct {
  NI cap; NIM_CHAR data[23+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_5 = { 23 | NIM_STRLIT_FLAG, "No spritesheet loaded: " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_6 = {23, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_5};
static const struct {
  NI cap; NIM_CHAR data[13+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_8 = { 13 | NIM_STRLIT_FLAG, "loading font " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_9 = {13, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_8};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_10 = { 6 | NIM_STRLIT_FLAG, " with " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_11 = {6, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_10};
static const struct {
  NI cap; NIM_CHAR data[15+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_12 = { 15 | NIM_STRLIT_FLAG, " chars, width: " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_13 = {15, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_12};
static const struct {
  NI cap; NIM_CHAR data[28+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_14 = { 28 | NIM_STRLIT_FLAG, "font already has character: " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_15 = {28, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_14};
static const struct {
  NI cap; NIM_CHAR data[8+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_16 = { 8 | NIM_STRLIT_FLAG, " index: " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_17 = {8, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_16};
static const struct {
  NI cap; NIM_CHAR data[17+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_18 = { 17 | NIM_STRLIT_FLAG, "loaded font with " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_19 = {17, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_18};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_20 = { 1 | NIM_STRLIT_FLAG, "/" };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_21 = {1, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_20};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_22 = { 6 | NIM_STRLIT_FLAG, " chars" };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_23 = {6, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_22};
static const struct {
  NI cap; NIM_CHAR data[18+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_24 = { 18 | NIM_STRLIT_FLAG, "last loaded char: " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_25 = {18, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_24};
static const struct {
  NI cap; NIM_CHAR data[10+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_26 = { 10 | NIM_STRLIT_FLAG, " at index " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_27 = {10, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_26};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_28 = { 4 | NIM_STRLIT_FLAG, " x: " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_29 = {4, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_28};
static const struct {
  NI cap; NIM_CHAR data[46+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_30 = { 46 | NIM_STRLIT_FLAG, "didn\'t load all characters from font, loaded: " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_31 = {46, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_30};
static const struct {
  NI cap; NIM_CHAR data[28+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_32 = { 28 | NIM_STRLIT_FLAG, " bitmaps of specified chars " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_33 = {28, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_32};
static const struct {
  NI cap; NIM_CHAR data[94+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_34 = { 94 | NIM_STRLIT_FLAG, " !\"#$%&\'()*+,-./0123456789:;<=>\?@abcdefghijklmnopqrstuvwxyz[\\]^_`ABCDEFGHIJKLMNOPQRSTUVWXYZ{}~" };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_35 = {94, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_34};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_37 = { 3 | NIM_STRLIT_FLAG, "run" };
static const struct {
  NI cap; NIM_CHAR data[22+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_39 = { 22 | NIM_STRLIT_FLAG, "initFuncCalled = false" };
N_LIB_PRIVATE TNimTypeV2 NTIv2__xl0UDdFh4J9aEuQrXBxDesA_;
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_41 = { 4 | NIM_STRLIT_FLAG, ".dat" };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_42 = {4, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_41};
static const struct {
  NI cap; NIM_CHAR data[8+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_43 = { 8 | NIM_STRLIT_FLAG, "Missing " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_44 = {8, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_43};
static const struct {
  NI cap; NIM_CHAR data[42+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_45 = { 42 | NIM_STRLIT_FLAG, " needed if not passing chars to loadFont: " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_46 = {42, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_45};
static NIM_CONST tySet_tyChar__nmiMWKVIe46vacnhAFrQvw TM__9aNIpYgJ1ntUbwp32t1x9cQA_47 = {
0x00, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
N_LIB_PRIVATE TNimTypeV2 NTIv2__mlCB2x0QM8if5IEG9blV5iA_;
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_49 = {20, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_3};
static const struct {
  NI cap; NIM_CHAR data[20+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_50 = { 20 | NIM_STRLIT_FLAG, "loaded spritesheet: " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_51 = {20, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_50};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_52 = { 1 | NIM_STRLIT_FLAG, " " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_53 = {1, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_52};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_54 = { 1 | NIM_STRLIT_FLAG, "x" };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_55 = {1, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_54};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_56 = { 6 | NIM_STRLIT_FLAG, " tile:" };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_57 = {6, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_56};
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_58 = {1, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_54};
static const struct {
  NI cap; NIM_CHAR data[49+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_59 = { 49 | NIM_STRLIT_FLAG, "Spritesheet size must be divisible by tile size: " };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_60 = {49, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_59};
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_61 = {1, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_54};
static const struct {
  NI cap; NIM_CHAR data[12+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_62 = { 12 | NIM_STRLIT_FLAG, "GIMP Palette" };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_63 = {12, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_62};
static const struct {
  NI cap; NIM_CHAR data[16+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_64 = { 16 | NIM_STRLIT_FLAG, "No font selected" };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_65 = {16, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_64};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_66 = { 24 | NIM_STRLIT_FLAG, "character not in font: \'" };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_67 = {24, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_66};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__9aNIpYgJ1ntUbwp32t1x9cQA_68 = { 1 | NIM_STRLIT_FLAG, "\'" };
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_69 = {1, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_68};
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_70 = {16, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_64};
static const NimStringV2 TM__9aNIpYgJ1ntUbwp32t1x9cQA_71 = {16, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_64};
N_LIB_PRIVATE NIM_CONST tyArray__9agrCtWKhCnWWMJpKKugJag bayer4x4int__pkgZnico_u886 = {((NI)0),
((NI)8),
((NI)2),
((NI)10),
((NI)12),
((NI)4),
((NI)14),
((NI)6),
((NI)3),
((NI)11),
((NI)1),
((NI)9),
((NI)15),
((NI)7),
((NI)13),
((NI)5)}
;
static NIM_CONST tyTuple__FtZxsWeKlOo83uVL9c4OOmg TM__9aNIpYgJ1ntUbwp32t1x9cQA_7 = {((NI)0),
((NI)0),
((NI)0),
((NI)0)}
;
static NIM_CONST tyArray__nHXaesL0DJZHyVS07ARPRA TM__9aNIpYgJ1ntUbwp32t1x9cQA_36 = {{3, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_37}}
;
static NIM_CONST tyArray__nHXaesL0DJZHyVS07ARPRA TM__9aNIpYgJ1ntUbwp32t1x9cQA_38 = {{22, (NimStrPayload*)&TM__9aNIpYgJ1ntUbwp32t1x9cQA_39}}
;
extern NI clipMaxX__pkgZnicoZbackendsZcommon_u1059;
extern NI screenWidth__pkgZnicoZbackendsZcommon_u921;
extern NI clipMaxY__pkgZnicoZbackendsZcommon_u1061;
extern NI screenHeight__pkgZnicoZbackendsZcommon_u922;
N_LIB_PRIVATE NI ditherColor__pkgZnico_u872 = ((NI)-1);
N_LIB_PRIVATE tyArray__EH3vwk2gvJbf6WGsCM9baJQ bayer4x4__pkgZnico_u887;
N_LIB_PRIVATE NI i__pkgZnico_u892;
N_LIB_PRIVATE NU8 mapFilterFlags__pkgZnico_u6258 = ((NU8)0);
extern tySequence__friFxHbsLN0MVvin0IyEFg controllers__pkgZnicoZbackendsZcommon_u996;
extern NIM_THREADVAR NIM_BOOL nimInErrorMode__system_u4433;
extern tySequence__pcXSChh0J6OCdCDPpBK9b1g resizeFuncs__pkgZnicoZbackendsZcommon_u1039;
extern NI clipMinX__pkgZnicoZbackendsZcommon_u1058;
extern NI clipMinY__pkgZnicoZbackendsZcommon_u1060;
extern tyTuple__FtZxsWeKlOo83uVL9c4OOmg clippingRect__pkgZnicoZbackendsZcommon_u1062;
extern tyTuple__npOdd6OOX5uthJz7z22r9ag currentPalette__pkgZnicoZbackendsZcommon_u861;
extern NIM_BOOL initialized__pkgZnicoZbackendsZcommon_u873;
extern tyArray__WGdFp1x1TRhEll6Qsgf9cLQ spritesheets__pkgZnicoZbackendsZcommon_u1024;
extern tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* spritesheet__pkgZnicoZbackendsZcommon_u1025;
extern tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* currentFont__pkgZnicoZbackendsZcommon_u1041;
extern tyArray__r4BvwNWZwrhBzTdqZDVtfw fonts__pkgZnicoZbackendsZcommon_u1040;
extern tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* defaultFontSurface__pkgZnicoZfontdata_u6;
extern NI currentFontId__pkgZnicoZbackendsZcommon_u1042;
extern tyProc__HzVCwACFYM9cx9aV62PdjtuA initFunc__pkgZnicoZbackendsZcommon_u1029;
extern NIM_BOOL initFuncCalled__pkgZnicoZbackendsZcommon_u1030;
extern tyProc__y9aUXu4JGz72YDIZVWUrK5w updateFunc__pkgZnicoZbackendsZcommon_u1033;
extern tyProc__HzVCwACFYM9cx9aV62PdjtuA drawFunc__pkgZnicoZbackendsZcommon_u1035;
extern NIM_BOOL running__pkgZnicoZbackendsZcommon_u874;
static NIM_CONST NU32 TM__9aNIpYgJ1ntUbwp32t1x9cQA_40[2] = {3701606400, 1561595136};
N_LIB_PRIVATE TNimTypeV2 NTIv2__xl0UDdFh4J9aEuQrXBxDesA_ = {.destructor = (void*)rttiDestroy__pkgZnico_u7430, .size = sizeof(tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA), .align = (NI16) NIM_ALIGNOF(tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA), .depth = 1, .display = TM__9aNIpYgJ1ntUbwp32t1x9cQA_40, .traceImpl = (void*)NIM_NIL, .flags = 0};
extern NimStringV2 assetPath__pkgZnicoZbackendsZcommon_u1021;
extern NIM_THREADVAR Exception* currException__system_u4140;
static NIM_CONST NU32 TM__9aNIpYgJ1ntUbwp32t1x9cQA_48[2] = {3701606400, 1350687488};
N_LIB_PRIVATE TNimTypeV2 NTIv2__mlCB2x0QM8if5IEG9blV5iA_ = {.destructor = (void*)rttiDestroy__pkgZnico_u7496, .size = sizeof(tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA), .align = (NI16) NIM_ALIGNOF(tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA), .depth = 1, .display = TM__9aNIpYgJ1ntUbwp32t1x9cQA_48, .traceImpl = (void*)NIM_NIL, .flags = 0};
extern tyArray__AM6k89cr9c1T2mNMufYfM0Rg paletteMapDraw__pkgZnicoZbackendsZcommon_u1046;
extern tyArray__AM6k89cr9c1T2mNMufYfM0Rg paletteMapDisplay__pkgZnicoZbackendsZcommon_u1047;
extern tyArray__JLIwlu3xtaWK9coqUZvph4Q paletteTransparent__pkgZnicoZbackendsZcommon_u1048;
extern tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* swCanvas__pkgZnicoZbackendsZcommon_u888;
extern NI currentColor__pkgZnicoZbackendsZcommon_u1054;
extern NI32 cameraX__pkgZnicoZbackendsZcommon_u1044;
extern tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww stencilMode__pkgZnicoZbackendsZcommon_u911;
extern tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* stencilBuffer__pkgZnicoZbackendsZcommon_u889;
extern NU8 stencilRef__pkgZnicoZbackendsZcommon_u915;
extern NIM_BOOL stencilOnly__pkgZnicoZbackendsZcommon_u914;
extern tyEnum_DitherMode__qddd9bcPRohUdqi2yBml8IQ gDitherMode__pkgZnicoZbackendsZcommon_u1010;
extern NI gDitherOffsetX__pkgZnicoZbackendsZcommon_u1015;
extern NI gDitherOffsetY__pkgZnicoZbackendsZcommon_u1016;
extern NU16 gDitherPattern__pkgZnicoZbackendsZcommon_u1009;
extern NF32 gDitherADitherInput__pkgZnicoZbackendsZcommon_u1014;
extern NI gDitherADitherA__pkgZnicoZbackendsZcommon_u1011;
extern NI gDitherADitherB__pkgZnicoZbackendsZcommon_u1012;
extern NI gDitherADitherC__pkgZnicoZbackendsZcommon_u1013;
extern NIM_BOOL stencilWrite__pkgZnicoZbackendsZcommon_u912;
extern tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ stencilBlend__pkgZnicoZbackendsZcommon_u916;
extern NIM_BOOL stencilWriteFail__pkgZnicoZbackendsZcommon_u913;
extern NI32 cameraY__pkgZnicoZbackendsZcommon_u1045;
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (&nimInErrorMode__system_u4433);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_u7(p_p0, ((int)0), size_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, addResizeFunc__pkgZnico_u5744)(tyProc__yZbvgbtLeGIhzIA9bifjdPw newResizeFunc_p0) {
	tyProc__yZbvgbtLeGIhzIA9bifjdPw colontmpD_;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyProc__yZbvgbtLeGIhzIA9bifjdPw));
	eqdup___pkgZnicoZbackendsZcommon_u3513(newResizeFunc_p0, NIM_TRUE, (&colontmpD_));
	add__pkgZnico_u5746((&resizeFuncs__pkgZnicoZbackendsZcommon_u1039), colontmpD_);
}
N_LIB_PRIVATE N_NIMCALL(void, clip__pkgZnico_u124)(void) {
	clipMinX__pkgZnicoZbackendsZcommon_u1058 = ((NI)0);
	clipMaxX__pkgZnicoZbackendsZcommon_u1059 = (NI)(screenWidth__pkgZnicoZbackendsZcommon_u921 - ((NI)1));
	clipMinY__pkgZnicoZbackendsZcommon_u1060 = ((NI)0);
	clipMaxY__pkgZnicoZbackendsZcommon_u1061 = (NI)(screenHeight__pkgZnicoZbackendsZcommon_u922 - ((NI)1));
	clippingRect__pkgZnicoZbackendsZcommon_u1062.Field0 = ((NI)0);
	clippingRect__pkgZnicoZbackendsZcommon_u1062.Field1 = ((NI)0);
	clippingRect__pkgZnicoZbackendsZcommon_u1062.Field2 = screenWidth__pkgZnicoZbackendsZcommon_u921;
	clippingRect__pkgZnicoZbackendsZcommon_u1062.Field3 = screenHeight__pkgZnicoZbackendsZcommon_u922;
}
N_LIB_PRIVATE N_NIMCALL(void, colonanonymous___pkgZnico_u6982)(NI w_p0, NI y_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	clip__pkgZnico_u124();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, setPalette__pkgZnico_u824)(tyTuple__npOdd6OOX5uthJz7z22r9ag* p_p0) {
	currentPalette__pkgZnicoZbackendsZcommon_u861 = (*p_p0);
}
N_LIB_PRIVATE N_NIMCALL(void, loadPalettePico8__pkgZnico_u69)(tyTuple__npOdd6OOX5uthJz7z22r9ag* Result) {
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T1_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T2_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T3_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T4_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T5_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T6_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T7_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T8_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T9_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T10_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T11_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T12_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T13_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T14_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T15_;
	tyTuple__hSHiEU6uEtL7soi1F4tKCg T16_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyTuple__npOdd6OOX5uthJz7z22r9ag));
	nimZeroMem((void*)(&T1_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T1_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)0), ((NI32)0), ((NI32)0));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)0))- 0] = T1_;
	nimZeroMem((void*)(&T2_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T2_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)29), ((NI32)43), ((NI32)83));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)1))- 0] = T2_;
	nimZeroMem((void*)(&T3_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T3_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)126), ((NI32)37), ((NI32)83));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)2))- 0] = T3_;
	nimZeroMem((void*)(&T4_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T4_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)0), ((NI32)135), ((NI32)81));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)3))- 0] = T4_;
	nimZeroMem((void*)(&T5_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T5_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)171), ((NI32)82), ((NI32)54));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)4))- 0] = T5_;
	nimZeroMem((void*)(&T6_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T6_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)95), ((NI32)87), ((NI32)79));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)5))- 0] = T6_;
	nimZeroMem((void*)(&T7_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T7_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)194), ((NI32)195), ((NI32)199));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)6))- 0] = T7_;
	nimZeroMem((void*)(&T8_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T8_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)255), ((NI32)241), ((NI32)232));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)7))- 0] = T8_;
	nimZeroMem((void*)(&T9_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T9_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)255), ((NI32)0), ((NI32)77));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)8))- 0] = T9_;
	nimZeroMem((void*)(&T10_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T10_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)255), ((NI32)163), ((NI32)0));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)9))- 0] = T10_;
	nimZeroMem((void*)(&T11_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T11_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)255), ((NI32)240), ((NI32)36));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)10))- 0] = T11_;
	nimZeroMem((void*)(&T12_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T12_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)0), ((NI32)231), ((NI32)86));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)11))- 0] = T12_;
	nimZeroMem((void*)(&T13_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T13_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)41), ((NI32)173), ((NI32)255));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)12))- 0] = T13_;
	nimZeroMem((void*)(&T14_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T14_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)131), ((NI32)118), ((NI32)156));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)13))- 0] = T14_;
	nimZeroMem((void*)(&T15_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T15_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)255), ((NI32)119), ((NI32)168));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)14))- 0] = T15_;
	nimZeroMem((void*)(&T16_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
	T16_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32)255), ((NI32)204), ((NI32)170));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).Field1[(((NI)15))- 0] = T16_;
	(*Result).Field0 = ((NI)16);
	}BeforeRet_: ;
}
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest_p0, source_p1, ((size_t) (size_p2)));
}
static N_INLINE(void, copyMem__system_u1731)(void* dest_p0, void* source_p1, NI size_p2) {
	nimCopyMem(dest_p0, source_p1, size_p2);
}
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1) {
	{
		if (!(((NI)0) < src_p1.len)) goto LA3_;
		copyMem__system_u1731(((void*) ((&(*(*dest_p0).p).data[(*dest_p0).len]))), ((void*) ((&(*src_p1.p).data[((NI)0)]))), ((NI)(src_p1.len + ((NI)1))));
		(*dest_p0).len += src_p1.len;
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, setSpritesheet__pkgZnico_u5875)(NI index_p0) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		NimStringV2 colontmpD_;
		Exception* T8_;
		NimStringV2 T9_;
		T3_ = (NIM_BOOL)0;
		T3_ = (index_p0 < ((NI)0));
		if (T3_) goto LA4_;
		T3_ = (((NI)16) <= index_p0);
LA4_: ;
		if (!T3_) goto LA5_;
		colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
		T8_ = NIM_NIL;
		T8_ = (Exception*) nimNewObj(sizeof(Exception), NIM_ALIGNOF(Exception));
		(*T8_).Sup.m_type = (&NTIv2__XEycrCsme5C8CVWAYEcdBQ_);
		(*T8_).name = "Exception";
		T9_.len = 0; T9_.p = NIM_NIL;
		colontmpD_ = dollar___systemZdollars_u8(index_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
		T9_ = rawNewString(colontmpD_.len + 20);
appendString((&T9_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_4);
appendString((&T9_), colontmpD_);
		(*T8_).message = T9_;
		(*T8_).parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T8_, "Exception", "setSpritesheet", "nico.nim", 2498);
goto LA7_;
		{
			LA7_:;
		}
		{
			if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA5_: ;
	{
		NimStringV2 colontmpD__2;
		Exception* T17_;
		NimStringV2 T18_;
		if (!(spritesheets__pkgZnicoZbackendsZcommon_u1024[(index_p0)- 0] == ((tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw*) NIM_NIL))) goto LA14_;
		colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
		T17_ = NIM_NIL;
		T17_ = (Exception*) nimNewObj(sizeof(Exception), NIM_ALIGNOF(Exception));
		(*T17_).Sup.m_type = (&NTIv2__XEycrCsme5C8CVWAYEcdBQ_);
		(*T17_).name = "Exception";
		T18_.len = 0; T18_.p = NIM_NIL;
		colontmpD__2 = dollar___systemZdollars_u8(index_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto LA16_;
		T18_ = rawNewString(colontmpD__2.len + 23);
appendString((&T18_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_6);
appendString((&T18_), colontmpD__2);
		(*T17_).message = T18_;
		(*T17_).parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T17_, "Exception", "setSpritesheet", "nico.nim", 2501);
goto LA16_;
		{
			LA16_:;
		}
		{
			if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA14_: ;
	eqcopy___pkgZnicoZbackendsZcommon_u1110(&spritesheet__pkgZnicoZbackendsZcommon_u1025, spritesheets__pkgZnicoZbackendsZcommon_u1024[(index_p0)- 0]);
	}BeforeRet_: ;
}
static N_INLINE(NI, runeLen__pureZunicode_u7427)(NimStringV2 s_p0) {
	NI result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	result = nucruneLen((((s_p0).p) ? ((NIM_CHAR*)s_p0.p->data+(((NI)0))) : NIM_NIL), ((s_p0.len-1))-(((NI)0))+1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, consumeCharacter__pkgZnico_u3019)(tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* font_p0, NI* posX_p1, NI* posY_p2, NI index_p3, NI32 charId_p4) {
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg rect;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	rect.Field0 = (*posX_p1);
	rect.Field1 = (*posY_p2);
	rect.Field2 = ((NI)0);
	rect.Field3 = ((NI)0);
	{
		while (1) {
			if (!((*font_p0).data.p->data[(NI)((NI)(rect.Field1 * (*font_p0).w) + rect.Field0)] == ((NU8)2))) goto LA2;
			rect.Field0 += ((NI)1);
		} LA2: ;
	}
	{
		NI y;
		NI i;
		y = (NI)0;
		i = (*posY_p2);
		{
			while (1) {
				if (!(i < (*font_p0).h)) goto LA5;
				y = i;
				{
					if (!((*font_p0).data.p->data[(NI)((NI)(y * (*font_p0).w) + rect.Field0)] == ((NU8)2))) goto LA8_;
					goto LA3;
				}
LA8_: ;
				rect.Field3 += ((NI)1);
				i += ((NI)1);
			} LA5: ;
		}
	} LA3: ;
	{
		NI x;
		NI i_2;
		x = (NI)0;
		i_2 = rect.Field0;
		{
			while (1) {
				if (!(i_2 < (*font_p0).w)) goto LA12;
				x = i_2;
				{
					if (!((*font_p0).data.p->data[(NI)((NI)((*posY_p2) * (*font_p0).w) + x)] == ((NU8)2))) goto LA15_;
					goto LA10;
				}
LA15_: ;
				rect.Field2 += ((NI)1);
				i_2 += ((NI)1);
			} LA12: ;
		}
	} LA10: ;
	X5BX5Deq___pkgZnico_u3092((&(*font_p0).rects), charId_p4, rect);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*posX_p1) = (NI)((NI)(rect.Field0 + rect.Field2) + ((NI)1));
	(*posY_p2) = rect.Field1;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg*, createFontFromSurface__pkgZnico_u4413)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* surface_p0, NimStringV2 chars_p1) {
	tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* result;
	tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* font;
	NimStringV2 colontmpD_;
	NimStringV2 colontmpD__2;
	NimStringV2 colontmpD__3;
	NimStringV2 colontmpD__4;
	tySequence__6H5Oh5UUvVCLiakt9aTwtUQ T2_;
	NU8 borderColor;
	NU8 solidColor;
	NU8 transparentColor;
	tyObject_Table__9aIvEwU2Cxa1n9bdzP2lXknw T25_;
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg currentRect;
	NI i_5;
	NI charPos;
	NI lastChar;
	tyArray__yt5VDPNtUGx9cBkOVakHwdQ T26_;
	NI T27_;
	NI posX;
	NI posY;
	NI32 charId;
	tyArray__haiLFy0nBviVTKFGuwztzQ T89_;
	NI T90_;
	NI T91_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	font = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
	colontmpD__3.len = 0; colontmpD__3.p = NIM_NIL;
	colontmpD__4.len = 0; colontmpD__4.p = NIM_NIL;
	font = new__pkgZnico_u4417();
	(*font).w = (*surface_p0).w;
	(*font).h = (*surface_p0).h;
	T2_.len = 0; T2_.p = NIM_NIL;
	T2_ = newSeq__pkgZnicoZbackendsZcommon_u1280(((NI)((*font).w * (*font).h)));
	eqsink___pureZtimes_u2604((&(*font).data), T2_);
	borderColor = ((NU8)2);
	solidColor = ((NU8)1);
	transparentColor = ((NU8)0);
	{
		tyTuple__Xo4YhcsfLAmbGDNu1Obfcw borderColorRGBA;
		if (!((*surface_p0).channels == ((NI)4))) goto LA5_;
		borderColorRGBA.Field0 = (*surface_p0).data.p->data[((NI)0)];
		borderColorRGBA.Field1 = (*surface_p0).data.p->data[((NI)1)];
		borderColorRGBA.Field2 = (*surface_p0).data.p->data[((NI)2)];
		borderColorRGBA.Field3 = (*surface_p0).data.p->data[((NI)3)];
		{
			NI i;
			NI colontmp_;
			NI i_2;
			i = (NI)0;
			colontmp_ = (NI)0;
			colontmp_ = (NI)((*font).w * (*font).h);
			i_2 = ((NI)0);
			{
				while (1) {
					tyTuple__Xo4YhcsfLAmbGDNu1Obfcw col;
					if (!(i_2 < colontmp_)) goto LA9;
					i = i_2;
					col.Field0 = (*surface_p0).data.p->data[(NI)((NI)(i * (*surface_p0).channels) + ((NI)0))];
					col.Field1 = (*surface_p0).data.p->data[(NI)((NI)(i * (*surface_p0).channels) + ((NI)1))];
					col.Field2 = (*surface_p0).data.p->data[(NI)((NI)(i * (*surface_p0).channels) + ((NI)2))];
					col.Field3 = (*surface_p0).data.p->data[(NI)((NI)(i * (*surface_p0).channels) + ((NI)3))];
					{
						NIM_BOOL T12_;
						T12_ = (NIM_BOOL)0;
						T12_ = eqeq___pkgZnico_u4457(col, borderColorRGBA);
						if (!T12_) goto LA13_;
						(*font).data.p->data[i] = borderColor;
					}
					goto LA10_;
LA13_: ;
					{
						if (!(col.Field3 == ((NU8)0))) goto LA16_;
						(*font).data.p->data[i] = transparentColor;
					}
					goto LA10_;
LA16_: ;
					{
						(*font).data.p->data[i] = solidColor;
					}
LA10_: ;
					i_2 += ((NI)1);
				} LA9: ;
			}
		}
	}
	goto LA3_;
LA5_: ;
	{
		if (!((*surface_p0).channels == ((NI)1))) goto LA20_;
		{
			NI i_3;
			NI colontmp__2;
			NI i_4;
			i_3 = (NI)0;
			colontmp__2 = (NI)0;
			colontmp__2 = (NI)((*font).w * (*font).h);
			i_4 = ((NI)0);
			{
				while (1) {
					if (!(i_4 < colontmp__2)) goto LA24;
					i_3 = i_4;
					(*font).data.p->data[i_3] = (*surface_p0).data.p->data[i_3];
					i_4 += ((NI)1);
				} LA24: ;
			}
		}
	}
	goto LA3_;
LA20_: ;
LA3_: ;
	T25_ = initTable__pkgZnico_u4484(((NI)128));
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___pkgZnico_u4505(&T25_); goto LA1_;}
	eqsink___pkgZnico_u4514((&(*font).rects), T25_);
	currentRect = TM__9aNIpYgJ1ntUbwp32t1x9cQA_7;
	i_5 = ((NI)0);
	charPos = ((NI)0);
	lastChar = ((NI)-1);
	T26_[0] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_9;
	T26_[1] = (*surface_p0).filename;
	T26_[2] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_11;
	T27_ = (NI)0;
	T27_ = runeLen__pureZunicode_u7427(chars_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	colontmpD_ = dollar___systemZdollars_u8(T27_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T26_[3] = colontmpD_;
	T26_[4] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_13;
	colontmpD__2 = dollar___systemZdollars_u8((*font).w);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T26_[5] = colontmpD__2;
	echoBinSafe(T26_, 6);
	posX = (NI)0;
	posY = (NI)0;
	charId = (NI32)0;
	{
		while (1) {
			if (!(charPos < chars_p1.len)) goto LA29;
			{
				if (!((NU32)(((NU) (((NU8)(chars_p1.p->data[charPos]))))) <= (NU32)(((NU)127)))) goto LA32_;
				charId = ((NI32) (((NU) (((NU8)(chars_p1.p->data[charPos]))))));
				charPos += ((NI)1);
			}
			goto LA30_;
LA32_: ;
			{
				if (!((NU)((NU32)(((NU) (((NU8)(chars_p1.p->data[charPos]))))) >> (NU32)(((NI)5))) == ((NU)6))) goto LA35_;
				{
					if (!(charPos <= (NI)(chars_p1.len - ((NI)2)))) goto LA39_;
					charId = ((NI32) ((NU)((NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[charPos])))) & ((NU)31))) << (NU32)(((NI)6))) | (NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)1))])))) & ((NU)63)))));
					charPos += ((NI)2);
				}
				goto LA37_;
LA39_: ;
				{
					charId = ((NI32)65533);
					charPos += ((NI)1);
				}
LA37_: ;
			}
			goto LA30_;
LA35_: ;
			{
				if (!((NU)((NU32)(((NU) (((NU8)(chars_p1.p->data[charPos]))))) >> (NU32)(((NI)4))) == ((NU)14))) goto LA43_;
				{
					if (!(charPos <= (NI)(chars_p1.len - ((NI)3)))) goto LA47_;
					charId = ((NI32) ((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[charPos])))) & ((NU)15))) << (NU32)(((NI)12))) | (NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)2))])))) & ((NU)63)))));
					charPos += ((NI)3);
				}
				goto LA45_;
LA47_: ;
				{
					charId = ((NI32)65533);
					charPos += ((NI)1);
				}
LA45_: ;
			}
			goto LA30_;
LA43_: ;
			{
				if (!((NU)((NU32)(((NU) (((NU8)(chars_p1.p->data[charPos]))))) >> (NU32)(((NI)3))) == ((NU)30))) goto LA51_;
				{
					if (!(charPos <= (NI)(chars_p1.len - ((NI)4)))) goto LA55_;
					charId = ((NI32) ((NU)((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[charPos])))) & ((NU)7))) << (NU32)(((NI)18))) | (NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)12)))) | (NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)2))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)3))])))) & ((NU)63)))));
					charPos += ((NI)4);
				}
				goto LA53_;
LA55_: ;
				{
					charId = ((NI32)65533);
					charPos += ((NI)1);
				}
LA53_: ;
			}
			goto LA30_;
LA51_: ;
			{
				if (!((NU)((NU32)(((NU) (((NU8)(chars_p1.p->data[charPos]))))) >> (NU32)(((NI)2))) == ((NU)62))) goto LA59_;
				{
					if (!(charPos <= (NI)(chars_p1.len - ((NI)5)))) goto LA63_;
					charId = ((NI32) ((NU)((NU)((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[charPos])))) & ((NU)3))) << (NU32)(((NI)24))) | (NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)18)))) | (NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)2))])))) & ((NU)63))) << (NU32)(((NI)12)))) | (NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)3))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)4))])))) & ((NU)63)))));
					charPos += ((NI)5);
				}
				goto LA61_;
LA63_: ;
				{
					charId = ((NI32)65533);
					charPos += ((NI)1);
				}
LA61_: ;
			}
			goto LA30_;
LA59_: ;
			{
				if (!((NU)((NU32)(((NU) (((NU8)(chars_p1.p->data[charPos]))))) >> (NU32)(((NI)1))) == ((NU)126))) goto LA67_;
				{
					if (!(charPos <= (NI)(chars_p1.len - ((NI)6)))) goto LA71_;
					charId = ((NI32) ((NU)((NU)((NU)((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[charPos])))) & ((NU)1))) << (NU32)(((NI)30))) | (NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)24)))) | (NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)2))])))) & ((NU)63))) << (NU32)(((NI)18)))) | (NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)3))])))) & ((NU)63))) << (NU32)(((NI)12)))) | (NU)((NU32)((NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)4))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(chars_p1.p->data[(NI)(charPos + ((NI)5))])))) & ((NU)63)))));
					charPos += ((NI)6);
				}
				goto LA69_;
LA71_: ;
				{
					charId = ((NI32)65533);
					charPos += ((NI)1);
				}
LA69_: ;
			}
			goto LA30_;
LA67_: ;
			{
				charId = ((NI32) (((NU) (((NU8)(chars_p1.p->data[charPos]))))));
				charPos += ((NI)1);
			}
LA30_: ;
			{
				NIM_BOOL T77_;
				NimStringV2 colontmpD__5;
				NimStringV2 colontmpD__6;
				Exception* T81_;
				NimStringV2 T82_;
				T77_ = (NIM_BOOL)0;
				T77_ = hasKey__pkgZnico_u4787((*font).rects, charId);
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				if (!T77_) goto LA78_;
				colontmpD__5.len = 0; colontmpD__5.p = NIM_NIL;
				colontmpD__6.len = 0; colontmpD__6.p = NIM_NIL;
				T81_ = NIM_NIL;
				T81_ = (Exception*) nimNewObj(sizeof(Exception), NIM_ALIGNOF(Exception));
				(*T81_).Sup.m_type = (&NTIv2__XEycrCsme5C8CVWAYEcdBQ_);
				(*T81_).name = "Exception";
				T82_.len = 0; T82_.p = NIM_NIL;
				colontmpD__5 = dollar___pureZunicode_u663(charId);
				if (NIM_UNLIKELY(*nimErr_)) goto LA80_;
				colontmpD__6 = dollar___systemZdollars_u8(i_5);
				if (NIM_UNLIKELY(*nimErr_)) goto LA80_;
				T82_ = rawNewString(colontmpD__5.len + colontmpD__6.len + 36);
appendString((&T82_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_15);
appendString((&T82_), colontmpD__5);
appendString((&T82_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_17);
appendString((&T82_), colontmpD__6);
				(*T81_).message = T82_;
				(*T81_).parent = ((Exception*) NIM_NIL);
				raiseExceptionEx((Exception*)T81_, "Exception", "createFontFromSurface", "nico.nim", 2228);
goto LA80_;
				{
					LA80_:;
				}
				{
					if (colontmpD__6.p && !(colontmpD__6.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__6.p);
}
					if (colontmpD__5.p && !(colontmpD__5.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__5.p);
}
				}
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			}
LA78_: ;
			consumeCharacter__pkgZnico_u3019(font, (&posX), (&posY), i_5, charId);
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			{
				if (!((*font).w <= posX)) goto LA87_;
				goto LA28;
			}
LA87_: ;
			i_5 += ((NI)1);
		} LA29: ;
	} LA28: ;
	T89_[0] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_19;
	T90_ = (NI)0;
	T90_ = len__pkgZnico_u4851((*font).rects);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	colontmpD__3 = dollar___systemZdollars_u8(T90_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T89_[1] = colontmpD__3;
	T89_[2] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_21;
	T91_ = (NI)0;
	T91_ = runeLen__pureZunicode_u7427(chars_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	colontmpD__4 = dollar___systemZdollars_u8(T91_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T89_[3] = colontmpD__4;
	T89_[4] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_23;
	echoBinSafe(T89_, 5);
	{
		NI T94_;
		NI T95_;
		NimStringV2 colontmpD__7;
		NimStringV2 colontmpD__8;
		Exception* T107_;
		NimStringV2 T108_;
		NI T109_;
		NI T110_;
		T94_ = (NI)0;
		T94_ = len__pkgZnico_u4851((*font).rects);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		T95_ = (NI)0;
		T95_ = runeLen__pureZunicode_u7427(chars_p1);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!!((T94_ == T95_))) goto LA96_;
		colontmpD__7.len = 0; colontmpD__7.p = NIM_NIL;
		colontmpD__8.len = 0; colontmpD__8.p = NIM_NIL;
		{
			NimStringV2 colontmpD__9;
			NimStringV2 colontmpD__10;
			NimStringV2 colontmpD__11;
			tyArray__yt5VDPNtUGx9cBkOVakHwdQ T104_;
			if (!!((lastChar == ((NI)-1)))) goto LA101_;
			colontmpD__9.len = 0; colontmpD__9.p = NIM_NIL;
			colontmpD__10.len = 0; colontmpD__10.p = NIM_NIL;
			colontmpD__11.len = 0; colontmpD__11.p = NIM_NIL;
			T104_[0] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_25;
			colontmpD__9 = dollar___pureZunicode_u663(((NI32) (lastChar)));
			if (NIM_UNLIKELY(*nimErr_)) goto LA103_;
			T104_[1] = colontmpD__9;
			T104_[2] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_27;
			colontmpD__10 = dollar___systemZdollars_u8(i_5);
			if (NIM_UNLIKELY(*nimErr_)) goto LA103_;
			T104_[3] = colontmpD__10;
			T104_[4] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_29;
			colontmpD__11 = dollar___systemZdollars_u8(currentRect.Field0);
			if (NIM_UNLIKELY(*nimErr_)) goto LA103_;
			T104_[5] = colontmpD__11;
			echoBinSafe(T104_, 6);
			{
				LA103_:;
			}
			{
				if (colontmpD__11.p && !(colontmpD__11.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__11.p);
}
				if (colontmpD__10.p && !(colontmpD__10.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__10.p);
}
				if (colontmpD__9.p && !(colontmpD__9.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__9.p);
}
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA98_;
		}
LA101_: ;
		T107_ = NIM_NIL;
		T107_ = (Exception*) nimNewObj(sizeof(Exception), NIM_ALIGNOF(Exception));
		(*T107_).Sup.m_type = (&NTIv2__XEycrCsme5C8CVWAYEcdBQ_);
		(*T107_).name = "Exception";
		T108_.len = 0; T108_.p = NIM_NIL;
		T109_ = (NI)0;
		T109_ = len__pkgZnico_u4851((*font).rects);
		if (NIM_UNLIKELY(*nimErr_)) goto LA98_;
		colontmpD__7 = dollar___systemZdollars_u8(T109_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA98_;
		T110_ = (NI)0;
		T110_ = runeLen__pureZunicode_u7427(chars_p1);
		if (NIM_UNLIKELY(*nimErr_)) goto LA98_;
		colontmpD__8 = dollar___systemZdollars_u8(T110_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA98_;
		T108_ = rawNewString(colontmpD__7.len + colontmpD__8.len + 74);
appendString((&T108_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_31);
appendString((&T108_), colontmpD__7);
appendString((&T108_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_33);
appendString((&T108_), colontmpD__8);
		(*T107_).message = T108_;
		(*T107_).parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T107_, "Exception", "createFontFromSurface", "nico.nim", 2239);
goto LA98_;
		{
			LA98_:;
		}
		{
			if (colontmpD__8.p && !(colontmpD__8.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__8.p);
}
			if (colontmpD__7.p && !(colontmpD__7.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__7.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA96_: ;
	result = font;
	eqwasMoved___pkgZnicoZbackendsZcommon_u3777(&font);
	if (colontmpD__4.p && !(colontmpD__4.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__4.p);
}
	if (colontmpD__3.p && !(colontmpD__3.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__3.p);
}
	if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
	if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
	eqdestroy___pkgZnicoZbackendsZcommon_u3780(font);
	goto BeforeRet_;
	{
		LA1_:;
	}
	{
		if (colontmpD__4.p && !(colontmpD__4.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__4.p);
}
		if (colontmpD__3.p && !(colontmpD__3.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__3.p);
}
		if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
		eqdestroy___pkgZnicoZbackendsZcommon_u3780(font);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, setFont__pkgZnico_u18)(NI fontId_p0) {
{	{
		if (!(((NI)16) < fontId_p0)) goto LA3_;
		goto BeforeRet_;
	}
LA3_: ;
	currentFontId__pkgZnicoZbackendsZcommon_u1042 = fontId_p0;
	eqcopy___pkgZnicoZbackendsZcommon_u3783(&currentFont__pkgZnicoZbackendsZcommon_u1041, fonts__pkgZnicoZbackendsZcommon_u1040[(currentFontId__pkgZnicoZbackendsZcommon_u1042)- 0]);
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, loadDefaultFont__pkgZnico_u5015)(NI index_p0) {
	NIM_BOOL shouldReplace;
	tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	shouldReplace = (currentFont__pkgZnicoZbackendsZcommon_u1041 == fonts__pkgZnicoZbackendsZcommon_u1040[(index_p0)- 0]);
	T1_ = NIM_NIL;
	T1_ = createFontFromSurface__pkgZnico_u4413(defaultFontSurface__pkgZnicoZfontdata_u6, TM__9aNIpYgJ1ntUbwp32t1x9cQA_35);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___pkgZnicoZbackendsZcommon_u3780(T1_); goto BeforeRet_;}
	eqsink___pkgZnicoZbackendsZcommon_u3789(&fonts__pkgZnicoZbackendsZcommon_u1040[(index_p0)- 0], T1_);
	{
		if (!shouldReplace) goto LA4_;
		setFont__pkgZnico_u18((index_p0));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA4_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, init__pkgZnico_u445)(NimStringV2 org_p0, NimStringV2 app_p1) {
	tySequence__friFxHbsLN0MVvin0IyEFg T1_;
	tyProc__yZbvgbtLeGIhzIA9bifjdPw T2_;
	tyTuple__npOdd6OOX5uthJz7z22r9ag T3_;
	NF T4_;
	tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* T5_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	T1_.len = 0; T1_.p = NIM_NIL;
	T1_ = newSeq__pkgZnico_u6965(((NI)0));
	eqsink___pkgZnicoZbackendsZcommon_u3027((&controllers__pkgZnicoZbackendsZcommon_u996), T1_);
	nimZeroMem((void*)(&T2_), sizeof(tyProc__yZbvgbtLeGIhzIA9bifjdPw));
	T2_.ClP_0 = ((TM__9aNIpYgJ1ntUbwp32t1x9cQA_2) (colonanonymous___pkgZnico_u6982)); T2_.ClE_0 = NIM_NIL;
	addResizeFunc__pkgZnico_u5744(T2_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	init__pkgZnicoZbackendsZsdl2_u6627(org_p0, app_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T3_), sizeof(tyTuple__npOdd6OOX5uthJz7z22r9ag));
	loadPalettePico8__pkgZnico_u69((&T3_));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	setPalette__pkgZnico_u824((&T3_));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	initialized__pkgZnicoZbackendsZcommon_u873 = NIM_TRUE;
	T4_ = (NF)0;
	T4_ = epochTime__pureZtimes_u5256();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	randomize__pureZrandom_u297(((NI64) (T4_)));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	loadConfig__pkgZnicoZbackendsZsdl2_u168();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T5_ = NIM_NIL;
	T5_ = newSurface__pkgZnicoZbackendsZcommon_u1091(((NI)128), ((NI)128));
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___pkgZnicoZbackendsZcommon_u1107(T5_); goto BeforeRet_;}
	eqsink___pkgZnicoZbackendsZcommon_u1116(&spritesheets__pkgZnicoZbackendsZcommon_u1024[(((NI)0))- 0], T5_);
	(*spritesheets__pkgZnicoZbackendsZcommon_u1024[(((NI)0))- 0]).tw = ((NI)8);
	(*spritesheets__pkgZnicoZbackendsZcommon_u1024[(((NI)0))- 0]).th = ((NI)8);
	setSpritesheet__pkgZnico_u5875(((NI)0));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	loadDefaultFont__pkgZnico_u5015(((NI)0));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	clip__pkgZnico_u124();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, createWindow__pkgZnico_u6910)(NimStringV2 title_p0, NI w_p1, NI h_p2, NI scale_p3, NIM_BOOL fullscreen_p4) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	createWindow__pkgZnicoZbackendsZsdl2_u302(title_p0, w_p1, h_p2, scale_p3, fullscreen_p4);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	clip__pkgZnico_u124();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, run__pkgZnico_u7022)(tyProc__HzVCwACFYM9cx9aV62PdjtuA init_p0, tyProc__y9aUXu4JGz72YDIZVWUrK5w update_p1, tyProc__HzVCwACFYM9cx9aV62PdjtuA draw_p2) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	echoBinSafe(TM__9aNIpYgJ1ntUbwp32t1x9cQA_36, 1);
	eqcopy___system_u4051((&initFunc__pkgZnicoZbackendsZcommon_u1029), init_p0, NIM_FALSE);
	initFuncCalled__pkgZnicoZbackendsZcommon_u1030 = NIM_FALSE;
	echoBinSafe(TM__9aNIpYgJ1ntUbwp32t1x9cQA_38, 1);
	eqcopy___pkgZnicoZbackendsZcommon_u3378((&updateFunc__pkgZnicoZbackendsZcommon_u1033), update_p1, NIM_FALSE);
	eqcopy___system_u4051((&drawFunc__pkgZnicoZbackendsZcommon_u1035), draw_p2, NIM_FALSE);
	{
		if (!running__pkgZnicoZbackendsZcommon_u874) goto LA3_;
		stopLastRun__pkgZnicoZbackendsZsdl2_u6659();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA3_: ;
	running__pkgZnicoZbackendsZcommon_u874 = NIM_TRUE;
	run__pkgZnicoZbackendsZsdl2_u6660();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pkgZnico_u7379)(tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA* dest_p0) {
	if ((*dest_p0).chars1.p && !((*dest_p0).chars1.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared((*dest_p0).chars1.p);
}
}
N_LIB_PRIVATE N_NIMCALL(void, rttiDestroy__pkgZnico_u7430)(void* dest_p0) {
	eqdestroy___pkgZnico_u7379(((tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA*) (dest_p0)));
}
static N_INLINE(void, eqdestroy___system_u281)(NimStringV2 x_p0) {
}
static N_INLINE(NIM_BOOL, isObjDisplayCheck)(TNimTypeV2* source_p0, NI16 targetDepth_p1, NU32 token_p2) {
	NIM_BOOL result;
	NIM_BOOL T1_;
	T1_ = (NIM_BOOL)0;
	T1_ = (targetDepth_p1 <= (*source_p0).depth);
	if (!(T1_)) goto LA2_;
	T1_ = ((*source_p0).display[targetDepth_p1] == token_p2);
LA2_: ;
	result = T1_;
	return result;
}
static N_INLINE(Exception*, nimBorrowCurrentException)(void) {
	Exception* result;
	result = currException__system_u4140;
	return result;
}
static N_INLINE(Exception*, getCurrentException)(void) {
	Exception* result;
	result = NIM_NIL;
	eqcopy___stdZtypedthreads_u223(&result, currException__system_u4140, NIM_FALSE);
	return result;
}
static N_INLINE(void, popCurrentException)(void) {
	eqcopy___stdZtypedthreads_u223(&currException__system_u4140, (*currException__system_u4140).up, NIM_FALSE);
}
N_LIB_PRIVATE N_CLOSURE(void, colonanonymous___pkgZnico_u5034)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* surface_p0, void* ClE_0) {
	tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA* colonenvP_;
	tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colonenvP_ = (tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA*) ClE_0;
	T1_ = NIM_NIL;
	T1_ = createFontFromSurface__pkgZnico_u4413(surface_p0, (*colonenvP_).chars1);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___pkgZnicoZbackendsZcommon_u3780(T1_); goto BeforeRet_;}
	eqsink___pkgZnicoZbackendsZcommon_u3789(&fonts__pkgZnicoZbackendsZcommon_u1040[((*colonenvP_).index0)- 0], T1_);
	{
		if (!(*colonenvP_).shouldReplace2) goto LA4_;
		setFont__pkgZnico_u18(((*colonenvP_).index0));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA4_: ;
	}BeforeRet_: ;
}
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1) {
	NI result;
	result = ((NI) ((NU)((NU32)(((NU) (x_p0))) - (NU32)(((NU) (y_p1))))));
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicDyn)(void* p_p0) {
	NIM_BOOL result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_FALSE;
	{
		tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg* cell;
		NI T5_;
		if (!!((p_p0 == NIM_NIL))) goto LA3_;
		T5_ = (NI)0;
		T5_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)8));
		cell = ((tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg*) (T5_));
		{
			if (!((NI)((*cell).rc & ((NI)-16)) == ((NI)0))) goto LA8_;
			result = NIM_TRUE;
		}
		goto LA6_;
LA8_: ;
		{
			(*cell).rc -= ((NI)16);
		}
LA6_: ;
		rememberCycle__system_u3528(result, cell, (*((TNimTypeV2**) (p_p0))));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA3_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pkgZnico_u7407)(tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLastCyclicDyn(dest_p0);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose(dest_p0);
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, loadFont__pkgZnico_u5022)(NI index_p0, NimStringV2 filename_p1) {
	tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA* colonenv_;
	NimStringV2 datPath;
	NimStringV2 colontmpD_;
	tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA* T2_;
	NimStringV2 colontmpD__2;
	NimStringV2 T5_;
	NimStringV2 T6_;
	NimStringV2 T7_;
	NimStringV2 T19_;
	tyProc__V9bGopLHKFo2FjArm25MFaw T20_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colonenv_ = NIM_NIL;
	datPath.len = 0; datPath.p = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	T2_ = NIM_NIL;
	T2_ = (tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA*) nimNewObj(sizeof(tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA), NIM_ALIGNOF(tyObject_Env_nicodotnim_loadFont___xl0UDdFh4J9aEuQrXBxDesA));
	(*T2_).Sup.m_type = (&NTIv2__xl0UDdFh4J9aEuQrXBxDesA_);
	colonenv_ = T2_;
	(*colonenv_).index0 = index_p0;
	(*colonenv_).shouldReplace2 = (currentFont__pkgZnicoZbackendsZcommon_u1041 == fonts__pkgZnicoZbackendsZcommon_u1040[((*colonenv_).index0)- 0]);
	colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
	T5_.len = 0; T5_.p = NIM_NIL;
	T5_ = rawNewString(filename_p1.len + 4);
appendString((&T5_), filename_p1);
appendString((&T5_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_42);
	colontmpD__2 = T5_;
	T6_.len = 0; T6_.p = NIM_NIL;
	T6_ = nosjoinPath(assetPath__pkgZnicoZbackendsZcommon_u1021, colontmpD__2);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T6_); goto LA4_;}
	datPath = T6_;
	T7_.len = 0; T7_.p = NIM_NIL;
	T7_ = readFile__pkgZnicoZbackendsZsdl2_u312(datPath);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T7_); goto LA4_;}
	eqsink___system_u2696((&(*colonenv_).chars1), T7_);
	{
		LA4_:;
	}
	{
		if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
	if (NIM_UNLIKELY(*nimErr_)) {
		LA3_:;
		if (isObjDisplayCheck(nimBorrowCurrentException()->Sup.m_type, 3, 4237542656)) {
			tyObject_IOError__YfyTxe9cThBYfr9aHkc9cltBw* e;
			Exception* T14_;
			Exception* T15_;
			NimStringV2 T16_;
			*nimErr_ = NIM_FALSE;
			e = NIM_NIL;
			T14_ = NIM_NIL;
			T14_ = getCurrentException();
			e = ((tyObject_IOError__YfyTxe9cThBYfr9aHkc9cltBw*) (T14_));
			T15_ = NIM_NIL;
			T15_ = (Exception*) nimNewObj(sizeof(Exception), NIM_ALIGNOF(Exception));
			(*T15_).Sup.m_type = (&NTIv2__XEycrCsme5C8CVWAYEcdBQ_);
			(*T15_).name = "Exception";
			T16_.len = 0; T16_.p = NIM_NIL;
			T16_ = rawNewString(datPath.len + (*e).Sup.Sup.message.len + 50);
appendString((&T16_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_44);
appendString((&T16_), datPath);
appendString((&T16_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_46);
appendString((&T16_), (*e).Sup.Sup.message);
			(*T15_).message = T16_;
			(*T15_).parent = ((Exception*) NIM_NIL);
			raiseExceptionEx((Exception*)T15_, "Exception", "loadFont", "nico.nim", 2262);
goto LA13_;
			{
				LA13_:;
			}
			{
				eqdestroy___system_u8936(e);
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA11_;
			popCurrentException();
			LA11_:;
		}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nsuRemoveSuffixCharSet((&(*colonenv_).chars1), TM__9aNIpYgJ1ntUbwp32t1x9cQA_47);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T19_.len = 0; T19_.p = NIM_NIL;
	T19_ = nosjoinPath(assetPath__pkgZnicoZbackendsZcommon_u1021, filename_p1);
	if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T19_); goto LA1_;}
	colontmpD_ = T19_;
	nimZeroMem((void*)(&T20_), sizeof(tyProc__V9bGopLHKFo2FjArm25MFaw));
	T20_.ClP_0 = colonanonymous___pkgZnico_u5034; T20_.ClE_0 = colonenv_;
	loadSurfaceFromPNGNoConvert__pkgZnicoZbackendsZsdl2_u632(colontmpD_, T20_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
		if (datPath.p && !(datPath.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(datPath.p);
}
		eqdestroy___pkgZnico_u7407(colonenv_);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pkgZnico_u7443)(tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA* dest_p0) {
	if ((*dest_p0).filename0.p && !((*dest_p0).filename0.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared((*dest_p0).filename0.p);
}
}
N_LIB_PRIVATE N_NIMCALL(void, rttiDestroy__pkgZnico_u7496)(void* dest_p0) {
	eqdestroy___pkgZnico_u7443(((tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA*) (dest_p0)));
}
N_LIB_PRIVATE N_CLOSURE(void, colonanonymous___pkgZnico_u5990)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* surface_p0, void* ClE_0) {
	tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA* colonenvP_;
	NimStringV2 colontmpD_;
	NimStringV2 colontmpD__2;
	NimStringV2 colontmpD__3;
	NimStringV2 colontmpD__4;
	tyArray__meGd17iD6izZVY5NTv9bHUA T2_;
	NI32 numTiles;
	tySequence__6H5Oh5UUvVCLiakt9aTwtUQ T14_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colonenvP_ = (tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA*) ClE_0;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
	colontmpD__3.len = 0; colontmpD__3.p = NIM_NIL;
	colontmpD__4.len = 0; colontmpD__4.p = NIM_NIL;
	T2_[0] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_51;
	T2_[1] = (*colonenvP_).filename0;
	T2_[2] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_53;
	colontmpD_ = dollar___systemZdollars_u8((*surface_p0).w);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T2_[3] = colontmpD_;
	T2_[4] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_55;
	colontmpD__2 = dollar___systemZdollars_u8((*surface_p0).h);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T2_[5] = colontmpD__2;
	T2_[6] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_57;
	colontmpD__3 = dollar___systemZdollars_u8(((NI) ((*colonenvP_).tileWidth1)));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T2_[7] = colontmpD__3;
	T2_[8] = TM__9aNIpYgJ1ntUbwp32t1x9cQA_58;
	colontmpD__4 = dollar___systemZdollars_u8(((NI) ((*colonenvP_).tileHeight2)));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T2_[9] = colontmpD__4;
	echoBinSafe(T2_, 10);
	{
		NIM_BOOL T5_;
		NimStringV2 colontmpD__5;
		NimStringV2 colontmpD__6;
		Exception* T10_;
		NimStringV2 T11_;
		T5_ = (NIM_BOOL)0;
		T5_ = !(((NI32)(((NI32) ((*surface_p0).w)) % (*colonenvP_).tileWidth1) == ((NI32)0)));
		if (T5_) goto LA6_;
		T5_ = !(((NI32)(((NI32) ((*surface_p0).h)) % (*colonenvP_).tileHeight2) == ((NI32)0)));
LA6_: ;
		if (!T5_) goto LA7_;
		colontmpD__5.len = 0; colontmpD__5.p = NIM_NIL;
		colontmpD__6.len = 0; colontmpD__6.p = NIM_NIL;
		T10_ = NIM_NIL;
		T10_ = (Exception*) nimNewObj(sizeof(Exception), NIM_ALIGNOF(Exception));
		(*T10_).Sup.m_type = (&NTIv2__XEycrCsme5C8CVWAYEcdBQ_);
		(*T10_).name = "Exception";
		T11_.len = 0; T11_.p = NIM_NIL;
		colontmpD__5 = dollar___systemZdollars_u8(((NI) ((*colonenvP_).tileWidth1)));
		if (NIM_UNLIKELY(*nimErr_)) goto LA9_;
		colontmpD__6 = dollar___systemZdollars_u8(((NI) ((*colonenvP_).tileHeight2)));
		if (NIM_UNLIKELY(*nimErr_)) goto LA9_;
		T11_ = rawNewString(colontmpD__5.len + colontmpD__6.len + 50);
appendString((&T11_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_60);
appendString((&T11_), colontmpD__5);
appendString((&T11_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_61);
appendString((&T11_), colontmpD__6);
		(*T10_).message = T11_;
		(*T10_).parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T10_, "Exception", ":anonymous", "nico.nim", 2512);
goto LA9_;
		{
			LA9_:;
		}
		{
			if (colontmpD__6.p && !(colontmpD__6.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__6.p);
}
			if (colontmpD__5.p && !(colontmpD__5.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__5.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA7_: ;
	numTiles = (NI32)((NI32)(((NI32) ((*surface_p0).w)) / (*colonenvP_).tileWidth1) * (NI32)(((NI32) ((*surface_p0).h)) / (*colonenvP_).tileHeight2));
	eqcopy___pkgZnicoZbackendsZcommon_u1110(&spritesheets__pkgZnicoZbackendsZcommon_u1024[((*colonenvP_).index3)- 0], surface_p0);
	(*spritesheets__pkgZnicoZbackendsZcommon_u1024[((*colonenvP_).index3)- 0]).tw = ((NI) ((*colonenvP_).tileWidth1));
	(*spritesheets__pkgZnicoZbackendsZcommon_u1024[((*colonenvP_).index3)- 0]).th = ((NI) ((*colonenvP_).tileHeight2));
	eqcopy___system_u2690((&(*spritesheets__pkgZnicoZbackendsZcommon_u1024[((*colonenvP_).index3)- 0]).filename), (*colonenvP_).filename0);
	T14_.len = 0; T14_.p = NIM_NIL;
	T14_ = newSeq__pkgZnicoZbackendsZcommon_u1280(((NI) (numTiles)));
	eqsink___pureZtimes_u2604((&(*spritesheets__pkgZnicoZbackendsZcommon_u1024[((*colonenvP_).index3)- 0]).spriteFlags), T14_);
	{
		if (!(*colonenvP_).shouldReplace4) goto LA17_;
		setSpritesheet__pkgZnico_u5875((*colonenvP_).index3);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA17_: ;
	{
		LA1_:;
	}
	{
		if (colontmpD__4.p && !(colontmpD__4.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__4.p);
}
		if (colontmpD__3.p && !(colontmpD__3.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__3.p);
}
		if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pkgZnico_u7473)(tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLastCyclicDyn(dest_p0);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose(dest_p0);
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, loadSpriteSheet__pkgZnico_u5931)(NI index_p0, NimStringV2 filename_p1, NI32 tileWidth_p2, NI32 tileHeight_p3) {
	tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA* colonenv_;
	NimStringV2 colontmpD_;
	tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA* T2_;
	tyProc__V9bGopLHKFo2FjArm25MFaw T14_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colonenv_ = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	T2_ = NIM_NIL;
	T2_ = (tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA*) nimNewObj(sizeof(tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA), NIM_ALIGNOF(tyObject_Env_nicodotnim_loadSpriteSheet___mlCB2x0QM8if5IEG9blV5iA));
	(*T2_).Sup.m_type = (&NTIv2__mlCB2x0QM8if5IEG9blV5iA_);
	colonenv_ = T2_;
	(*colonenv_).index3 = index_p0;
	eqcopy___system_u2690((&(*colonenv_).filename0), filename_p1);
	(*colonenv_).tileWidth1 = tileWidth_p2;
	(*colonenv_).tileHeight2 = tileHeight_p3;
	{
		NIM_BOOL T5_;
		NimStringV2 colontmpD__2;
		Exception* T10_;
		NimStringV2 T11_;
		T5_ = (NIM_BOOL)0;
		T5_ = ((*colonenv_).index3 < ((NI)0));
		if (T5_) goto LA6_;
		T5_ = (((NI)16) <= (*colonenv_).index3);
LA6_: ;
		if (!T5_) goto LA7_;
		colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
		T10_ = NIM_NIL;
		T10_ = (Exception*) nimNewObj(sizeof(Exception), NIM_ALIGNOF(Exception));
		(*T10_).Sup.m_type = (&NTIv2__XEycrCsme5C8CVWAYEcdBQ_);
		(*T10_).name = "Exception";
		T11_.len = 0; T11_.p = NIM_NIL;
		colontmpD__2 = dollar___systemZdollars_u8((*colonenv_).index3);
		if (NIM_UNLIKELY(*nimErr_)) goto LA9_;
		T11_ = rawNewString(colontmpD__2.len + 20);
appendString((&T11_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_49);
appendString((&T11_), colontmpD__2);
		(*T10_).message = T11_;
		(*T10_).parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T10_, "Exception", "loadSpriteSheet", "nico.nim", 2507);
goto LA9_;
		{
			LA9_:;
		}
		{
			if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
LA7_: ;
	(*colonenv_).shouldReplace4 = (spritesheet__pkgZnicoZbackendsZcommon_u1025 == spritesheets__pkgZnicoZbackendsZcommon_u1024[((*colonenv_).index3)- 0]);
	colontmpD_ = nosjoinPath(assetPath__pkgZnicoZbackendsZcommon_u1021, (*colonenv_).filename0);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimZeroMem((void*)(&T14_), sizeof(tyProc__V9bGopLHKFo2FjArm25MFaw));
	T14_.ClP_0 = colonanonymous___pkgZnico_u5990; T14_.ClE_0 = colonenv_;
	loadSurfaceFromPNG__pkgZnicoZbackendsZsdl2_u368(colontmpD_, T14_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
		eqdestroy___pkgZnico_u7473(colonenv_);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(NI, skip__pureZparseutils_u145)(NIM_CHAR* s_p0, NI s_p0Len_0, NIM_CHAR* token_p1, NI token_p1Len_0) {
	NI result;
	result = ((NI)0);
	{
		while (1) {
			NIM_BOOL T3_;
			NIM_BOOL T4_;
			T3_ = (NIM_BOOL)0;
			T4_ = (NIM_BOOL)0;
			T4_ = (result < s_p0Len_0);
			if (!(T4_)) goto LA5_;
			T4_ = (result < token_p1Len_0);
LA5_: ;
			T3_ = T4_;
			if (!(T3_)) goto LA6_;
			T3_ = ((NU8)(s_p0[result]) == (NU8)(token_p1[result]));
LA6_: ;
			if (!T3_) goto LA2;
			result += ((NI)1);
		} LA2: ;
	}
	{
		if (!!((result == token_p1Len_0))) goto LA9_;
		result = ((NI)0);
	}
LA9_: ;
	return result;
}
static N_INLINE(NI, skip__pureZparseutils_u868)(NimStringV2 s_p0, NimStringV2 token_p1, NI start_p2) {
	NI result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	result = skip__pureZparseutils_u145((((s_p0).p) ? ((NIM_CHAR*)s_p0.p->data+(start_p2)) : NIM_NIL), ((s_p0.len-1))-(start_p2)+1, ((token_p1).p) ? (token_p1.p->data) : NIM_NIL, token_p1.len);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NI, skipWhitespace__pureZparseutils_u130)(NIM_CHAR* s_p0, NI s_p0Len_0) {
	NI result;
	result = ((NI)0);
	{
		while (1) {
			NIM_BOOL T3_;
			T3_ = (NIM_BOOL)0;
			T3_ = (result < s_p0Len_0);
			if (!(T3_)) goto LA4_;
			T3_ = (((NU8)(s_p0[result])) == ((NU8)(32)) || ((NU8)(s_p0[result])) == ((NU8)(9)) || ((NU8)(s_p0[result])) == ((NU8)(11)) || ((NU8)(s_p0[result])) == ((NU8)(13)) || ((NU8)(s_p0[result])) == ((NU8)(10)) || ((NU8)(s_p0[result])) == ((NU8)(12)));
LA4_: ;
			if (!T3_) goto LA2;
			result += ((NI)1);
		} LA2: ;
	}
	return result;
}
static N_INLINE(NI, skipWhitespace__pureZparseutils_u864)(NimStringV2 s_p0, NI start_p1) {
	NI result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	result = skipWhitespace__pureZparseutils_u130((((s_p0).p) ? ((NIM_CHAR*)s_p0.p->data+(start_p1)) : NIM_NIL), ((s_p0.len-1))-(start_p1)+1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, pal__pkgZnico_u86)(void) {
	{
		NI i;
		NI i_2;
		i = (NI)0;
		i_2 = ((NI)0);
		{
			while (1) {
				if (!(i_2 < ((NI)256))) goto LA3;
				i = i_2;
				paletteMapDraw__pkgZnicoZbackendsZcommon_u1046[(i)- 0] = i;
				i_2 += ((NI)1);
			} LA3: ;
		}
	}
}
N_LIB_PRIVATE N_NIMCALL(void, pald__pkgZnico_u87)(void) {
	{
		NI i;
		NI i_2;
		i = (NI)0;
		i_2 = ((NI)0);
		{
			while (1) {
				if (!(i_2 < ((NI)256))) goto LA3;
				i = i_2;
				paletteMapDisplay__pkgZnicoZbackendsZcommon_u1047[(i)- 0] = i;
				i_2 += ((NI)1);
			} LA3: ;
		}
	}
}
N_LIB_PRIVATE N_NIMCALL(void, palt__pkgZnico_u91)(void) {
	{
		NI i;
		NI i_2;
		i = (NI)0;
		i_2 = ((NI)0);
		{
			while (1) {
				NIM_BOOL colontmpD_;
				NIM_BOOL colontmpD__2;
				if (!(i_2 < ((NI)256))) goto LA3;
				colontmpD_ = (NIM_BOOL)0;
				colontmpD__2 = (NIM_BOOL)0;
				i = i_2;
				{
					if (!(i == ((NI)0))) goto LA6_;
					colontmpD_ = NIM_TRUE;
					paletteTransparent__pkgZnicoZbackendsZcommon_u1048[(i)- 0] = colontmpD_;
				}
				goto LA4_;
LA6_: ;
				{
					colontmpD__2 = NIM_FALSE;
					paletteTransparent__pkgZnicoZbackendsZcommon_u1048[(i)- 0] = colontmpD__2;
				}
LA4_: ;
				i_2 += ((NI)1);
			} LA3: ;
		}
	}
}
N_LIB_PRIVATE N_NIMCALL(void, loadPaletteFromGPL__pkgZnico_u63)(NimStringV2 filename_p0, tyTuple__npOdd6OOX5uthJz7z22r9ag* Result) {
	NimStringV2 data;
	NimStringV2 colontmpD_;
	NI i;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyTuple__npOdd6OOX5uthJz7z22r9ag));
	data.len = 0; data.p = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	colontmpD_ = nosjoinPath(assetPath__pkgZnicoZbackendsZcommon_u1021, filename_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	data = readFile__pkgZnicoZbackendsZsdl2_u312(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	i = ((NI)0);
	{
		NimStringV2 line;
		NI first;
		NI last;
		NI eolpos;
		line.len = 0; line.p = NIM_NIL;
		first = ((NI)0);
		last = ((NI)0);
		eolpos = ((NI)0);
		{
			while (1) {
				NI colontmpD__2;
				NI colontmpD__3;
				NI T27_;
				NimStringV2 T33_;
				colontmpD__2 = (NI)0;
				colontmpD__3 = (NI)0;
				{
					while (1) {
						NIM_BOOL T8_;
						T8_ = (NIM_BOOL)0;
						T8_ = (last < data.len);
						if (!(T8_)) goto LA9_;
						T8_ = !((((NU8)(data.p->data[last])) == ((NU8)(13)) || ((NU8)(data.p->data[last])) == ((NU8)(10))));
LA9_: ;
						if (!T8_) goto LA7;
						last += ((NI)1);
					} LA7: ;
				}
				eolpos = last;
				{
					if (!(last < data.len)) goto LA12_;
					{
						if (!((NU8)(data.p->data[last]) == (NU8)(10))) goto LA16_;
						last += ((NI)1);
					}
					goto LA14_;
LA16_: ;
					{
						if (!((NU8)(data.p->data[last]) == (NU8)(13))) goto LA19_;
						last += ((NI)1);
						{
							NIM_BOOL T23_;
							T23_ = (NIM_BOOL)0;
							T23_ = (last < data.len);
							if (!(T23_)) goto LA24_;
							T23_ = ((NU8)(data.p->data[last]) == (NU8)(10));
LA24_: ;
							if (!T23_) goto LA25_;
							last += ((NI)1);
						}
LA25_: ;
					}
					goto LA14_;
LA19_: ;
LA14_: ;
				}
LA12_: ;
				T27_ = (NI)0;
				{
					if (!NIM_FALSE) goto LA30_;
					colontmpD__2 = (NI)(last - ((NI)1));
					T27_ = colontmpD__2;
				}
				goto LA28_;
LA30_: ;
				{
					colontmpD__3 = (NI)(eolpos - ((NI)1));
					T27_ = colontmpD__3;
				}
LA28_: ;
				T33_.len = 0; T33_.p = NIM_NIL;
				T33_ = substr__system_u8826(data, first, T27_);
				eqsink___system_u2696((&line), T33_);
				{
					NimStringV2 inp;
					NI r;
					NI g;
					NI b;
					inp.len = 0; inp.p = NIM_NIL;
					{
						if (!(line.len == ((NI)0))) goto LA38_;
						if (inp.p && !(inp.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(inp.p);
}
						goto LA34;
					}
LA38_: ;
					{
						NimStringV2 inp_2;
						if (!(i == ((NI)0))) goto LA42_;
						inp_2.len = 0; inp_2.p = NIM_NIL;
						{
							NI idx;
							NIM_BOOL res;
							NI resLen;
							eqcopy___system_u2690((&inp_2), line);
							idx = ((NI)0);
							res = NIM_FALSE;
							resLen = skip__pureZparseutils_u868(inp_2, TM__9aNIpYgJ1ntUbwp32t1x9cQA_63, idx);
							if (NIM_UNLIKELY(*nimErr_)) goto LA44_;
							{
								if (!!((resLen == ((NI)0)))) goto LA49_;
								idx += resLen;
								res = NIM_TRUE;
							}
LA49_: ;
							if (!res) goto LA51_;
							i += ((NI)1);
							if (inp_2.p && !(inp_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(inp_2.p);
}
							if (inp.p && !(inp.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(inp.p);
}
							goto LA34;
						}
LA51_: ;
						{
							LA44_:;
						}
						{
							if (inp_2.p && !(inp_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(inp_2.p);
}
						}
						if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
					}
LA42_: ;
					{
						if (!((NU8)(line.p->data[((NI)0)]) == (NU8)(35))) goto LA57_;
						if (inp.p && !(inp.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(inp.p);
}
						goto LA34;
					}
LA57_: ;
					{
						if (!(line.len == ((NI)0))) goto LA61_;
						if (inp.p && !(inp.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(inp.p);
}
						goto LA34;
					}
LA61_: ;
					r = (NI)0;
					g = (NI)0;
					b = (NI)0;
					{
						NI idx_2;
						NIM_BOOL res_2;
						NI T65_;
						NI resLen_2;
						tyTuple__hSHiEU6uEtL7soi1F4tKCg T82_;
						inp = line;
						eqwasMoved___system_u2687((&line));
						idx_2 = ((NI)0);
						res_2 = NIM_FALSE;
						T65_ = (NI)0;
						T65_ = skipWhitespace__pureZparseutils_u864(inp, idx_2);
						if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
						idx_2 += T65_;
						resLen_2 = parseInt__pureZparseutils_u928(inp, (&r), idx_2);
						if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
						{
							NI T70_;
							NI resLen_3;
							if (!!((resLen_2 == ((NI)0)))) goto LA68_;
							idx_2 += resLen_2;
							T70_ = (NI)0;
							T70_ = skipWhitespace__pureZparseutils_u864(inp, idx_2);
							if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
							idx_2 += T70_;
							resLen_3 = parseInt__pureZparseutils_u928(inp, (&g), idx_2);
							if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
							{
								NI T75_;
								NI resLen_4;
								if (!!((resLen_3 == ((NI)0)))) goto LA73_;
								idx_2 += resLen_3;
								T75_ = (NI)0;
								T75_ = skipWhitespace__pureZparseutils_u864(inp, idx_2);
								if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
								idx_2 += T75_;
								resLen_4 = parseInt__pureZparseutils_u928(inp, (&b), idx_2);
								if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
								{
									if (!!((resLen_4 == ((NI)0)))) goto LA78_;
									idx_2 += resLen_4;
									res_2 = NIM_TRUE;
								}
LA78_: ;
							}
LA73_: ;
						}
LA68_: ;
						if (!res_2) goto LA80_;
						nimZeroMem((void*)(&T82_), sizeof(tyTuple__hSHiEU6uEtL7soi1F4tKCg));
						T82_ = RGB__pkgZnicoZbackendsZcommon_u1678(((NI32) (r)), ((NI32) (g)), ((NI32) (b)));
						if (NIM_UNLIKELY(*nimErr_)) goto LA35_;
						(*Result).Field1[((NI)(i - ((NI)1)))- 0] = T82_;
						(*Result).Field0 += ((NI)1);
						{
							if (!(((NI)256) < i)) goto LA85_;
							if (inp.p && !(inp.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(inp.p);
}
							if (line.p && !(line.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(line.p);
}
							goto LA2;
						}
LA85_: ;
						i += ((NI)1);
					}
					goto LA63_;
LA80_: ;
					{
					}
LA63_: ;
					{
						LA35_:;
					}
					{
						if (inp.p && !(inp.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(inp.p);
}
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
				} LA34: ;
				{
					if (!(eolpos == last)) goto LA92_;
					goto LA4;
				}
LA92_: ;
				first = last;
			}
		} LA4: ;
		{
			LA3_:;
		}
		{
			if (line.p && !(line.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(line.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	} LA2: ;
	pal__pkgZnico_u86();
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	pald__pkgZnico_u87();
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	palt__pkgZnico_u91();
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
		if (data.p && !(data.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(data.p);
}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, btn__pkgZnico_u191)(tyEnum_NicoButton__DuWECYQZDfo5yecT9cSNFVw b_p0) {
	NIM_BOOL result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		tyObject_NicoControllercolonObjectType___OpA7H9cHyiLWNuzgwH7k5ZQ** c;
		NI i;
		NI L;
		NI T2_;
		c = (tyObject_NicoControllercolonObjectType___OpA7H9cHyiLWNuzgwH7k5ZQ**)0;
		i = ((NI)0);
		T2_ = controllers__pkgZnicoZbackendsZcommon_u996.len;
		L = T2_;
		{
			while (1) {
				if (!(i < L)) goto LA4;
				c = &controllers__pkgZnicoZbackendsZcommon_u996.p->data[i];
				{
					NIM_BOOL T7_;
					T7_ = (NIM_BOOL)0;
					T7_ = btn__pkgZnicoZcontroller_u326((*c), b_p0);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					if (!T7_) goto LA8_;
					result = NIM_TRUE;
					goto BeforeRet_;
				}
LA8_: ;
				i += ((NI)1);
			} LA4: ;
		}
	}
	result = NIM_FALSE;
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, btnup__pkgZnico_u195)(tyEnum_NicoButton__DuWECYQZDfo5yecT9cSNFVw b_p0) {
	NIM_BOOL result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		tyObject_NicoControllercolonObjectType___OpA7H9cHyiLWNuzgwH7k5ZQ** c;
		NI i;
		NI L;
		NI T2_;
		c = (tyObject_NicoControllercolonObjectType___OpA7H9cHyiLWNuzgwH7k5ZQ**)0;
		i = ((NI)0);
		T2_ = controllers__pkgZnicoZbackendsZcommon_u996.len;
		L = T2_;
		{
			while (1) {
				if (!(i < L)) goto LA4;
				c = &controllers__pkgZnicoZbackendsZcommon_u996.p->data[i];
				{
					NIM_BOOL T7_;
					T7_ = (NIM_BOOL)0;
					T7_ = btnup__pkgZnicoZcontroller_u390((*c), b_p0);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					if (!T7_) goto LA8_;
					result = NIM_TRUE;
					goto BeforeRet_;
				}
LA8_: ;
				i += ((NI)1);
			} LA4: ;
		}
	}
	result = NIM_FALSE;
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, cls__pkgZnico_u1521)(NI c_p0) {
	NU8 colId;
	colId = ((NU8) (paletteMapDraw__pkgZnicoZbackendsZcommon_u1046[(c_p0)- 0]));
	{
		NI i;
		NI colontmp_;
		NI T2_;
		NI i_2;
		i = (NI)0;
		colontmp_ = (NI)0;
		T2_ = (*swCanvas__pkgZnicoZbackendsZcommon_u888).data.len;
		colontmp_ = T2_;
		i_2 = ((NI)0);
		{
			while (1) {
				if (!(i_2 < colontmp_)) goto LA4;
				i = i_2;
				(*swCanvas__pkgZnicoZbackendsZcommon_u888).data.p->data[i] = colId;
				i_2 += ((NI)1);
			} LA4: ;
		}
	}
}
N_LIB_PRIVATE N_NIMCALL(void, setColor__pkgZnico_u60)(NI colId_p0) {
	currentColor__pkgZnicoZbackendsZcommon_u1054 = colId_p0;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, stencilTest__pkgZnico_u172)(NI x_p0, NI y_p1, NU8 nv_p2) {
	NIM_BOOL result;
	NU8 v;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	{
		if (!(stencilMode__pkgZnicoZbackendsZcommon_u911 == ((tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww)7))) goto LA3_;
		result = NIM_FALSE;
		goto BeforeRet_;
	}
LA3_: ;
	{
		if (!(stencilMode__pkgZnicoZbackendsZcommon_u911 == ((tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww)0))) goto LA7_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
LA7_: ;
	v = get__pkgZnicoZbackendsZcommon_u827(stencilBuffer__pkgZnicoZbackendsZcommon_u889, x_p0, y_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	switch (stencilMode__pkgZnicoZbackendsZcommon_u911) {
	case ((tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww)7):
	{
		result = NIM_FALSE;
		goto BeforeRet_;
	}
	break;
	case ((tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww)0):
	{
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww)1):
	{
		result = (nv_p2 == v);
		goto BeforeRet_;
	}
	break;
	case ((tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww)2):
	{
		result = ((NU8)(nv_p2) < (NU8)(v));
		goto BeforeRet_;
	}
	break;
	case ((tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww)3):
	{
		result = ((NU8)(v) < (NU8)(nv_p2));
		goto BeforeRet_;
	}
	break;
	case ((tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww)4):
	{
		result = ((NU8)(nv_p2) <= (NU8)(v));
		goto BeforeRet_;
	}
	break;
	case ((tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww)5):
	{
		result = ((NU8)(v) <= (NU8)(nv_p2));
		goto BeforeRet_;
	}
	break;
	case ((tyEnum_StencilMode__Z5mtRazbs9bHFC9clx6mOjww)6):
	{
		result = !((nv_p2 == v));
		goto BeforeRet_;
	}
	break;
	default: __builtin_unreachable();
	}
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NIM_BOOL, ditherPass__pkgZnico_u916)(NI x_p0, NI y_p1) {
	NIM_BOOL result;
	NI x_2;
	NI y_2;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	{
		if (!(gDitherMode__pkgZnicoZbackendsZcommon_u1010 == ((tyEnum_DitherMode__qddd9bcPRohUdqi2yBml8IQ)0))) goto LA3_;
		result = NIM_TRUE;
		goto BeforeRet_;
	}
LA3_: ;
	x_2 = floorMod__pkgZnicoZbackendsZsdl2_u817((NI)(x_p0 + gDitherOffsetX__pkgZnicoZbackendsZcommon_u1015), screenWidth__pkgZnicoZbackendsZcommon_u921);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	y_2 = floorMod__pkgZnicoZbackendsZsdl2_u817((NI)(y_p1 + gDitherOffsetY__pkgZnicoZbackendsZcommon_u1016), screenHeight__pkgZnicoZbackendsZcommon_u922);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	switch (gDitherMode__pkgZnicoZbackendsZcommon_u1010) {
	case ((tyEnum_DitherMode__qddd9bcPRohUdqi2yBml8IQ)0):
	{
		result = NIM_TRUE;
		goto BeforeRet_;
	}
	break;
	case ((tyEnum_DitherMode__qddd9bcPRohUdqi2yBml8IQ)1):
	{
		NU16 x4;
		NU16 y4;
		NU16 bit;
		x4 = ((NU16) ((NI)(x_2 % ((NI)4))));
		y4 = ((NU16) ((NI)(y_2 % ((NI)4))));
		bit = (NU16)((NU16)((NU16)((NU16)(y4) * (NU16)(((NU16)4)))) + (NU16)(x4));
		result = !(((NU16)(gDitherPattern__pkgZnicoZbackendsZcommon_u1009 & (NU16)((NU16)(((NU16)1)) << (NU16)(bit))) == ((NU16)0)));
		goto BeforeRet_;
	}
	break;
	case ((tyEnum_DitherMode__qddd9bcPRohUdqi2yBml8IQ)2):
	{
		result = (1.0f < ((NF32)(gDitherADitherInput__pkgZnicoZbackendsZcommon_u1014) + (NF32)(((NF32)(((NF32) ((NI)((NI)((NI)(x_2 + (NI)(y_2 * gDitherADitherA__pkgZnicoZbackendsZcommon_u1011)) * gDitherADitherB__pkgZnicoZbackendsZcommon_u1012) & gDitherADitherC__pkgZnicoZbackendsZcommon_u1013)))) / (NF32)(((NF32) (gDitherADitherC__pkgZnicoZbackendsZcommon_u1013)))))));
		goto BeforeRet_;
	}
	break;
	case ((tyEnum_DitherMode__qddd9bcPRohUdqi2yBml8IQ)3):
	{
		result = (1.0f < ((NF32)(gDitherADitherInput__pkgZnicoZbackendsZcommon_u1014) + (NF32)(((NF32)(((NF32) ((NI)((NI)((NI)(x_2 ^ (NI)(y_2 * gDitherADitherA__pkgZnicoZbackendsZcommon_u1011)) * gDitherADitherB__pkgZnicoZbackendsZcommon_u1012) & gDitherADitherC__pkgZnicoZbackendsZcommon_u1013)))) / (NF32)(((NF32) (gDitherADitherC__pkgZnicoZbackendsZcommon_u1013)))))));
		goto BeforeRet_;
	}
	break;
	default: __builtin_unreachable();
	}
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, psetRaw__pkgZnico_u519)(NI32 x_p0, NI32 y_p1, NI c_p2) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		NIM_BOOL T4_;
		NIM_BOOL T5_;
		T3_ = (NIM_BOOL)0;
		T4_ = (NIM_BOOL)0;
		T5_ = (NIM_BOOL)0;
		T5_ = (x_p0 < ((NI32) (clipMinX__pkgZnicoZbackendsZcommon_u1058)));
		if (T5_) goto LA6_;
		T5_ = (y_p1 < ((NI32) (clipMinY__pkgZnicoZbackendsZcommon_u1060)));
LA6_: ;
		T4_ = T5_;
		if (T4_) goto LA7_;
		T4_ = (((NI32) (clipMaxX__pkgZnicoZbackendsZcommon_u1059)) < x_p0);
LA7_: ;
		T3_ = T4_;
		if (T3_) goto LA8_;
		T3_ = (((NI32) (clipMaxY__pkgZnicoZbackendsZcommon_u1061)) < y_p1);
LA8_: ;
		if (!T3_) goto LA9_;
		goto BeforeRet_;
	}
LA9_: ;
	{
		NIM_BOOL T13_;
		T13_ = (NIM_BOOL)0;
		T13_ = (((NI)0) <= c_p2);
		if (!(T13_)) goto LA14_;
		T13_ = stencilTest__pkgZnico_u172(((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
LA14_: ;
		if (!T13_) goto LA15_;
		{
			if (!!(stencilOnly__pkgZnicoZbackendsZcommon_u914)) goto LA19_;
			{
				NIM_BOOL T23_;
				T23_ = (NIM_BOOL)0;
				T23_ = ditherPass__pkgZnico_u916(((NI) (x_p0)), ((NI) (y_p1)));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				if (!T23_) goto LA24_;
				set__pkgZnicoZbackendsZcommon_u783(swCanvas__pkgZnicoZbackendsZcommon_u888, ((NI) (x_p0)), ((NI) (y_p1)), ((NU8) (paletteMapDraw__pkgZnicoZbackendsZcommon_u1046[(c_p2)- 0])));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			goto LA21_;
LA24_: ;
			{
				if (!(((NI)0) <= ditherColor__pkgZnico_u872)) goto LA27_;
				set__pkgZnicoZbackendsZcommon_u783(swCanvas__pkgZnicoZbackendsZcommon_u888, ((NI) (x_p0)), ((NI) (y_p1)), ((NU8) (paletteMapDraw__pkgZnicoZbackendsZcommon_u1046[(ditherColor__pkgZnico_u872)- 0])));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			goto LA21_;
LA27_: ;
LA21_: ;
		}
LA19_: ;
		{
			if (!stencilWrite__pkgZnicoZbackendsZcommon_u912) goto LA31_;
			switch (stencilBlend__pkgZnicoZbackendsZcommon_u916) {
			case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)0):
			{
				set__pkgZnicoZbackendsZcommon_u783(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			break;
			case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)1):
			{
				add__pkgZnicoZbackendsZcommon_u797(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			break;
			case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)2):
			{
				subtract__pkgZnicoZbackendsZcommon_u802(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			break;
			case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)3):
			{
				blendMax__pkgZnicoZbackendsZcommon_u807(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			break;
			case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)4):
			{
				blendMin__pkgZnicoZbackendsZcommon_u817(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			break;
			default: __builtin_unreachable();
			}
		}
LA31_: ;
	}
	goto LA11_;
LA15_: ;
	{
		NIM_BOOL T39_;
		NU8 cref;
		T39_ = (NIM_BOOL)0;
		T39_ = (c_p2 < ((NI)0));
		if (!(T39_)) goto LA40_;
		T39_ = stencilTest__pkgZnico_u172(((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
LA40_: ;
		if (!T39_) goto LA41_;
		cref = ((NU8) (((NI32)-(c_p2))));
		switch (stencilBlend__pkgZnicoZbackendsZcommon_u916) {
		case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)0):
		{
			set__pkgZnicoZbackendsZcommon_u783(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), cref);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		break;
		case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)1):
		{
			add__pkgZnicoZbackendsZcommon_u797(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), cref);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		break;
		case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)2):
		{
			subtract__pkgZnicoZbackendsZcommon_u802(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), cref);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		break;
		case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)3):
		{
			blendMax__pkgZnicoZbackendsZcommon_u807(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), cref);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		break;
		case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)4):
		{
			blendMin__pkgZnicoZbackendsZcommon_u817(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), cref);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		break;
		default: __builtin_unreachable();
		}
	}
	goto LA11_;
LA41_: ;
	{
		if (!stencilWriteFail__pkgZnicoZbackendsZcommon_u913) goto LA49_;
		switch (stencilBlend__pkgZnicoZbackendsZcommon_u916) {
		case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)0):
		{
			set__pkgZnicoZbackendsZcommon_u783(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		break;
		case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)1):
		{
			add__pkgZnicoZbackendsZcommon_u797(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		break;
		case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)2):
		{
			subtract__pkgZnicoZbackendsZcommon_u802(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		break;
		case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)3):
		{
			blendMax__pkgZnicoZbackendsZcommon_u807(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		break;
		case ((tyEnum_StencilBlend__9bI9bGpXIhdEoV89aCfnxkzSQ)4):
		{
			blendMin__pkgZnicoZbackendsZcommon_u817(stencilBuffer__pkgZnicoZbackendsZcommon_u889, ((NI) (x_p0)), ((NI) (y_p1)), stencilRef__pkgZnicoZbackendsZcommon_u915);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		break;
		default: __builtin_unreachable();
		}
	}
	goto LA11_;
LA49_: ;
LA11_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, pset__pkgZnico_u1569)(NI32 x_p0, NI32 y_p1, NI c_p2) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	psetRaw__pkgZnico_u519((NI32)(x_p0 - cameraX__pkgZnicoZbackendsZcommon_u1044), (NI32)(y_p1 - cameraY__pkgZnicoZbackendsZcommon_u1045), c_p2);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(void, pset__pkgZnico_u242)(NI32 x_p0, NI32 y_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	pset__pkgZnico_u1569(x_p0, y_p1, currentColor__pkgZnicoZbackendsZcommon_u1054);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, hline__pkgZnico_u305)(NI32 x0_p0, NI32 y_p1, NI32 x1_p2) {
	NI32 minX;
	NI32 maxX;
	NI32 x0_2;
	NI32 x1_2;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	minX = (NI32)(((NI32) (clipMinX__pkgZnicoZbackendsZcommon_u1058)) + cameraX__pkgZnicoZbackendsZcommon_u1044);
	maxX = (NI32)(((NI32) (clipMaxX__pkgZnicoZbackendsZcommon_u1059)) + cameraX__pkgZnicoZbackendsZcommon_u1044);
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (x0_p0 < minX);
		if (!(T3_)) goto LA4_;
		T3_ = (x1_p2 < minX);
LA4_: ;
		if (!T3_) goto LA5_;
		goto BeforeRet_;
	}
LA5_: ;
	{
		NIM_BOOL T9_;
		T9_ = (NIM_BOOL)0;
		T9_ = (maxX < x0_p0);
		if (!(T9_)) goto LA10_;
		T9_ = (maxX < x1_p2);
LA10_: ;
		if (!T9_) goto LA11_;
		goto BeforeRet_;
	}
LA11_: ;
	x0_2 = x0_p0;
	x1_2 = x1_p2;
	{
		NI32 T17_;
		if (!(x1_2 < x0_2)) goto LA15_;
		T17_ = (NI32)0;
		T17_ = x1_2;
		x1_2 = x0_2;
		x0_2 = T17_;
	}
LA15_: ;
	x0_2 = ((x0_2 >= minX) ? x0_2 : minX);
	x1_2 = ((x1_2 <= maxX) ? x1_2 : maxX);
	{
		NI32 x;
		NI32 res;
		x = (NI32)0;
		res = x0_2;
		{
			while (1) {
				if (!(res <= x1_2)) goto LA20;
				x = res;
				pset__pkgZnico_u242(x, y_p1);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				res += ((NI)1);
			} LA20: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NI32, textWidth__pkgZnico_u51)(NimStringV2 text_p0, NI32 scale_p1) {
	NI32 result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI32)0;
	{
		Exception* T5_;
		if (!(currentFont__pkgZnicoZbackendsZcommon_u1041 == ((tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg*) NIM_NIL))) goto LA3_;
		T5_ = NIM_NIL;
		T5_ = (Exception*) nimNewObj(sizeof(Exception), NIM_ALIGNOF(Exception));
		(*T5_).Sup.m_type = (&NTIv2__XEycrCsme5C8CVWAYEcdBQ_);
		(*T5_).name = "Exception";
		(*T5_).message = TM__9aNIpYgJ1ntUbwp32t1x9cQA_65;
		(*T5_).parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T5_, "Exception", "textWidth", "nico.nim", 2343);
goto BeforeRet_;
	}
LA3_: ;
	{
		NI32 c;
		c = (NI32)0;
		{
			NI32 rune;
			NI i;
			NI32 result_2;
			rune = (NI32)0;
			i = ((NI)0);
			result_2 = (NI32)0;
			{
				while (1) {
					tyTuple__FtZxsWeKlOo83uVL9c4OOmg* T93_;
					if (!(i < (((text_p0.len-1))-(((NI)0))+1))) goto LA9;
					{
						tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T12_;
						tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T15_;
						T12_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T12_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
						if (!((NU32)(((NU) (((NU8)(T12_.Field0[i]))))) <= (NU32)(((NU)127)))) goto LA13_;
						T15_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T15_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
						result_2 = ((NI32) (((NU) (((NU8)(T15_.Field0[i]))))));
						i += ((NI)1);
					}
					goto LA10_;
LA13_: ;
					{
						tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T17_;
						T17_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T17_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
						if (!((NU)((NU32)(((NU) (((NU8)(T17_.Field0[i]))))) >> (NU32)(((NI)5))) == ((NU)6))) goto LA18_;
						{
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T24_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T25_;
							if (!(i <= (NI)((((text_p0.len-1))-(((NI)0))+1) - ((NI)2)))) goto LA22_;
							T24_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T24_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T25_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T25_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							result_2 = ((NI32) ((NU)((NU)((NU32)((NU)(((NU) (((NU8)(T24_.Field0[i])))) & ((NU)31))) << (NU32)(((NI)6))) | (NU)(((NU) (((NU8)(T25_.Field0[(NI)(i + ((NI)1))])))) & ((NU)63)))));
							i += ((NI)2);
						}
						goto LA20_;
LA22_: ;
						{
							result_2 = ((NI32)65533);
							i += ((NI)1);
						}
LA20_: ;
					}
					goto LA10_;
LA18_: ;
					{
						tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T28_;
						T28_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T28_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
						if (!((NU)((NU32)(((NU) (((NU8)(T28_.Field0[i]))))) >> (NU32)(((NI)4))) == ((NU)14))) goto LA29_;
						{
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T35_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T36_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T37_;
							if (!(i <= (NI)((((text_p0.len-1))-(((NI)0))+1) - ((NI)3)))) goto LA33_;
							T35_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T35_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T36_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T36_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T37_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T37_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							result_2 = ((NI32) ((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(T35_.Field0[i])))) & ((NU)15))) << (NU32)(((NI)12))) | (NU)((NU32)((NU)(((NU) (((NU8)(T36_.Field0[(NI)(i + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(T37_.Field0[(NI)(i + ((NI)2))])))) & ((NU)63)))));
							i += ((NI)3);
						}
						goto LA31_;
LA33_: ;
						{
							result_2 = ((NI32)65533);
							i += ((NI)1);
						}
LA31_: ;
					}
					goto LA10_;
LA29_: ;
					{
						tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T40_;
						T40_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T40_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
						if (!((NU)((NU32)(((NU) (((NU8)(T40_.Field0[i]))))) >> (NU32)(((NI)3))) == ((NU)30))) goto LA41_;
						{
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T47_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T48_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T49_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T50_;
							if (!(i <= (NI)((((text_p0.len-1))-(((NI)0))+1) - ((NI)4)))) goto LA45_;
							T47_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T47_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T48_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T48_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T49_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T49_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T50_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T50_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							result_2 = ((NI32) ((NU)((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(T47_.Field0[i])))) & ((NU)7))) << (NU32)(((NI)18))) | (NU)((NU32)((NU)(((NU) (((NU8)(T48_.Field0[(NI)(i + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)12)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T49_.Field0[(NI)(i + ((NI)2))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(T50_.Field0[(NI)(i + ((NI)3))])))) & ((NU)63)))));
							i += ((NI)4);
						}
						goto LA43_;
LA45_: ;
						{
							result_2 = ((NI32)65533);
							i += ((NI)1);
						}
LA43_: ;
					}
					goto LA10_;
LA41_: ;
					{
						tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T53_;
						T53_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T53_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
						if (!((NU)((NU32)(((NU) (((NU8)(T53_.Field0[i]))))) >> (NU32)(((NI)2))) == ((NU)62))) goto LA54_;
						{
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T60_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T61_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T62_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T63_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T64_;
							if (!(i <= (NI)((((text_p0.len-1))-(((NI)0))+1) - ((NI)5)))) goto LA58_;
							T60_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T60_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T61_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T61_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T62_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T62_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T63_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T63_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T64_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T64_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							result_2 = ((NI32) ((NU)((NU)((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(T60_.Field0[i])))) & ((NU)3))) << (NU32)(((NI)24))) | (NU)((NU32)((NU)(((NU) (((NU8)(T61_.Field0[(NI)(i + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)18)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T62_.Field0[(NI)(i + ((NI)2))])))) & ((NU)63))) << (NU32)(((NI)12)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T63_.Field0[(NI)(i + ((NI)3))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(T64_.Field0[(NI)(i + ((NI)4))])))) & ((NU)63)))));
							i += ((NI)5);
						}
						goto LA56_;
LA58_: ;
						{
							result_2 = ((NI32)65533);
							i += ((NI)1);
						}
LA56_: ;
					}
					goto LA10_;
LA54_: ;
					{
						tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T67_;
						T67_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T67_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
						if (!((NU)((NU32)(((NU) (((NU8)(T67_.Field0[i]))))) >> (NU32)(((NI)1))) == ((NU)126))) goto LA68_;
						{
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T74_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T75_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T76_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T77_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T78_;
							tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T79_;
							if (!(i <= (NI)((((text_p0.len-1))-(((NI)0))+1) - ((NI)6)))) goto LA72_;
							T74_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T74_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T75_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T75_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T76_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T76_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T77_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T77_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T78_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T78_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							T79_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T79_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
							result_2 = ((NI32) ((NU)((NU)((NU)((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(T74_.Field0[i])))) & ((NU)1))) << (NU32)(((NI)30))) | (NU)((NU32)((NU)(((NU) (((NU8)(T75_.Field0[(NI)(i + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)24)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T76_.Field0[(NI)(i + ((NI)2))])))) & ((NU)63))) << (NU32)(((NI)18)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T77_.Field0[(NI)(i + ((NI)3))])))) & ((NU)63))) << (NU32)(((NI)12)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T78_.Field0[(NI)(i + ((NI)4))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(T79_.Field0[(NI)(i + ((NI)5))])))) & ((NU)63)))));
							i += ((NI)6);
						}
						goto LA70_;
LA72_: ;
						{
							result_2 = ((NI32)65533);
							i += ((NI)1);
						}
LA70_: ;
					}
					goto LA10_;
LA68_: ;
					{
						tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T82_;
						T82_.Field0 = (((text_p0).p) ? ((NIM_CHAR*)text_p0.p->data+(((NI)0))) : NIM_NIL); T82_.Field1 = ((text_p0.len-1))-(((NI)0))+1;
						result_2 = ((NI32) (((NU) (((NU8)(T82_.Field0[i]))))));
						i += ((NI)1);
					}
LA10_: ;
					rune = result_2;
					c = rune;
					{
						NIM_BOOL T85_;
						NimStringV2 colontmpD_;
						Exception* T89_;
						NimStringV2 T90_;
						T85_ = (NIM_BOOL)0;
						T85_ = hasKey__pkgZnico_u4787((*currentFont__pkgZnicoZbackendsZcommon_u1041).rects, c);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
						if (!!(T85_)) goto LA86_;
						colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
						T89_ = NIM_NIL;
						T89_ = (Exception*) nimNewObj(sizeof(Exception), NIM_ALIGNOF(Exception));
						(*T89_).Sup.m_type = (&NTIv2__XEycrCsme5C8CVWAYEcdBQ_);
						(*T89_).name = "Exception";
						T90_.len = 0; T90_.p = NIM_NIL;
						colontmpD_ = dollar___pureZunicode_u663(c);
						if (NIM_UNLIKELY(*nimErr_)) goto LA88_;
						T90_ = rawNewString(colontmpD_.len + 25);
appendString((&T90_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_67);
appendString((&T90_), colontmpD_);
appendString((&T90_), TM__9aNIpYgJ1ntUbwp32t1x9cQA_69);
						(*T89_).message = T90_;
						(*T89_).parent = ((Exception*) NIM_NIL);
						raiseExceptionEx((Exception*)T89_, "Exception", "textWidth", "nico.nim", 2346);
goto LA88_;
						{
							LA88_:;
						}
						{
							if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
						}
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
LA86_: ;
					T93_ = (tyTuple__FtZxsWeKlOo83uVL9c4OOmg*)0;
					T93_ = X5BX5D___pkgZnico_u5153((&(*currentFont__pkgZnicoZbackendsZcommon_u1041).rects), c);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					result += (NI32)((NI32)(((NI32) ((*T93_).Field2)) * scale_p1) + scale_p1);
				} LA9: ;
			}
		}
	}
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI32, fontHeight__pkgZnico_u5252)(void) {
	NI32 result;
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg* T5_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI32)0;
	{
		if (!(currentFont__pkgZnicoZbackendsZcommon_u1041 == ((tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg*) NIM_NIL))) goto LA3_;
		result = ((NI32)0);
		goto BeforeRet_;
	}
LA3_: ;
	T5_ = (tyTuple__FtZxsWeKlOo83uVL9c4OOmg*)0;
	T5_ = X5BX5D___pkgZnico_u5153((&(*currentFont__pkgZnicoZbackendsZcommon_u1041).rects), ((NI32)32));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = ((NI32) ((*T5_).Field3));
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NI32, toPint__pkgZnicoZbackendsZcommon_u851)(NF32 x_p0) {
	NI32 result;
	NF32 T1_;
{	T1_ = (NF32)0;
	T1_ = floorf(x_p0);
	result = ((NI32) (T1_));
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, pluseq___pkgZnicoZbackendsZsdl2_u5859)(NF32* x_p0, NF32 y_p1) {
	(*x_p0) = ((NF32)((*x_p0)) + (NF32)(y_p1));
}
N_LIB_PRIVATE N_NIMCALL(void, fontBlit__pkgZnico_u2486)(tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg* font_p0, tyTuple__FtZxsWeKlOo83uVL9c4OOmg srcRect_p1, tyTuple__FtZxsWeKlOo83uVL9c4OOmg dstRect_p2, NI color_p3) {
	NF32 dx;
	NF32 dy;
	NF32 sx;
	NF32 sy;
	NF32 dw;
	NF32 dh;
	NF32 sw;
	NF32 sh;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	dx = ((NF32) (dstRect_p2.Field0));
	dy = ((NF32) (dstRect_p2.Field1));
	sx = ((NF32) (srcRect_p1.Field0));
	sy = ((NF32) (srcRect_p1.Field1));
	dw = ((NF32) (dstRect_p2.Field2));
	dh = ((NF32) (dstRect_p2.Field3));
	sw = ((NF32) (srcRect_p1.Field2));
	sh = ((NF32) (srcRect_p1.Field3));
	{
		NI y;
		NI i;
		y = (NI)0;
		i = ((NI)0);
		{
			while (1) {
				if (!(i < dstRect_p2.Field3)) goto LA3;
				y = i;
				dx = ((NF32) (dstRect_p2.Field0));
				sx = ((NF32) (srcRect_p1.Field0));
				{
					NI x;
					NI i_2;
					x = (NI)0;
					i_2 = ((NI)0);
					{
						while (1) {
							if (!(i_2 < dstRect_p2.Field2)) goto LA6;
							x = i_2;
							{
								{
									NIM_BOOL T10_;
									NIM_BOOL T11_;
									NIM_BOOL T12_;
									T10_ = (NIM_BOOL)0;
									T11_ = (NIM_BOOL)0;
									T12_ = (NIM_BOOL)0;
									T12_ = (((NI) (sx)) < ((NI)0));
									if (T12_) goto LA13_;
									T12_ = (((NI) (sy)) < ((NI)0));
LA13_: ;
									T11_ = T12_;
									if (T11_) goto LA14_;
									T11_ = ((NI)((*font_p0).w - ((NI)1)) < ((NI) (sx)));
LA14_: ;
									T10_ = T11_;
									if (T10_) goto LA15_;
									T10_ = ((NI)((*font_p0).h - ((NI)1)) < ((NI) (sy)));
LA15_: ;
									if (!T10_) goto LA16_;
									goto LA7;
								}
LA16_: ;
								{
									NI32 T20_;
									NI32 T21_;
									NI32 T24_;
									NI32 T25_;
									T20_ = (NI32)0;
									T20_ = toPint__pkgZnicoZbackendsZcommon_u851(sy);
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
									T21_ = (NI32)0;
									T21_ = toPint__pkgZnicoZbackendsZcommon_u851(sx);
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
									if (!((*font_p0).data.p->data[(NI32)((NI32)(T20_ * ((NI32) ((*font_p0).w))) + T21_)] == ((NU8)1))) goto LA22_;
									T24_ = (NI32)0;
									T24_ = toPint__pkgZnicoZbackendsZcommon_u851(dx);
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
									T25_ = (NI32)0;
									T25_ = toPint__pkgZnicoZbackendsZcommon_u851(dy);
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
									pset__pkgZnico_u1569(T24_, T25_, currentColor__pkgZnicoZbackendsZcommon_u1054);
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								}
LA22_: ;
								pluseq___pkgZnicoZbackendsZsdl2_u5859((&sx), ((NF32)(1.0f) * (NF32)(((NF32)(sw) / (NF32)(dw)))));
								pluseq___pkgZnicoZbackendsZsdl2_u5859((&dx), 1.0f);
							} LA7: ;
							i_2 += ((NI)1);
						} LA6: ;
					}
				}
				pluseq___pkgZnicoZbackendsZsdl2_u5859((&sy), ((NF32)(1.0f) * (NF32)(((NF32)(sh) / (NF32)(dh)))));
				pluseq___pkgZnicoZbackendsZsdl2_u5859((&dy), 1.0f);
				i += ((NI)1);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
static N_INLINE(NI32, glyph__pkgZnico_u20)(NI32 c_p0, NI32 x_p1, NI32 y_p2, NI32 scale_p3) {
	NI32 result;
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg src;
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg* T11_;
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg dst;
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg T12_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI32)0;
	{
		Exception* T5_;
		if (!(currentFont__pkgZnicoZbackendsZcommon_u1041 == ((tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg*) NIM_NIL))) goto LA3_;
		T5_ = NIM_NIL;
		T5_ = (Exception*) nimNewObj(sizeof(Exception), NIM_ALIGNOF(Exception));
		(*T5_).Sup.m_type = (&NTIv2__XEycrCsme5C8CVWAYEcdBQ_);
		(*T5_).name = "Exception";
		(*T5_).message = TM__9aNIpYgJ1ntUbwp32t1x9cQA_71;
		(*T5_).parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T5_, "Exception", "glyph", "nico.nim", 2281);
goto BeforeRet_;
	}
LA3_: ;
	{
		NIM_BOOL T8_;
		T8_ = (NIM_BOOL)0;
		T8_ = hasKey__pkgZnico_u4787((*currentFont__pkgZnicoZbackendsZcommon_u1041).rects, c_p0);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!!(T8_)) goto LA9_;
		goto BeforeRet_;
	}
LA9_: ;
	T11_ = (tyTuple__FtZxsWeKlOo83uVL9c4OOmg*)0;
	T11_ = X5BX5D___pkgZnico_u5153((&(*currentFont__pkgZnicoZbackendsZcommon_u1041).rects), c_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	src = (*T11_);
	T12_.Field0 = ((NI) (x_p1));
	T12_.Field1 = ((NI) (y_p2));
	T12_.Field2 = ((NI) ((NI32)(((NI32) (src.Field2)) * scale_p3)));
	T12_.Field3 = ((NI) ((NI32)(((NI32) (src.Field3)) * scale_p3)));
	dst = T12_;
	fontBlit__pkgZnico_u2486(currentFont__pkgZnicoZbackendsZcommon_u1041, src, dst, currentColor__pkgZnicoZbackendsZcommon_u1054);
	if (NIM_UNLIKELY(*nimErr_)) goto LA13_;
	if (NIM_UNLIKELY(*nimErr_)) {
		LA13_:;
		if (isObjDisplayCheck(nimBorrowCurrentException()->Sup.m_type, 3, 523135488)) {
			*nimErr_ = NIM_FALSE;
			reraiseException();
goto LA15_;
			popCurrentException();
			LA15_:;
		}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = (NI32)((NI32)(((NI32) (src.Field2)) * scale_p3) + scale_p3);
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, print__pkgZnico_u36)(NimStringV2 text_p0, NI32 x_p1, NI32 y_p2, NI32 scale_p3) {
	NI32 x_2;
	NI32 y_2;
	NI32 ix;
	NI32 lineHeight;
	NI32 T6_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		Exception* T5_;
		if (!(currentFont__pkgZnicoZbackendsZcommon_u1041 == ((tyObject_FontcolonObjectType___dvUW3VhhBrL4Rjx0WR5FFg*) NIM_NIL))) goto LA3_;
		T5_ = NIM_NIL;
		T5_ = (Exception*) nimNewObj(sizeof(Exception), NIM_ALIGNOF(Exception));
		(*T5_).Sup.m_type = (&NTIv2__XEycrCsme5C8CVWAYEcdBQ_);
		(*T5_).name = "Exception";
		(*T5_).message = TM__9aNIpYgJ1ntUbwp32t1x9cQA_70;
		(*T5_).parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T5_, "Exception", "print", "nico.nim", 2306);
goto BeforeRet_;
	}
LA3_: ;
	x_2 = x_p1;
	y_2 = y_p2;
	ix = x_2;
	T6_ = (NI32)0;
	T6_ = fontHeight__pkgZnico_u5252();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	lineHeight = (NI32)((NI32)(T6_ * scale_p3) + scale_p3);
	{
		NimStringV2 line;
		NI first;
		NI last;
		NI eolpos;
		line.len = 0; line.p = NIM_NIL;
		first = ((NI)0);
		last = ((NI)0);
		eolpos = ((NI)0);
		{
			while (1) {
				NI colontmpD_;
				NI colontmpD__2;
				NI T32_;
				NimStringV2 T38_;
				colontmpD_ = (NI)0;
				colontmpD__2 = (NI)0;
				{
					while (1) {
						NIM_BOOL T13_;
						T13_ = (NIM_BOOL)0;
						T13_ = (last < text_p0.len);
						if (!(T13_)) goto LA14_;
						T13_ = !((((NU8)(text_p0.p->data[last])) == ((NU8)(13)) || ((NU8)(text_p0.p->data[last])) == ((NU8)(10))));
LA14_: ;
						if (!T13_) goto LA12;
						last += ((NI)1);
					} LA12: ;
				}
				eolpos = last;
				{
					if (!(last < text_p0.len)) goto LA17_;
					{
						if (!((NU8)(text_p0.p->data[last]) == (NU8)(10))) goto LA21_;
						last += ((NI)1);
					}
					goto LA19_;
LA21_: ;
					{
						if (!((NU8)(text_p0.p->data[last]) == (NU8)(13))) goto LA24_;
						last += ((NI)1);
						{
							NIM_BOOL T28_;
							T28_ = (NIM_BOOL)0;
							T28_ = (last < text_p0.len);
							if (!(T28_)) goto LA29_;
							T28_ = ((NU8)(text_p0.p->data[last]) == (NU8)(10));
LA29_: ;
							if (!T28_) goto LA30_;
							last += ((NI)1);
						}
LA30_: ;
					}
					goto LA19_;
LA24_: ;
LA19_: ;
				}
LA17_: ;
				T32_ = (NI)0;
				{
					if (!NIM_FALSE) goto LA35_;
					colontmpD_ = (NI)(last - ((NI)1));
					T32_ = colontmpD_;
				}
				goto LA33_;
LA35_: ;
				{
					colontmpD__2 = (NI)(eolpos - ((NI)1));
					T32_ = colontmpD__2;
				}
LA33_: ;
				T38_.len = 0; T38_.p = NIM_NIL;
				T38_ = substr__system_u8826(text_p0, first, T32_);
				eqsink___system_u2696((&line), T38_);
				{
					NI32 c;
					c = (NI32)0;
					{
						NI32 rune;
						NI i;
						NI32 result;
						rune = (NI32)0;
						i = ((NI)0);
						result = (NI32)0;
						{
							while (1) {
								NI32 T116_;
								if (!(i < (((line.len-1))-(((NI)0))+1))) goto LA42;
								{
									tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T45_;
									tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T48_;
									T45_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T45_.Field1 = ((line.len-1))-(((NI)0))+1;
									if (!((NU32)(((NU) (((NU8)(T45_.Field0[i]))))) <= (NU32)(((NU)127)))) goto LA46_;
									T48_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T48_.Field1 = ((line.len-1))-(((NI)0))+1;
									result = ((NI32) (((NU) (((NU8)(T48_.Field0[i]))))));
									i += ((NI)1);
								}
								goto LA43_;
LA46_: ;
								{
									tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T50_;
									T50_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T50_.Field1 = ((line.len-1))-(((NI)0))+1;
									if (!((NU)((NU32)(((NU) (((NU8)(T50_.Field0[i]))))) >> (NU32)(((NI)5))) == ((NU)6))) goto LA51_;
									{
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T57_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T58_;
										if (!(i <= (NI)((((line.len-1))-(((NI)0))+1) - ((NI)2)))) goto LA55_;
										T57_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T57_.Field1 = ((line.len-1))-(((NI)0))+1;
										T58_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T58_.Field1 = ((line.len-1))-(((NI)0))+1;
										result = ((NI32) ((NU)((NU)((NU32)((NU)(((NU) (((NU8)(T57_.Field0[i])))) & ((NU)31))) << (NU32)(((NI)6))) | (NU)(((NU) (((NU8)(T58_.Field0[(NI)(i + ((NI)1))])))) & ((NU)63)))));
										i += ((NI)2);
									}
									goto LA53_;
LA55_: ;
									{
										result = ((NI32)65533);
										i += ((NI)1);
									}
LA53_: ;
								}
								goto LA43_;
LA51_: ;
								{
									tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T61_;
									T61_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T61_.Field1 = ((line.len-1))-(((NI)0))+1;
									if (!((NU)((NU32)(((NU) (((NU8)(T61_.Field0[i]))))) >> (NU32)(((NI)4))) == ((NU)14))) goto LA62_;
									{
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T68_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T69_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T70_;
										if (!(i <= (NI)((((line.len-1))-(((NI)0))+1) - ((NI)3)))) goto LA66_;
										T68_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T68_.Field1 = ((line.len-1))-(((NI)0))+1;
										T69_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T69_.Field1 = ((line.len-1))-(((NI)0))+1;
										T70_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T70_.Field1 = ((line.len-1))-(((NI)0))+1;
										result = ((NI32) ((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(T68_.Field0[i])))) & ((NU)15))) << (NU32)(((NI)12))) | (NU)((NU32)((NU)(((NU) (((NU8)(T69_.Field0[(NI)(i + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(T70_.Field0[(NI)(i + ((NI)2))])))) & ((NU)63)))));
										i += ((NI)3);
									}
									goto LA64_;
LA66_: ;
									{
										result = ((NI32)65533);
										i += ((NI)1);
									}
LA64_: ;
								}
								goto LA43_;
LA62_: ;
								{
									tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T73_;
									T73_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T73_.Field1 = ((line.len-1))-(((NI)0))+1;
									if (!((NU)((NU32)(((NU) (((NU8)(T73_.Field0[i]))))) >> (NU32)(((NI)3))) == ((NU)30))) goto LA74_;
									{
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T80_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T81_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T82_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T83_;
										if (!(i <= (NI)((((line.len-1))-(((NI)0))+1) - ((NI)4)))) goto LA78_;
										T80_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T80_.Field1 = ((line.len-1))-(((NI)0))+1;
										T81_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T81_.Field1 = ((line.len-1))-(((NI)0))+1;
										T82_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T82_.Field1 = ((line.len-1))-(((NI)0))+1;
										T83_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T83_.Field1 = ((line.len-1))-(((NI)0))+1;
										result = ((NI32) ((NU)((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(T80_.Field0[i])))) & ((NU)7))) << (NU32)(((NI)18))) | (NU)((NU32)((NU)(((NU) (((NU8)(T81_.Field0[(NI)(i + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)12)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T82_.Field0[(NI)(i + ((NI)2))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(T83_.Field0[(NI)(i + ((NI)3))])))) & ((NU)63)))));
										i += ((NI)4);
									}
									goto LA76_;
LA78_: ;
									{
										result = ((NI32)65533);
										i += ((NI)1);
									}
LA76_: ;
								}
								goto LA43_;
LA74_: ;
								{
									tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T86_;
									T86_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T86_.Field1 = ((line.len-1))-(((NI)0))+1;
									if (!((NU)((NU32)(((NU) (((NU8)(T86_.Field0[i]))))) >> (NU32)(((NI)2))) == ((NU)62))) goto LA87_;
									{
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T93_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T94_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T95_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T96_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T97_;
										if (!(i <= (NI)((((line.len-1))-(((NI)0))+1) - ((NI)5)))) goto LA91_;
										T93_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T93_.Field1 = ((line.len-1))-(((NI)0))+1;
										T94_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T94_.Field1 = ((line.len-1))-(((NI)0))+1;
										T95_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T95_.Field1 = ((line.len-1))-(((NI)0))+1;
										T96_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T96_.Field1 = ((line.len-1))-(((NI)0))+1;
										T97_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T97_.Field1 = ((line.len-1))-(((NI)0))+1;
										result = ((NI32) ((NU)((NU)((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(T93_.Field0[i])))) & ((NU)3))) << (NU32)(((NI)24))) | (NU)((NU32)((NU)(((NU) (((NU8)(T94_.Field0[(NI)(i + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)18)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T95_.Field0[(NI)(i + ((NI)2))])))) & ((NU)63))) << (NU32)(((NI)12)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T96_.Field0[(NI)(i + ((NI)3))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(T97_.Field0[(NI)(i + ((NI)4))])))) & ((NU)63)))));
										i += ((NI)5);
									}
									goto LA89_;
LA91_: ;
									{
										result = ((NI32)65533);
										i += ((NI)1);
									}
LA89_: ;
								}
								goto LA43_;
LA87_: ;
								{
									tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T100_;
									T100_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T100_.Field1 = ((line.len-1))-(((NI)0))+1;
									if (!((NU)((NU32)(((NU) (((NU8)(T100_.Field0[i]))))) >> (NU32)(((NI)1))) == ((NU)126))) goto LA101_;
									{
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T107_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T108_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T109_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T110_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T111_;
										tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T112_;
										if (!(i <= (NI)((((line.len-1))-(((NI)0))+1) - ((NI)6)))) goto LA105_;
										T107_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T107_.Field1 = ((line.len-1))-(((NI)0))+1;
										T108_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T108_.Field1 = ((line.len-1))-(((NI)0))+1;
										T109_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T109_.Field1 = ((line.len-1))-(((NI)0))+1;
										T110_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T110_.Field1 = ((line.len-1))-(((NI)0))+1;
										T111_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T111_.Field1 = ((line.len-1))-(((NI)0))+1;
										T112_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T112_.Field1 = ((line.len-1))-(((NI)0))+1;
										result = ((NI32) ((NU)((NU)((NU)((NU)((NU)((NU)((NU32)((NU)(((NU) (((NU8)(T107_.Field0[i])))) & ((NU)1))) << (NU32)(((NI)30))) | (NU)((NU32)((NU)(((NU) (((NU8)(T108_.Field0[(NI)(i + ((NI)1))])))) & ((NU)63))) << (NU32)(((NI)24)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T109_.Field0[(NI)(i + ((NI)2))])))) & ((NU)63))) << (NU32)(((NI)18)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T110_.Field0[(NI)(i + ((NI)3))])))) & ((NU)63))) << (NU32)(((NI)12)))) | (NU)((NU32)((NU)(((NU) (((NU8)(T111_.Field0[(NI)(i + ((NI)4))])))) & ((NU)63))) << (NU32)(((NI)6)))) | (NU)(((NU) (((NU8)(T112_.Field0[(NI)(i + ((NI)5))])))) & ((NU)63)))));
										i += ((NI)6);
									}
									goto LA103_;
LA105_: ;
									{
										result = ((NI32)65533);
										i += ((NI)1);
									}
LA103_: ;
								}
								goto LA43_;
LA101_: ;
								{
									tyOpenArray__g7UvpSI7wiag75QHJKQ1sQ T115_;
									T115_.Field0 = (((line).p) ? ((NIM_CHAR*)line.p->data+(((NI)0))) : NIM_NIL); T115_.Field1 = ((line.len-1))-(((NI)0))+1;
									result = ((NI32) (((NU) (((NU8)(T115_.Field0[i]))))));
									i += ((NI)1);
								}
LA43_: ;
								rune = result;
								c = rune;
								T116_ = (NI32)0;
								T116_ = glyph__pkgZnico_u20(c, x_2, y_2, scale_p3);
								if (NIM_UNLIKELY(*nimErr_)) goto LA8_;
								x_2 += T116_;
							} LA42: ;
						}
					}
				}
				x_2 = ix;
				y_2 += lineHeight;
				{
					if (!(eolpos == last)) goto LA119_;
					goto LA9;
				}
LA119_: ;
				first = last;
			}
		} LA9: ;
		{
			LA8_:;
		}
		{
			if (line.p && !(line.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(line.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, printc__pkgZnico_u41)(NimStringV2 text_p0, NI32 x_p1, NI32 y_p2, NI32 scale_p3) {
	NI32 width;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	width = textWidth__pkgZnico_u51(text_p0, scale_p3);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	print__pkgZnico_u36(text_p0, (NI32)(x_p1 - (NI32)(width / ((NI32)2))), y_p2, scale_p3);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(tyTuple__FtZxsWeKlOo83uVL9c4OOmg, getSprRect__pkgZnico_u6053)(NI32 spr_p0, NI32 w_p1, NI32 h_p2) {
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg result;
	NI tilesX;
	nimZeroMem((void*)(&result), sizeof(tyTuple__FtZxsWeKlOo83uVL9c4OOmg));
	tilesX = (NI)((*spritesheet__pkgZnicoZbackendsZcommon_u1025).w / (*spritesheet__pkgZnicoZbackendsZcommon_u1025).tw);
	result.Field0 = ((NI) ((NI32)((NI32)(spr_p0 % ((NI32) (tilesX))) * ((NI32) ((*spritesheet__pkgZnicoZbackendsZcommon_u1025).tw)))));
	result.Field1 = ((NI) ((NI32)((NI32)(spr_p0 / ((NI32) (tilesX))) * ((NI32) ((*spritesheet__pkgZnicoZbackendsZcommon_u1025).th)))));
	result.Field2 = ((NI) ((NI32)(w_p1 * ((NI32) ((*spritesheet__pkgZnicoZbackendsZcommon_u1025).tw)))));
	result.Field3 = ((NI) ((NI32)(h_p2 * ((NI32) ((*spritesheet__pkgZnicoZbackendsZcommon_u1025).th)))));
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, blitFastFlip__pkgZnico_u2766)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* src_p0, NI32 sx_p1, NI32 sy_p2, NI32 dx_p3, NI32 dy_p4, NI32 w_p5, NI32 h_p6, NIM_BOOL hflip_p7, NIM_BOOL vflip_p8) {
	NI32 colontmpD_;
	NI32 colontmpD__2;
	NI32 colontmpD__3;
	NI32 colontmpD__4;
	NI colontmpD__5;
	NI colontmpD__6;
	NI colontmpD__7;
	NI colontmpD__8;
	NI32 startsx;
	NI32 T1_;
	NI32 sxi;
	NI32 syi;
	NI32 T7_;
	NI32 dxi;
	NI32 dyi;
	NI xi;
	NI yi;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmpD_ = (NI32)0;
	colontmpD__2 = (NI32)0;
	colontmpD__3 = (NI32)0;
	colontmpD__4 = (NI32)0;
	colontmpD__5 = (NI)0;
	colontmpD__6 = (NI)0;
	colontmpD__7 = (NI)0;
	colontmpD__8 = (NI)0;
	T1_ = (NI32)0;
	{
		if (!hflip_p7) goto LA4_;
		colontmpD_ = (NI32)(w_p5 - ((NI32)1));
		T1_ = colontmpD_;
	}
	goto LA2_;
LA4_: ;
	{
		colontmpD__2 = ((NI32)0);
		T1_ = colontmpD__2;
	}
LA2_: ;
	startsx = (NI32)(sx_p1 + T1_);
	sxi = startsx;
	T7_ = (NI32)0;
	{
		if (!vflip_p8) goto LA10_;
		colontmpD__3 = (NI32)(h_p6 - ((NI32)1));
		T7_ = colontmpD__3;
	}
	goto LA8_;
LA10_: ;
	{
		colontmpD__4 = ((NI32)0);
		T7_ = colontmpD__4;
	}
LA8_: ;
	syi = (NI32)(sy_p2 + T7_);
	dxi = dx_p3;
	dyi = dy_p4;
	{
		if (!hflip_p7) goto LA15_;
		colontmpD__5 = ((NI)-1);
		xi = colontmpD__5;
	}
	goto LA13_;
LA15_: ;
	{
		colontmpD__6 = ((NI)1);
		xi = colontmpD__6;
	}
LA13_: ;
	{
		if (!vflip_p8) goto LA20_;
		colontmpD__7 = ((NI)-1);
		yi = colontmpD__7;
	}
	goto LA18_;
LA20_: ;
	{
		colontmpD__8 = ((NI)1);
		yi = colontmpD__8;
	}
LA18_: ;
	{
		while (1) {
			if (!(dyi < (NI32)(dy_p4 + h_p6))) goto LA24;
			{
				{
					NIM_BOOL T28_;
					NIM_BOOL T29_;
					NIM_BOOL T30_;
					T28_ = (NIM_BOOL)0;
					T29_ = (NIM_BOOL)0;
					T30_ = (NIM_BOOL)0;
					T30_ = (syi < ((NI32)0));
					if (T30_) goto LA31_;
					T30_ = (((NI32) ((NI)((*src_p0).h - ((NI)1)))) < syi);
LA31_: ;
					T29_ = T30_;
					if (T29_) goto LA32_;
					T29_ = (dyi < ((NI32) (clipMinY__pkgZnicoZbackendsZcommon_u1060)));
LA32_: ;
					T28_ = T29_;
					if (T28_) goto LA33_;
					T28_ = (((NI32) (clipMaxY__pkgZnicoZbackendsZcommon_u1061)) < dyi);
LA33_: ;
					if (!T28_) goto LA34_;
					syi += ((NI32) (yi));
					dyi += ((NI32)1);
					sxi = startsx;
					dxi = dx_p3;
					goto LA25;
				}
LA34_: ;
				{
					while (1) {
						if (!(dxi < (NI32)(dx_p3 + w_p5))) goto LA37;
						{
							NI srcCol;
							{
								NIM_BOOL T41_;
								NIM_BOOL T42_;
								NIM_BOOL T43_;
								T41_ = (NIM_BOOL)0;
								T42_ = (NIM_BOOL)0;
								T43_ = (NIM_BOOL)0;
								T43_ = (sxi < ((NI32)0));
								if (T43_) goto LA44_;
								T43_ = (((NI32) ((NI)((*src_p0).w - ((NI)1)))) < sxi);
LA44_: ;
								T42_ = T43_;
								if (T42_) goto LA45_;
								T42_ = (dxi < ((NI32) (clipMinX__pkgZnicoZbackendsZcommon_u1058)));
LA45_: ;
								T41_ = T42_;
								if (T41_) goto LA46_;
								T41_ = (((NI32) (clipMaxX__pkgZnicoZbackendsZcommon_u1059)) < dxi);
LA46_: ;
								if (!T41_) goto LA47_;
								dxi += ((NI32)1);
								sxi += ((NI32) (xi));
								goto LA38;
							}
LA47_: ;
							srcCol = ((NI) ((*src_p0).data.p->data[(NI32)((NI32)(syi * ((NI32) ((*src_p0).w))) + sxi)]));
							{
								if (!!(paletteTransparent__pkgZnicoZbackendsZcommon_u1048[(srcCol)- 0])) goto LA51_;
								psetRaw__pkgZnico_u519(dxi, dyi, paletteMapDraw__pkgZnicoZbackendsZcommon_u1046[(srcCol)- 0]);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							}
LA51_: ;
							sxi += ((NI32) (xi));
							dxi += ((NI32)1);
						} LA38: ;
					} LA37: ;
				}
				syi += ((NI32) (yi));
				dyi += ((NI32)1);
				sxi = startsx;
				dxi = dx_p3;
			} LA25: ;
		} LA24: ;
	}
	}BeforeRet_: ;
}
static N_INLINE(void, blitFast__pkgZnico_u2620)(tyObject_SurfacecolonObjectType___0nV08lgWmmCQq9akWtUrWUw* src_p0, NI32 sx_p1, NI32 sy_p2, NI32 dx_p3, NI32 dy_p4, NI32 w_p5, NI32 h_p6) {
	NI32 sxi;
	NI32 syi;
	NI32 dxi;
	NI32 dyi;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	sxi = sx_p1;
	syi = sy_p2;
	dxi = dx_p3;
	dyi = dy_p4;
	{
		while (1) {
			if (!(dyi < (NI32)(dy_p4 + h_p6))) goto LA2;
			{
				{
					NIM_BOOL T6_;
					NIM_BOOL T7_;
					NIM_BOOL T8_;
					T6_ = (NIM_BOOL)0;
					T7_ = (NIM_BOOL)0;
					T8_ = (NIM_BOOL)0;
					T8_ = (syi < ((NI32)0));
					if (T8_) goto LA9_;
					T8_ = (((NI32) ((NI)((*src_p0).h - ((NI)1)))) < syi);
LA9_: ;
					T7_ = T8_;
					if (T7_) goto LA10_;
					T7_ = (dyi < ((NI32) (clipMinY__pkgZnicoZbackendsZcommon_u1060)));
LA10_: ;
					T6_ = T7_;
					if (T6_) goto LA11_;
					T6_ = (((NI32) (clipMaxY__pkgZnicoZbackendsZcommon_u1061)) < dyi);
LA11_: ;
					if (!T6_) goto LA12_;
					syi += ((NI32)1);
					dyi += ((NI32)1);
					sxi = sx_p1;
					dxi = dx_p3;
					goto LA3;
				}
LA12_: ;
				{
					while (1) {
						if (!(dxi < (NI32)(dx_p3 + w_p5))) goto LA15;
						{
							NI srcCol;
							{
								NIM_BOOL T19_;
								NIM_BOOL T20_;
								NIM_BOOL T21_;
								T19_ = (NIM_BOOL)0;
								T20_ = (NIM_BOOL)0;
								T21_ = (NIM_BOOL)0;
								T21_ = (sxi < ((NI32)0));
								if (T21_) goto LA22_;
								T21_ = (((NI32) ((NI)((*src_p0).w - ((NI)1)))) < sxi);
LA22_: ;
								T20_ = T21_;
								if (T20_) goto LA23_;
								T20_ = (dxi < ((NI32) (clipMinX__pkgZnicoZbackendsZcommon_u1058)));
LA23_: ;
								T19_ = T20_;
								if (T19_) goto LA24_;
								T19_ = (((NI32) (clipMaxX__pkgZnicoZbackendsZcommon_u1059)) < dxi);
LA24_: ;
								if (!T19_) goto LA25_;
								dxi += ((NI32)1);
								sxi += ((NI32)1);
								goto LA16;
							}
LA25_: ;
							srcCol = ((NI) ((*src_p0).data.p->data[(NI32)((NI32)(syi * ((NI32) ((*src_p0).w))) + sxi)]));
							{
								if (!!(paletteTransparent__pkgZnicoZbackendsZcommon_u1048[(srcCol)- 0])) goto LA29_;
								psetRaw__pkgZnico_u519(dxi, dyi, paletteMapDraw__pkgZnicoZbackendsZcommon_u1046[(srcCol)- 0]);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							}
LA29_: ;
							sxi += ((NI32)1);
							dxi += ((NI32)1);
						} LA16: ;
					} LA15: ;
				}
				syi += ((NI32)1);
				dyi += ((NI32)1);
				sxi = sx_p1;
				dxi = dx_p3;
			} LA3: ;
		} LA2: ;
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, spr__pkgZnico_u355)(NI32 spr_p0, NI32 x_p1, NI32 y_p2, NI32 w_p3, NI32 h_p4, NIM_BOOL hflip_p5, NIM_BOOL vflip_p6) {
	tyTuple__FtZxsWeKlOo83uVL9c4OOmg src;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = ((*spritesheet__pkgZnicoZbackendsZcommon_u1025).tw == ((NI)0));
		if (T3_) goto LA4_;
		T3_ = ((*spritesheet__pkgZnicoZbackendsZcommon_u1025).th == ((NI)0));
LA4_: ;
		if (!T3_) goto LA5_;
		goto BeforeRet_;
	}
LA5_: ;
	src = getSprRect__pkgZnico_u6053(spr_p0, w_p3, h_p4);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NIM_BOOL T9_;
		T9_ = (NIM_BOOL)0;
		T9_ = hflip_p5;
		if (T9_) goto LA10_;
		T9_ = vflip_p6;
LA10_: ;
		if (!T9_) goto LA11_;
		blitFastFlip__pkgZnico_u2766(spritesheet__pkgZnicoZbackendsZcommon_u1025, ((NI32) (src.Field0)), ((NI32) (src.Field1)), (NI32)(x_p1 - cameraX__pkgZnicoZbackendsZcommon_u1044), (NI32)(y_p2 - cameraY__pkgZnicoZbackendsZcommon_u1045), ((NI32) (src.Field2)), ((NI32) (src.Field3)), hflip_p5, vflip_p6);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA7_;
LA11_: ;
	{
		blitFast__pkgZnico_u2620(spritesheet__pkgZnicoZbackendsZcommon_u1025, ((NI32) (src.Field0)), ((NI32) (src.Field1)), (NI32)(x_p1 - cameraX__pkgZnicoZbackendsZcommon_u1044), (NI32)(y_p2 - cameraY__pkgZnicoZbackendsZcommon_u1045), ((NI32) (src.Field2)), ((NI32) (src.Field3)));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA7_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, vline__pkgZnico_u313)(NI32 x_p0, NI32 y0_p1, NI32 y1_p2) {
	NI32 minY;
	NI32 maxY;
	NI32 y0_2;
	NI32 y1_2;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	minY = (NI32)(((NI32) (clipMinY__pkgZnicoZbackendsZcommon_u1060)) + cameraY__pkgZnicoZbackendsZcommon_u1045);
	maxY = (NI32)(((NI32) (clipMaxY__pkgZnicoZbackendsZcommon_u1061)) + cameraY__pkgZnicoZbackendsZcommon_u1045);
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (y0_p1 < minY);
		if (!(T3_)) goto LA4_;
		T3_ = (y1_p2 < minY);
LA4_: ;
		if (!T3_) goto LA5_;
		goto BeforeRet_;
	}
LA5_: ;
	{
		NIM_BOOL T9_;
		T9_ = (NIM_BOOL)0;
		T9_ = (maxY < y0_p1);
		if (!(T9_)) goto LA10_;
		T9_ = (maxY < y1_p2);
LA10_: ;
		if (!T9_) goto LA11_;
		goto BeforeRet_;
	}
LA11_: ;
	y0_2 = y0_p1;
	y1_2 = y1_p2;
	{
		NI32 T17_;
		if (!(y1_2 < y0_2)) goto LA15_;
		T17_ = (NI32)0;
		T17_ = y1_2;
		y1_2 = y0_2;
		y0_2 = T17_;
	}
LA15_: ;
	y0_2 = ((y0_2 >= minY) ? y0_2 : minY);
	y1_2 = ((y1_2 <= maxY) ? y1_2 : maxY);
	{
		NI32 y;
		NI32 res;
		y = (NI32)0;
		res = y0_2;
		{
			while (1) {
				if (!(res <= y1_2)) goto LA20;
				y = res;
				pset__pkgZnico_u242(x_p0, y);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				res += ((NI)1);
			} LA20: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, rect__pkgZnico_u258)(NI32 x1_p0, NI32 y1_p1, NI32 x2_p2, NI32 y2_p3) {
	NI32 w;
	NI32 h;
	NI32 x;
	NI32 y;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	w = (NI32)(x2_p2 - x1_p0);
	h = (NI32)(y2_p3 - y1_p1);
	x = x1_p0;
	y = y1_p1;
	hline__pkgZnico_u305(x, y, (NI32)(x + w));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	hline__pkgZnico_u305(x, (NI32)(y + h), (NI32)(x + w));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	vline__pkgZnico_u313((NI32)(x + w), (NI32)(y + ((NI32)1)), (NI32)((NI32)(y + h) - ((NI32)1)));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	vline__pkgZnico_u313(x, (NI32)(y + ((NI32)1)), (NI32)((NI32)(y + h) - ((NI32)1)));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, atmdotdotatsdotdotatsdotdotatsdotnimbleatspkgs2atsnicominus0dot4dot10minusf4d0514d40cc9aeaa3f02e3654986ff28d1038ecatsnicodotnim_Init000)(void) {
{
	clipMaxX__pkgZnicoZbackendsZcommon_u1059 = (NI)(screenWidth__pkgZnicoZbackendsZcommon_u921 - ((NI)1));
	clipMaxY__pkgZnicoZbackendsZcommon_u1061 = (NI)(screenHeight__pkgZnicoZbackendsZcommon_u922 - ((NI)1));
	{
		NI i;
		i = ((NI)0);
		{
			while (1) {
				if (!(i < ((NI)16))) goto LA3;
				i__pkgZnico_u892 = i;
				bayer4x4__pkgZnico_u887[(i__pkgZnico_u892)- 0] = ((NF32)(((NF32) (bayer4x4int__pkgZnico_u886[(i__pkgZnico_u892)- 0]))) / (NF32)(16.0f));
				i += ((NI)1);
			} LA3: ;
		}
	}
	nimTestErrorFlag();
}
}

