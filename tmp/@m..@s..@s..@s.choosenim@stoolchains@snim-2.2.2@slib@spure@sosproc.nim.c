/* Generated by Nim Compiler v2.2.2 */
/* Compiled for: Linux, wasm32, clang */
/* Command for C compiler:
   emcc -c -w -ferror-limit=3 -pthread -flto -O3   -I/home/gregis/.choosenim/toolchains/nim-2.2.2/lib -I/home/gregis/Projects/OneLastBeat/src -o /home/gregis/Projects/OneLastBeat/tmp/@m..@s..@s..@s.choosenim@stoolchains@snim-2.2.2@slib@spure@sosproc.nim.c.o /home/gregis/Projects/OneLastBeat/tmp/@m..@s..@s..@s.choosenim@stoolchains@snim-2.2.2@slib@spure@sosproc.nim.c */
#define NIM_INTBITS 32

#include "nimbase.h"
#include <string.h>
#include <sys/types.h>
#include <unistd.h>
#include <errno.h>
#include <fcntl.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
typedef struct tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_StringTableObj__iKFSivqnSQE42YZSbu9cwnA tyObject_StringTableObj__iKFSivqnSQE42YZSbu9cwnA;
typedef struct tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ tySequence__sM4lkSb7zS6F7OVMvW9cffQ;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content;
typedef struct tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct RootObj RootObj;
typedef struct tyObject_StreamObj__bDd24In9b3VuDv2QPQULZmA tyObject_StreamObj__bDd24In9b3VuDv2QPQULZmA;
typedef struct tyObject_GcEnv__ya2EvOe4TJjBgsQr2pyzfQ tyObject_GcEnv__ya2EvOe4TJjBgsQr2pyzfQ;
typedef struct tyObject_CellSeq__gJgGhndQf4jMmiPOrKMxRg tyObject_CellSeq__gJgGhndQf4jMmiPOrKMxRg;
typedef struct tyTuple__N4J9cV4JZGem3ljqqj5rT0Q tyTuple__N4J9cV4JZGem3ljqqj5rT0Q;
typedef struct tyObject_CellSeq__tZ9b9bi79clGwcRTCbEE09bqYw tyObject_CellSeq__tZ9b9bi79clGwcRTCbEE09bqYw;
typedef struct tyTuple__KKQKvM3dsxdtYGn9cLuLUWA tyTuple__KKQKvM3dsxdtYGn9cLuLUWA;
typedef struct tyTuple__UV3llMMYFckfui8YMBuUZA tyTuple__UV3llMMYFckfui8YMBuUZA;
typedef struct tySequence__xv3aaFd3JCw8NbmALHiezQ tySequence__xv3aaFd3JCw8NbmALHiezQ;
typedef struct tySequence__xv3aaFd3JCw8NbmALHiezQ_Content tySequence__xv3aaFd3JCw8NbmALHiezQ_Content;
typedef struct tyTuple__sPaDkVPSC0MkcoXCxPH9ccA tyTuple__sPaDkVPSC0MkcoXCxPH9ccA;
typedef struct Exception Exception;
typedef struct tySequence__PclZllI1Ry7MX4uStk4Jug tySequence__PclZllI1Ry7MX4uStk4Jug;
typedef struct tySequence__PclZllI1Ry7MX4uStk4Jug_Content tySequence__PclZllI1Ry7MX4uStk4Jug_Content;
typedef struct tyObject_OSError__g5aWKLnwFOcW9cBfUnw9cYgA tyObject_OSError__g5aWKLnwFOcW9cBfUnw9cYgA;
typedef struct tyObject_CatchableError__170PUSd9bpOf09cSZOeaNOaA tyObject_CatchableError__170PUSd9bpOf09cSZOeaNOaA;
typedef struct tyObject_StackTraceEntry__DppJCFaZRvent8fPJeLs4Q tyObject_StackTraceEntry__DppJCFaZRvent8fPJeLs4Q;
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
typedef NU8 tySet_tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA;
typedef int tyArray__NO6udWOtIkldhscb9cksBow[2];
struct tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ {
	NimStringV2 sysCommand;
	NCSTRING* sysArgs;
	NCSTRING* sysEnv;
	NCSTRING workingDir;
	tyArray__NO6udWOtIkldhscb9cksBow pStdin;
	tyArray__NO6udWOtIkldhscb9cksBow pStdout;
	tyArray__NO6udWOtIkldhscb9cksBow pStderr;
	tyArray__NO6udWOtIkldhscb9cksBow pErrorPipe;
	tySet_tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA options;
};
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ {
  NI len; tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content* p;
};
struct tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg {
	NI rc;
	NI rootIdx;
};
struct TNimTypeV2 {
	void* destructor;
	NI size;
	NI16 align;
	NI16 depth;
	NU32* display;
	void* traceImpl;
	void* typeInfoV1;
	NI flags;
	void* vTable[SEQ_DECL_SIZE];
};
struct RootObj {
	TNimTypeV2* m_type;
};
struct tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA {
	RootObj Sup;
	int inHandle;
	int outHandle;
	int errHandle;
	pid_t id;
	tyObject_StreamObj__bDd24In9b3VuDv2QPQULZmA* inStream;
	tyObject_StreamObj__bDd24In9b3VuDv2QPQULZmA* outStream;
	tyObject_StreamObj__bDd24In9b3VuDv2QPQULZmA* errStream;
	int exitStatus;
	NIM_BOOL exitFlag;
	tySet_tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA options;
};
struct tyObject_CellSeq__gJgGhndQf4jMmiPOrKMxRg {
	NI len;
	NI cap;
	tyTuple__N4J9cV4JZGem3ljqqj5rT0Q* d;
};
struct tyObject_CellSeq__tZ9b9bi79clGwcRTCbEE09bqYw {
	NI len;
	NI cap;
	tyTuple__KKQKvM3dsxdtYGn9cLuLUWA* d;
};
struct tyObject_GcEnv__ya2EvOe4TJjBgsQr2pyzfQ {
	tyObject_CellSeq__gJgGhndQf4jMmiPOrKMxRg traceStack;
	tyObject_CellSeq__tZ9b9bi79clGwcRTCbEE09bqYw toFree;
	NI freed;
	NI touched;
	NI edges;
	NI rcSum;
	NIM_BOOL keepThreshold;
};
struct tyTuple__N4J9cV4JZGem3ljqqj5rT0Q {
	void** Field0;
	TNimTypeV2* Field1;
};
typedef NU8 tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA;
typedef NCSTRING tyUncheckedArray__nvS6J9clHMUMHfoZd8Ad2zg[1];
struct tyTuple__UV3llMMYFckfui8YMBuUZA {
	NimStringV2 Field0;
	NimStringV2 Field1;
};
struct tySequence__xv3aaFd3JCw8NbmALHiezQ {
  NI len; tySequence__xv3aaFd3JCw8NbmALHiezQ_Content* p;
};
typedef NU8 tyEnum_StringTableMode__66XaExoQv6Llfs0xoCOjnA;
struct tyObject_StringTableObj__iKFSivqnSQE42YZSbu9cwnA {
	RootObj Sup;
	NI counter;
	tySequence__xv3aaFd3JCw8NbmALHiezQ data;
	tyEnum_StringTableMode__66XaExoQv6Llfs0xoCOjnA mode;
};
struct tyTuple__sPaDkVPSC0MkcoXCxPH9ccA {
	NimStringV2 Field0;
	NimStringV2 Field1;
	NIM_BOOL Field2;
};
typedef NimStringV2 tyArray__nHXaesL0DJZHyVS07ARPRA[1];
struct tySequence__PclZllI1Ry7MX4uStk4Jug {
  NI len; tySequence__PclZllI1Ry7MX4uStk4Jug_Content* p;
};
struct Exception {
	RootObj Sup;
	Exception* parent;
	NCSTRING name;
	NimStringV2 message;
	tySequence__PclZllI1Ry7MX4uStk4Jug trace;
	Exception* up;
};
struct tyObject_CatchableError__170PUSd9bpOf09cSZOeaNOaA {
	Exception Sup;
};
struct tyObject_OSError__g5aWKLnwFOcW9cBfUnw9cYgA {
	tyObject_CatchableError__170PUSd9bpOf09cSZOeaNOaA Sup;
	NI32 errorCode;
};
typedef NimStringV2 tyArray__24KAM9afIUgUaqBaEBB6r9bg[3];
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content { NI cap; NimStringV2 data[SEQ_DECL_SIZE]; };
struct tySequence__xv3aaFd3JCw8NbmALHiezQ_Content { NI cap; tyTuple__sPaDkVPSC0MkcoXCxPH9ccA data[SEQ_DECL_SIZE]; };
struct tyObject_StackTraceEntry__DppJCFaZRvent8fPJeLs4Q {
	NCSTRING procname;
	NI line;
	NCSTRING filename;
};
struct tySequence__PclZllI1Ry7MX4uStk4Jug_Content { NI cap; tyObject_StackTraceEntry__DppJCFaZRvent8fPJeLs4Q data[SEQ_DECL_SIZE]; };
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u214)(tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA* dest_p0);
static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicDyn)(void* p_p0);
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NOINLINE(void, rememberCycle__system_u3528)(NIM_BOOL isDestroyAction_p0, tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg* s_p1, TNimTypeV2* desc_p2);
N_LIB_PRIVATE N_NIMCALL(void, nimDestroyAndDispose)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size_p0, NI alignment_p1);
N_LIB_PRIVATE N_NIMCALL(void, rttiDestroy__pureZosproc_u1905)(void* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u234)(tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqtrace___pureZosproc_u246)(tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA* dest_p0, void* env_p1);
static N_INLINE(void, nimTraceRefDyn)(void* q_p0, void* env_p1);
static N_INLINE(void, add__system_u3011)(tyObject_CellSeq__gJgGhndQf4jMmiPOrKMxRg* s_p0, void** c_p1, TNimTypeV2* t_p2);
N_LIB_PRIVATE N_NIMCALL(void, resize__system_u3019)(tyObject_CellSeq__gJgGhndQf4jMmiPOrKMxRg* s_p0);
N_LIB_PRIVATE N_NOINLINE(void, raiseOSError__stdZoserrors_u119)(NI32 errorCode_p0, NimStringV2 additionalInfo_p1);
N_LIB_PRIVATE N_NIMCALL(NI32, osLastError__stdZoserrors_u122)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___system_u2696)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void*, newSeqPayload)(NI cap_p0, NI elemSize_p1, NI elemAlign_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, eqdup___system_u2693)(NimStringV2 src_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u2690)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void, add__pureZunicode_u6549)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ* x_p0, NimStringV2 y_p1);
N_LIB_PRIVATE N_NIMCALL(NCSTRING*, allocCStringArray__system_u3947)(NimStringV2* a_p0, NI a_p0Len_0);
N_LIB_PRIVATE N_NIMCALL(NCSTRING*, envToCStringArray__pureZosproc_u628)(void);
static N_INLINE(NIM_BOOL, eqeq___system_u8792)(NCSTRING x_p0, NCSTRING y_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, cstrToNimstr)(NCSTRING str_p0);
static N_INLINE(NI, find__pureZparseutils_u575)(NimStringV2 a_p0, NIM_CHAR item_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___stdZprivateZospaths2_u312)(tyTuple__UV3llMMYFckfui8YMBuUZA* dest_p0, tyTuple__UV3llMMYFckfui8YMBuUZA src_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, substr__system_u8826)(NimStringV2 s_p0, NI first_p1, NI last_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, substr__system_u8838)(NimStringV2 s_p0, NI first_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___system_u2687)(NimStringV2* dest_p0);
N_LIB_PRIVATE N_NOCONV(void, deallocShared)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___stdZprivateZospaths2_u303)(tyTuple__UV3llMMYFckfui8YMBuUZA* dest_p0);
N_LIB_PRIVATE N_NOCONV(void*, alloc0Impl__system_u1749)(NI size_p0);
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1);
static N_INLINE(void, copyMem__system_u1731)(void* dest_p0, void* source_p1, NI size_p2);
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space_p0);
N_LIB_PRIVATE N_NOCONV(void*, allocImpl__system_u1747)(NI size_p0);
N_LIB_PRIVATE N_NIMCALL(NCSTRING*, envToCStringArray__pureZosproc_u616)(tyObject_StringTableObj__iKFSivqnSQE42YZSbu9cwnA* t_p0);
N_LIB_PRIVATE N_NIMCALL(NI, nstlen)(tyObject_StringTableObj__iKFSivqnSQE42YZSbu9cwnA* t_p0);
static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(pid_t, startProcessAuxFork__pureZosproc_u658)(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* data_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___pureZosproc_u787)(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* dest_p0, tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* src_p1);
N_LIB_PRIVATE N_CDECL(void, startProcessAfterFork__pureZosproc_u660)(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* data_p0);
N_LIB_PRIVATE N_NIMCALL(void, startProcessFail__pureZosproc_u841)(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* data_p0, int error_p1);
static N_INLINE(NI, nimCStrLen)(NCSTRING a_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, findExe__pureZos_u73)(NimStringV2 exe_p0, NIM_BOOL followSymlinks_p1, NimStringV2* extensions_p2, NI extensions_p2Len_0);
static N_INLINE(void, eqdestroy___system_u281)(NimStringV2 x_p0);
static N_INLINE(NIM_BOOL, isObjDisplayCheck)(TNimTypeV2* source_p0, NI16 targetDepth_p1, NU32 token_p2);
static N_INLINE(Exception*, nimBorrowCurrentException)(void);
static N_INLINE(Exception*, getCurrentException)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___stdZtypedthreads_u223)(Exception** dest_p0, Exception* src_p1, NIM_BOOL cyclic_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___stdZoserrors_u98)(tyObject_OSError__g5aWKLnwFOcW9cBfUnw9cYgA* dest_p0);
static N_INLINE(void, popCurrentException)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u784)(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* dest_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuJoinSep)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 sep_p1);
N_LIB_PRIVATE N_NIMCALL(void, echoBinSafe)(NimStringV2* args_p0, NI args_p0Len_0);
N_LIB_PRIVATE N_NIMCALL(void, deallocCStringArray__system_u4001)(NCSTRING* a_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_u3856)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ dest_p0);
N_LIB_PRIVATE TNimTypeV2 NTIv2__OYe3OFvqN3ITnXnULqImWA_;
static const struct {
  NI cap; NIM_CHAR data[0+1];
} TM__HZdw8BhppcTQo8DIK46LSg_3 = { 0 | NIM_STRLIT_FLAG, "" };
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_4 = {0, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_3};
static const struct {
  NI cap; NIM_CHAR data[7+1];
} TM__HZdw8BhppcTQo8DIK46LSg_5 = { 7 | NIM_STRLIT_FLAG, "/bin/sh" };
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_6 = {7, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_5};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_7 = {7, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_5};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__HZdw8BhppcTQo8DIK46LSg_8 = { 2 | NIM_STRLIT_FLAG, "-c" };
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_9 = {2, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_8};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__HZdw8BhppcTQo8DIK46LSg_10 = { 1 | NIM_STRLIT_FLAG, "=" };
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_11 = {1, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_10};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_12 = {1, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_10};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_13 = {0, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_3};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_14 = {0, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_3};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_15 = {0, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_3};
static const struct {
  NI cap; NIM_CHAR data[25+1];
} TM__HZdw8BhppcTQo8DIK46LSg_16 = { 25 | NIM_STRLIT_FLAG, "Could not find command: \'" };
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_17 = {25, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_16};
static const struct {
  NI cap; NIM_CHAR data[13+1];
} TM__HZdw8BhppcTQo8DIK46LSg_18 = { 13 | NIM_STRLIT_FLAG, "\'. OS error: " };
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_19 = {13, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_18};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__HZdw8BhppcTQo8DIK46LSg_20 = { 1 | NIM_STRLIT_FLAG, " " };
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_21 = {1, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_20};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_22 = {1, (NimStrPayload*)&TM__HZdw8BhppcTQo8DIK46LSg_20};
extern NIM_CONST tyArray__nHXaesL0DJZHyVS07ARPRA ExeExts__pureZos_u72;
extern NIM_THREADVAR NIM_BOOL nimInErrorMode__system_u4433;
static NIM_CONST NU32 TM__HZdw8BhppcTQo8DIK46LSg_2[2] = {3701606400, 2276931584};
N_LIB_PRIVATE TNimTypeV2 NTIv2__OYe3OFvqN3ITnXnULqImWA_ = {.destructor = (void*)rttiDestroy__pureZosproc_u1905, .size = sizeof(tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA), .align = (NI16) NIM_ALIGNOF(tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA), .depth = 1, .display = TM__HZdw8BhppcTQo8DIK46LSg_2, .traceImpl = (void*)eqtrace___pureZosproc_u246, .flags = 0};
extern NCSTRING* environ;
extern NIM_THREADVAR Exception* currException__system_u4140;
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (&nimInErrorMode__system_u4433);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_u7(p_p0, ((int)0), size_p1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(NI, minuspercent___system_u813)(NI x_p0, NI y_p1) {
	NI result;
	result = ((NI) ((NU)((NU32)(((NU) (x_p0))) - (NU32)(((NU) (y_p1))))));
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicDyn)(void* p_p0) {
	NIM_BOOL result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_FALSE;
	{
		tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg* cell;
		NI T5_;
		if (!!((p_p0 == NIM_NIL))) goto LA3_;
		T5_ = (NI)0;
		T5_ = minuspercent___system_u813(((NI) (ptrdiff_t) (p_p0)), ((NI)8));
		cell = ((tyObject_RefHeader__gnJExvuIhzi79cQetGScWGg*) (T5_));
		{
			if (!((NI)((*cell).rc & ((NI)-16)) == ((NI)0))) goto LA8_;
			result = NIM_TRUE;
		}
		goto LA6_;
LA8_: ;
		{
			(*cell).rc -= ((NI)16);
		}
LA6_: ;
		rememberCycle__system_u3528(result, cell, (*((TNimTypeV2**) (p_p0))));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA3_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u214)(tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLastCyclicDyn(dest_p0);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose(dest_p0);
	}
LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u234)(tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA* dest_p0) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLastCyclicDyn((*dest_p0).inStream);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest_p0).inStream);
	}
LA4_: ;
	{
		NIM_BOOL T8_;
		T8_ = (NIM_BOOL)0;
		T8_ = nimDecRefIsLastCyclicDyn((*dest_p0).outStream);
		if (!T8_) goto LA9_;
		nimDestroyAndDispose((*dest_p0).outStream);
	}
LA9_: ;
	{
		NIM_BOOL T13_;
		T13_ = (NIM_BOOL)0;
		T13_ = nimDecRefIsLastCyclicDyn((*dest_p0).errStream);
		if (!T13_) goto LA14_;
		nimDestroyAndDispose((*dest_p0).errStream);
	}
LA14_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, rttiDestroy__pureZosproc_u1905)(void* dest_p0) {
	eqdestroy___pureZosproc_u234(((tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA*) (dest_p0)));
}
static N_INLINE(void, add__system_u3011)(tyObject_CellSeq__gJgGhndQf4jMmiPOrKMxRg* s_p0, void** c_p1, TNimTypeV2* t_p2) {
	void** colontmp_;
	TNimTypeV2* colontmp__2;
	{
		if (!((*s_p0).cap <= (*s_p0).len)) goto LA3_;
		resize__system_u3019(s_p0);
	}
LA3_: ;
	colontmp_ = c_p1;
	colontmp__2 = t_p2;
	(*s_p0).d[(*s_p0).len].Field0 = colontmp_;
	(*s_p0).d[(*s_p0).len].Field1 = colontmp__2;
	(*s_p0).len += ((NI)1);
}
static N_INLINE(void, nimTraceRefDyn)(void* q_p0, void* env_p1) {
	void** p;
	p = ((void**) (q_p0));
	{
		tyObject_GcEnv__ya2EvOe4TJjBgsQr2pyzfQ* j;
		if (!!(((*p) == NIM_NIL))) goto LA3_;
		j = ((tyObject_GcEnv__ya2EvOe4TJjBgsQr2pyzfQ*) (env_p1));
		add__system_u3011((&(*j).traceStack), p, (*((TNimTypeV2**) ((*p)))));
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqtrace___pureZosproc_u246)(tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA* dest_p0, void* env_p1) {
	nimTraceRefDyn(&(*dest_p0).inStream, env_p1);
	nimTraceRefDyn(&(*dest_p0).outStream, env_p1);
	nimTraceRefDyn(&(*dest_p0).errStream, env_p1);
}
static N_INLINE(NIM_BOOL, eqeq___system_u8792)(NCSTRING x_p0, NCSTRING y_p1) {
	NIM_BOOL result;
	{
		if (!(((void*) (x_p0)) == ((void*) (y_p1)))) goto LA3_;
		result = NIM_TRUE;
	}
	goto LA1_;
LA3_: ;
	{
		NIM_BOOL T6_;
		T6_ = (NIM_BOOL)0;
		T6_ = (((void*) (x_p0)) == NIM_NIL);
		if (T6_) goto LA7_;
		T6_ = (((void*) (y_p1)) == NIM_NIL);
LA7_: ;
		if (!T6_) goto LA8_;
		result = NIM_FALSE;
	}
	goto LA1_;
LA8_: ;
	{
		int T11_;
		T11_ = (int)0;
		T11_ = strcmp(x_p0, y_p1);
		result = (T11_ == ((NI32)0));
	}
LA1_: ;
	return result;
}
static N_INLINE(NI, find__pureZparseutils_u575)(NimStringV2 a_p0, NIM_CHAR item_p1) {
	NI result;
{	result = ((NI)0);
	{
		NIM_CHAR i;
		NI i_2;
		NI L;
		i = (NIM_CHAR)0;
		i_2 = ((NI)0);
		L = a_p0.len;
		{
			while (1) {
				if (!(i_2 < L)) goto LA3;
				i = a_p0.p->data[i_2];
				{
					if (!((NU8)(i) == (NU8)(item_p1))) goto LA6_;
					goto BeforeRet_;
				}
LA6_: ;
				result += ((NI)1);
				i_2 += ((NI)1);
			} LA3: ;
		}
	}
	result = ((NI)-1);
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest_p0, source_p1, ((size_t) (size_p2)));
}
static N_INLINE(void, copyMem__system_u1731)(void* dest_p0, void* source_p1, NI size_p2) {
	nimCopyMem(dest_p0, source_p1, size_p2);
}
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1) {
	{
		if (!(((NI)0) < src_p1.len)) goto LA3_;
		copyMem__system_u1731(((void*) ((&(*(*dest_p0).p).data[(*dest_p0).len]))), ((void*) ((&(*src_p1.p).data[((NI)0)]))), ((NI)(src_p1.len + ((NI)1))));
		(*dest_p0).len += src_p1.len;
	}
LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(NCSTRING*, envToCStringArray__pureZosproc_u628)(void) {
	NCSTRING* result;
	NI counter;
	void* T7_;
	NI i_2;
	result = (NCSTRING*)0;
	counter = ((NI)0);
	{
		NimStringV2 key;
		NimStringV2 val;
		key.len = 0; key.p = NIM_NIL;
		val.len = 0; val.p = NIM_NIL;
		{
			tyTuple__UV3llMMYFckfui8YMBuUZA ai;
			NI i;
			nimZeroMem((void*)(&ai), sizeof(tyTuple__UV3llMMYFckfui8YMBuUZA));
			i = ((NI)0);
			{
				while (1) {
					NIM_BOOL T5_;
					NimStringV2 kv;
					NI p;
					tyTuple__UV3llMMYFckfui8YMBuUZA T6_;
					T5_ = (NIM_BOOL)0;
					T5_ = eqeq___system_u8792(environ[i], ((NCSTRING) NIM_NIL));
					if (!!(T5_)) goto LA4;
					kv.len = 0; kv.p = NIM_NIL;
					kv = cstrToNimstr(environ[i]);
					i += ((NI)1);
					p = find__pureZparseutils_u575(kv, 61);
					T6_.Field0 = substr__system_u8826(kv, ((NI)0), (NI)(p - ((NI)1)));
					T6_.Field1 = substr__system_u8838(kv, (NI)(p + ((NI)1)));
					eqsink___stdZprivateZospaths2_u312((&ai), T6_);
					eqsink___system_u2696((&key), ai.Field0);
					eqwasMoved___system_u2687((&ai.Field0));
					eqsink___system_u2696((&val), ai.Field1);
					eqwasMoved___system_u2687((&ai.Field1));
					counter += ((NI)1);
					if (kv.p && !(kv.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(kv.p);
}
				} LA4: ;
			}
			eqdestroy___stdZprivateZospaths2_u303((&ai));
		}
		if (val.p && !(val.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(val.p);
}
		if (key.p && !(key.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(key.p);
}
	}
	T7_ = (void*)0;
	T7_ = alloc0Impl__system_u1749(((NI)((NI)(counter + ((NI)1)) * ((NI)4))));
	result = ((NCSTRING*) (T7_));
	i_2 = ((NI)0);
	{
		NimStringV2 key_2;
		NimStringV2 val_2;
		key_2.len = 0; key_2.p = NIM_NIL;
		val_2.len = 0; val_2.p = NIM_NIL;
		{
			tyTuple__UV3llMMYFckfui8YMBuUZA ai_2;
			NI i_3;
			nimZeroMem((void*)(&ai_2), sizeof(tyTuple__UV3llMMYFckfui8YMBuUZA));
			i_3 = ((NI)0);
			{
				while (1) {
					NIM_BOOL T12_;
					NimStringV2 kv_2;
					NimStringV2 x;
					NI p_2;
					tyTuple__UV3llMMYFckfui8YMBuUZA T13_;
					NimStringV2 T14_;
					void* T15_;
					T12_ = (NIM_BOOL)0;
					T12_ = eqeq___system_u8792(environ[i_3], ((NCSTRING) NIM_NIL));
					if (!!(T12_)) goto LA11;
					kv_2.len = 0; kv_2.p = NIM_NIL;
					x.len = 0; x.p = NIM_NIL;
					kv_2 = cstrToNimstr(environ[i_3]);
					i_3 += ((NI)1);
					p_2 = find__pureZparseutils_u575(kv_2, 61);
					T13_.Field0 = substr__system_u8826(kv_2, ((NI)0), (NI)(p_2 - ((NI)1)));
					T13_.Field1 = substr__system_u8838(kv_2, (NI)(p_2 + ((NI)1)));
					eqsink___stdZprivateZospaths2_u312((&ai_2), T13_);
					eqsink___system_u2696((&key_2), ai_2.Field0);
					eqwasMoved___system_u2687((&ai_2.Field0));
					eqsink___system_u2696((&val_2), ai_2.Field1);
					eqwasMoved___system_u2687((&ai_2.Field1));
					T14_.len = 0; T14_.p = NIM_NIL;
					T14_ = rawNewString(key_2.len + val_2.len + 1);
appendString((&T14_), key_2);
appendString((&T14_), TM__HZdw8BhppcTQo8DIK46LSg_11);
appendString((&T14_), val_2);
					x = T14_;
					T15_ = (void*)0;
					T15_ = allocImpl__system_u1747(((NI)(x.len + ((NI)1))));
					result[i_2] = ((NCSTRING) (T15_));
					copyMem__system_u1731(((void*) (result[i_2])), ((void*) ((&x.p->data[((NI)0)]))), ((NI)(x.len + ((NI)1))));
					i_2 += ((NI)1);
					if (x.p && !(x.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(x.p);
}
					if (kv_2.p && !(kv_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(kv_2.p);
}
				} LA11: ;
			}
			eqdestroy___stdZprivateZospaths2_u303((&ai_2));
		}
		if (val_2.p && !(val_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(val_2.p);
}
		if (key_2.p && !(key_2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(key_2.p);
}
	}
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NCSTRING*, envToCStringArray__pureZosproc_u616)(tyObject_StringTableObj__iKFSivqnSQE42YZSbu9cwnA* t_p0) {
	NCSTRING* result;
	NI T1_;
	void* T2_;
	NI i;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NCSTRING*)0;
	T1_ = (NI)0;
	T1_ = nstlen(t_p0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T2_ = (void*)0;
	T2_ = alloc0Impl__system_u1749(((NI)((NI)(T1_ + ((NI)1)) * ((NI)4))));
	result = ((NCSTRING*) (T2_));
	i = ((NI)0);
	{
		NimStringV2 key;
		NimStringV2 val;
		key.len = 0; key.p = NIM_NIL;
		val.len = 0; val.p = NIM_NIL;
		{
			NI h;
			NI colontmp_;
			NI T5_;
			NI res;
			h = (NI)0;
			colontmp_ = (NI)0;
			T5_ = ((*t_p0).data.len-1);
			colontmp_ = T5_;
			res = ((NI)0);
			{
				while (1) {
					if (!(res <= colontmp_)) goto LA7;
					h = ((NI) (res));
					{
						NimStringV2 x;
						NimStringV2 T12_;
						void* T13_;
						if (!(*t_p0).data.p->data[h].Field2) goto LA10_;
						x.len = 0; x.p = NIM_NIL;
						eqcopy___system_u2690((&key), (*t_p0).data.p->data[h].Field0);
						eqcopy___system_u2690((&val), (*t_p0).data.p->data[h].Field1);
						T12_.len = 0; T12_.p = NIM_NIL;
						T12_ = rawNewString(key.len + val.len + 1);
appendString((&T12_), key);
appendString((&T12_), TM__HZdw8BhppcTQo8DIK46LSg_12);
appendString((&T12_), val);
						x = T12_;
						T13_ = (void*)0;
						T13_ = allocImpl__system_u1747(((NI)(x.len + ((NI)1))));
						result[i] = ((NCSTRING) (T13_));
						copyMem__system_u1731(((void*) (result[i])), ((void*) ((&x.p->data[((NI)0)]))), ((NI)(x.len + ((NI)1))));
						i += ((NI)1);
						if (x.p && !(x.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(x.p);
}
					}
LA10_: ;
					res += ((NI)1);
				} LA7: ;
			}
		}
		if (val.p && !(val.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(val.p);
}
		if (key.p && !(key.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(key.p);
}
	}
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s_p0) {
	NCSTRING result;
	{
		if (!(s_p0.len == ((NI)0))) goto LA3_;
		result = "";
	}
	goto LA1_;
LA3_: ;
	{
		result = ((NCSTRING) ((*s_p0.p).data));
	}
LA1_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___pureZosproc_u787)(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* dest_p0, tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* src_p1) {
	eqcopy___system_u2690((&(*dest_p0).sysCommand), (*src_p1).sysCommand);
	(*dest_p0).sysArgs = (*src_p1).sysArgs;
	(*dest_p0).sysEnv = (*src_p1).sysEnv;
	(*dest_p0).workingDir = (*src_p1).workingDir;
	nimCopyMem((void*)(*dest_p0).pStdin, (NIM_CONST void*)(*src_p1).pStdin, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	nimCopyMem((void*)(*dest_p0).pStdout, (NIM_CONST void*)(*src_p1).pStdout, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	nimCopyMem((void*)(*dest_p0).pStderr, (NIM_CONST void*)(*src_p1).pStderr, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	nimCopyMem((void*)(*dest_p0).pErrorPipe, (NIM_CONST void*)(*src_p1).pErrorPipe, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	(*dest_p0).options = (*src_p1).options;
}
N_LIB_PRIVATE N_NIMCALL(void, startProcessFail__pureZosproc_u841)(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* data_p0, int error_p1) {
	NI T1_;
	T1_ = (NI)0;
	T1_ = write((*data_p0).pErrorPipe[(((NI)1))- 0], ((void*) ((&error_p1))), ((NI)4));
	(void)(T1_);
	_exit(((int)1));
}
static N_INLINE(NI, nimCStrLen)(NCSTRING a_p0) {
	NI result;
	size_t T5_;
{	result = (NI)0;
	{
		if (!(a_p0 == 0)) goto LA3_;
		result = ((NI)0);
		goto BeforeRet_;
	}
LA3_: ;
	T5_ = (size_t)0;
	T5_ = strlen(a_p0);
	result = ((NI) (T5_));
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, eqdestroy___system_u281)(NimStringV2 x_p0) {
}
static N_INLINE(NIM_BOOL, isObjDisplayCheck)(TNimTypeV2* source_p0, NI16 targetDepth_p1, NU32 token_p2) {
	NIM_BOOL result;
	NIM_BOOL T1_;
	T1_ = (NIM_BOOL)0;
	T1_ = (targetDepth_p1 <= (*source_p0).depth);
	if (!(T1_)) goto LA2_;
	T1_ = ((*source_p0).display[targetDepth_p1] == token_p2);
LA2_: ;
	result = T1_;
	return result;
}
static N_INLINE(Exception*, nimBorrowCurrentException)(void) {
	Exception* result;
	result = currException__system_u4140;
	return result;
}
static N_INLINE(Exception*, getCurrentException)(void) {
	Exception* result;
	result = NIM_NIL;
	eqcopy___stdZtypedthreads_u223(&result, currException__system_u4140, NIM_FALSE);
	return result;
}
static N_INLINE(void, popCurrentException)(void) {
	eqcopy___stdZtypedthreads_u223(&currException__system_u4140, (*currException__system_u4140).up, NIM_FALSE);
}
N_LIB_PRIVATE N_CDECL(void, startProcessAfterFork__pureZosproc_u660)(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* data_p0) {
	int T42_;
	int T43_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		int T5_;
		int T11_;
		int T17_;
		if (!!((((*data_p0).options &((NU8)1<<((NU)((((tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA)4)))&7U)))!=0))) goto LA3_;
		T5_ = (int)0;
		T5_ = close((*data_p0).pStdin[(((NI)1))- 0]);
		(void)(T5_);
		{
			int T8_;
			T8_ = (int)0;
			T8_ = dup2((*data_p0).pStdin[(((NI)0))- 0], ((int)0));
			if (!(T8_ < ((NI32)0))) goto LA9_;
			startProcessFail__pureZosproc_u841(data_p0, errno);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
LA9_: ;
		T11_ = (int)0;
		T11_ = close((*data_p0).pStdout[(((NI)0))- 0]);
		(void)(T11_);
		{
			int T14_;
			T14_ = (int)0;
			T14_ = dup2((*data_p0).pStdout[(((NI)1))- 0], ((int)1));
			if (!(T14_ < ((NI32)0))) goto LA15_;
			startProcessFail__pureZosproc_u841(data_p0, errno);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
LA15_: ;
		T17_ = (int)0;
		T17_ = close((*data_p0).pStderr[(((NI)0))- 0]);
		(void)(T17_);
		{
			if (!(((*data_p0).options &((NU8)1<<((NU)((((tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA)3)))&7U)))!=0)) goto LA20_;
			{
				int T24_;
				T24_ = (int)0;
				T24_ = dup2((*data_p0).pStdout[(((NI)1))- 0], ((int)2));
				if (!(T24_ < ((NI32)0))) goto LA25_;
				startProcessFail__pureZosproc_u841(data_p0, errno);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
LA25_: ;
		}
		goto LA18_;
LA20_: ;
		{
			{
				int T30_;
				T30_ = (int)0;
				T30_ = dup2((*data_p0).pStderr[(((NI)1))- 0], ((int)2));
				if (!(T30_ < ((NI32)0))) goto LA31_;
				startProcessFail__pureZosproc_u841(data_p0, errno);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
LA31_: ;
		}
LA18_: ;
	}
LA3_: ;
	{
		if (!(((NI)0) < nimCStrLen((*data_p0).workingDir))) goto LA35_;
		{
			int T39_;
			T39_ = (int)0;
			T39_ = chdir((*data_p0).workingDir);
			if (!(T39_ < ((NI32)0))) goto LA40_;
			startProcessFail__pureZosproc_u841(data_p0, errno);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
LA40_: ;
	}
LA35_: ;
	T42_ = (int)0;
	T42_ = close((*data_p0).pErrorPipe[(((NI)0))- 0]);
	(void)(T42_);
	T43_ = (int)0;
	T43_ = fcntl((*data_p0).pErrorPipe[(((NI)1))- 0], F_SETFD, FD_CLOEXEC);
	(void)(T43_);
	{
		NimStringV2 exe;
		NimStringV2 T50_;
		int T55_;
		if (!(((*data_p0).options &((NU8)1<<((NU)((((tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA)1)))&7U)))!=0)) goto LA46_;
		exe.len = 0; exe.p = NIM_NIL;
		exe = TM__HZdw8BhppcTQo8DIK46LSg_14;
		T50_.len = 0; T50_.p = NIM_NIL;
		T50_ = findExe__pureZos_u73((*data_p0).sysCommand, NIM_TRUE, ExeExts__pureZos_u72, 1);
		if (NIM_UNLIKELY(*nimErr_)) {eqdestroy___system_u281(T50_); goto LA49_;}
		eqsink___system_u2696((&exe), T50_);
		if (NIM_UNLIKELY(*nimErr_)) {
			LA49_:;
			if (isObjDisplayCheck(nimBorrowCurrentException()->Sup.m_type, 3, 2526423040)) {
				tyObject_OSError__g5aWKLnwFOcW9cBfUnw9cYgA* e;
				Exception* T54_;
				*nimErr_ = NIM_FALSE;
				e = NIM_NIL;
				T54_ = NIM_NIL;
				T54_ = getCurrentException();
				e = ((tyObject_OSError__g5aWKLnwFOcW9cBfUnw9cYgA*) (T54_));
				startProcessFail__pureZosproc_u841(data_p0, (*e).errorCode);
				if (NIM_UNLIKELY(*nimErr_)) goto LA52_;
				eqdestroy___stdZoserrors_u98(e);
				if (NIM_UNLIKELY(*nimErr_)) goto LA52_;
				popCurrentException();
				LA52_:;
			}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA48_;
		T55_ = (int)0;
		T55_ = execve(nimToCStringConv(exe), (*data_p0).sysArgs, (*data_p0).sysEnv);
		(void)(T55_);
		{
			LA48_:;
		}
		{
			if (exe.p && !(exe.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(exe.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA44_;
LA46_: ;
	{
		int T59_;
		T59_ = (int)0;
		T59_ = execve(nimToCStringConv((*data_p0).sysCommand), (*data_p0).sysArgs, (*data_p0).sysEnv);
		(void)(T59_);
	}
LA44_: ;
	startProcessFail__pureZosproc_u841(data_p0, errno);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u784)(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* dest_p0) {
	if ((*dest_p0).sysCommand.p && !((*dest_p0).sysCommand.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared((*dest_p0).sysCommand.p);
}
}
N_LIB_PRIVATE N_NIMCALL(pid_t, startProcessAuxFork__pureZosproc_u658)(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ* data_p0) {
	pid_t result;
	tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ dataCopy;
	pid_t pid;
	int T13_;
	int error;
	NI sizeRead;
	int T28_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (pid_t)0;
	{
		int T3_;
		NI32 T6_;
		T3_ = (int)0;
		T3_ = pipe((*data_p0).pErrorPipe);
		if (!!((T3_ == ((NI32)0)))) goto LA4_;
		T6_ = (NI32)0;
		T6_ = osLastError__stdZoserrors_u122();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		raiseOSError__stdZoserrors_u119(T6_, TM__HZdw8BhppcTQo8DIK46LSg_13);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
LA4_: ;
	nimZeroMem((void*)(&dataCopy), sizeof(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ));
	pid = (pid_t)0;
	eqcopy___pureZosproc_u787((&dataCopy), data_p0);
	pid = fork();
	{
		if (!(pid == ((NI32)0))) goto LA11_;
		startProcessAfterFork__pureZosproc_u660((&dataCopy));
		if (NIM_UNLIKELY(*nimErr_)) goto LA8_;
		_exit(((int)1));
	}
LA11_: ;
	T13_ = (int)0;
	T13_ = close((*data_p0).pErrorPipe[(((NI)1))- 0]);
	(void)(T13_);
	{
		NI32 T18_;
		if (!(pid < ((NI32)0))) goto LA16_;
		T18_ = (NI32)0;
		T18_ = osLastError__stdZoserrors_u122();
		if (NIM_UNLIKELY(*nimErr_)) goto LA8_;
		raiseOSError__stdZoserrors_u119(T18_, TM__HZdw8BhppcTQo8DIK46LSg_15);
		if (NIM_UNLIKELY(*nimErr_)) goto LA8_;
	}
LA16_: ;
	error = ((int)0);
	sizeRead = read((*data_p0).pErrorPipe[(((NI)0))- 0], ((void*) ((&error))), ((NI)4));
	{
		NimStringV2 colontmpD_;
		NimStringV2 colontmpD__2;
		NimStringV2 T24_;
		NCSTRING T25_;
		if (!(sizeRead == ((NI)4))) goto LA21_;
		colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
		colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
		T24_.len = 0; T24_.p = NIM_NIL;
		T25_ = (NCSTRING)0;
		T25_ = strerror(error);
		colontmpD_ = cstrToNimstr(T25_);
		T24_ = rawNewString((*data_p0).sysCommand.len + colontmpD_.len + 38);
appendString((&T24_), TM__HZdw8BhppcTQo8DIK46LSg_17);
appendString((&T24_), (*data_p0).sysCommand);
appendString((&T24_), TM__HZdw8BhppcTQo8DIK46LSg_19);
appendString((&T24_), colontmpD_);
		colontmpD__2 = T24_;
		raiseOSError__stdZoserrors_u119(error, colontmpD__2);
		if (NIM_UNLIKELY(*nimErr_)) goto LA23_;
		{
			LA23_:;
		}
		{
			if (colontmpD__2.p && !(colontmpD__2.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__2.p);
}
			if (colontmpD_.p && !(colontmpD_.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD_.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA8_;
	}
LA21_: ;
	result = pid;
	eqdestroy___pureZosproc_u784((&dataCopy));
	T28_ = (int)0;
	T28_ = close((*data_p0).pErrorPipe[(((NI)0))- 0]);
	(void)(T28_);
	goto BeforeRet_;
	{
		LA8_:;
	}
	{
		eqdestroy___pureZosproc_u784((&dataCopy));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
	{
		LA7_:;
	}
	{
		int T33_;
		T33_ = (int)0;
		T33_ = close((*data_p0).pErrorPipe[(((NI)0))- 0]);
		(void)(T33_);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA*, nospstartProcess)(NimStringV2 command_p0, NimStringV2 workingDir_p1, NimStringV2* args_p2, NI args_p2Len_0, tyObject_StringTableObj__iKFSivqnSQE42YZSbu9cwnA* env_p3, tySet_tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA options_p4) {
	tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA* result;
	tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ data;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ sysArgsRaw;
	tyArray__NO6udWOtIkldhscb9cksBow pStdin;
	tyArray__NO6udWOtIkldhscb9cksBow pStdout;
	tyArray__NO6udWOtIkldhscb9cksBow pStderr;
	pid_t pid;
	NCSTRING* sysArgs;
	NCSTRING* colontmpD__4;
	NCSTRING* colontmpD__5;
	NCSTRING* sysEnv;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	nimZeroMem((void*)(&data), sizeof(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ));
	sysArgsRaw.len = 0; sysArgsRaw.p = NIM_NIL;
	nimZeroMem((void*)pStdin, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	nimZeroMem((void*)pStdin, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	nimZeroMem((void*)pStdout, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	nimZeroMem((void*)pStdout, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	nimZeroMem((void*)pStderr, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	nimZeroMem((void*)pStderr, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	eqdestroy___pureZosproc_u214(result);
	result = (tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA*) nimNewObj(sizeof(tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA), NIM_ALIGNOF(tyObject_ProcessObj__OYe3OFvqN3ITnXnULqImWA));
	(*result).Sup.m_type = (&NTIv2__OYe3OFvqN3ITnXnULqImWA_);
	(*result).options = options_p4;
	(*result).exitFlag = NIM_TRUE;
	{
		if (!!(((options_p4 &((NU8)1<<((NU)((((tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA)4)))&7U)))!=0))) goto LA4_;
		{
			NIM_BOOL T8_;
			NIM_BOOL T9_;
			int T10_;
			int T12_;
			int T14_;
			NI32 T17_;
			T8_ = (NIM_BOOL)0;
			T9_ = (NIM_BOOL)0;
			T10_ = (int)0;
			T10_ = pipe(pStdin);
			T9_ = !((T10_ == ((NI32)0)));
			if (T9_) goto LA11_;
			T12_ = (int)0;
			T12_ = pipe(pStdout);
			T9_ = !((T12_ == ((NI32)0)));
LA11_: ;
			T8_ = T9_;
			if (T8_) goto LA13_;
			T14_ = (int)0;
			T14_ = pipe(pStderr);
			T8_ = !((T14_ == ((NI32)0)));
LA13_: ;
			if (!T8_) goto LA15_;
			T17_ = (NI32)0;
			T17_ = osLastError__stdZoserrors_u122();
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			raiseOSError__stdZoserrors_u119(T17_, TM__HZdw8BhppcTQo8DIK46LSg_4);
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		}
LA15_: ;
	}
LA4_: ;
	nimZeroMem((void*)(&data), sizeof(tyObject_StartProcessData__0awqXzrRZxK9as0AS17JmyQ));
	{
		NimStringV2 colontmpD_;
		if (!((options_p4 &((NU8)1<<((NU)((((tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA)2)))&7U)))!=0)) goto LA20_;
		colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
		eqsink___system_u2696((&data.sysCommand), TM__HZdw8BhppcTQo8DIK46LSg_6);
		sysArgsRaw.len = 3; sysArgsRaw.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(3, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
		sysArgsRaw.p->data[0] = TM__HZdw8BhppcTQo8DIK46LSg_7;
		sysArgsRaw.p->data[1] = TM__HZdw8BhppcTQo8DIK46LSg_9;
		colontmpD_ = eqdup___system_u2693(command_p0);
		sysArgsRaw.p->data[2] = colontmpD_;
	}
	goto LA18_;
LA20_: ;
	{
		NimStringV2 colontmpD__2;
		colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
		eqcopy___system_u2690((&data.sysCommand), command_p0);
		sysArgsRaw.len = 1; sysArgsRaw.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(1, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
		colontmpD__2 = eqdup___system_u2693(command_p0);
		sysArgsRaw.p->data[0] = colontmpD__2;
		{
			NimStringV2* arg;
			NI i;
			arg = (NimStringV2*)0;
			i = ((NI)0);
			{
				while (1) {
					NimStringV2 colontmpD__3;
					if (!(i < args_p2Len_0)) goto LA25;
					colontmpD__3.len = 0; colontmpD__3.p = NIM_NIL;
					arg = (&args_p2[i]);
					colontmpD__3 = eqdup___system_u2693((*arg));
					add__pureZunicode_u6549((&sysArgsRaw), colontmpD__3);
					i += ((NI)1);
				} LA25: ;
			}
		}
	}
LA18_: ;
	pid = (pid_t)0;
	sysArgs = allocCStringArray__system_u3947(((sysArgsRaw).p) ? (sysArgsRaw.p->data) : NIM_NIL, sysArgsRaw.len);
	colontmpD__4 = (NCSTRING*)0;
	colontmpD__5 = (NCSTRING*)0;
	{
		if (!(env_p3 == ((tyObject_StringTableObj__iKFSivqnSQE42YZSbu9cwnA*) NIM_NIL))) goto LA29_;
		colontmpD__4 = envToCStringArray__pureZosproc_u628();
		if (NIM_UNLIKELY(*nimErr_)) goto LA26_;
		sysEnv = colontmpD__4;
	}
	goto LA27_;
LA29_: ;
	{
		colontmpD__5 = envToCStringArray__pureZosproc_u616(env_p3);
		if (NIM_UNLIKELY(*nimErr_)) goto LA26_;
		sysEnv = colontmpD__5;
	}
LA27_: ;
	data.sysArgs = sysArgs;
	data.sysEnv = sysEnv;
	nimCopyMem((void*)data.pStdin, (NIM_CONST void*)pStdin, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	nimCopyMem((void*)data.pStdout, (NIM_CONST void*)pStdout, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	nimCopyMem((void*)data.pStderr, (NIM_CONST void*)pStderr, sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
	data.workingDir = nimToCStringConv(workingDir_p1);
	data.options = options_p4;
	pid = startProcessAuxFork__pureZosproc_u658((&data));
	if (NIM_UNLIKELY(*nimErr_)) goto LA32_;
	{
		NimStringV2 colontmpD__6;
		tyArray__24KAM9afIUgUaqBaEBB6r9bg T38_;
		if (!((options_p4 &((NU8)1<<((NU)((((tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA)0)))&7U)))!=0)) goto LA35_;
		colontmpD__6.len = 0; colontmpD__6.p = NIM_NIL;
		T38_[0] = command_p0;
		T38_[1] = TM__HZdw8BhppcTQo8DIK46LSg_21;
		colontmpD__6 = nsuJoinSep(args_p2, args_p2Len_0, TM__HZdw8BhppcTQo8DIK46LSg_22);
		if (NIM_UNLIKELY(*nimErr_)) goto LA37_;
		T38_[2] = colontmpD__6;
		echoBinSafe(T38_, 3);
		{
			LA37_:;
		}
		{
			if (colontmpD__6.p && !(colontmpD__6.p->cap & NIM_STRLIT_FLAG)) {
 deallocShared(colontmpD__6.p);
}
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA32_;
	}
LA35_: ;
	(*result).id = pid;
	(*result).exitFlag = NIM_FALSE;
	{
		if (!((options_p4 &((NU8)1<<((NU)((((tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA)4)))&7U)))!=0)) goto LA43_;
		(*result).inHandle = ((int)0);
		(*result).outHandle = ((int)1);
		{
			if (!((options_p4 &((NU8)1<<((NU)((((tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA)3)))&7U)))!=0)) goto LA47_;
			(*result).errHandle = (*result).outHandle;
		}
		goto LA45_;
LA47_: ;
		{
			(*result).errHandle = ((int)2);
		}
LA45_: ;
	}
	goto LA41_;
LA43_: ;
	{
		int T57_;
		int T58_;
		int T59_;
		(*result).inHandle = pStdin[(((NI)1))- 0];
		(*result).outHandle = pStdout[(((NI)0))- 0];
		{
			int T55_;
			if (!((options_p4 &((NU8)1<<((NU)((((tyEnum_ProcessOption__Uv0WJtGKhlKIoRPgQ9bhbCA)3)))&7U)))!=0)) goto LA53_;
			(*result).errHandle = (*result).outHandle;
			T55_ = (int)0;
			T55_ = close(pStderr[(((NI)0))- 0]);
			(void)(T55_);
		}
		goto LA51_;
LA53_: ;
		{
			(*result).errHandle = pStderr[(((NI)0))- 0];
		}
LA51_: ;
		T57_ = (int)0;
		T57_ = close(pStderr[(((NI)1))- 0]);
		(void)(T57_);
		T58_ = (int)0;
		T58_ = close(pStdin[(((NI)0))- 0]);
		(void)(T58_);
		T59_ = (int)0;
		T59_ = close(pStdout[(((NI)1))- 0]);
		(void)(T59_);
	}
LA41_: ;
	{
		LA32_:;
	}
	{
		deallocCStringArray__system_u4001(sysEnv);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto LA26_;
	{
		LA26_:;
	}
	{
		deallocCStringArray__system_u4001(sysArgs);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		eqdestroy___system_u3856(sysArgsRaw);
		eqdestroy___pureZosproc_u784((&data));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
